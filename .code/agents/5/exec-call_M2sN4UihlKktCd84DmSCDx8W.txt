src/server.ts:9:import { Server } from "@modelcontextprotocol/sdk/server/index.js";
src/server.ts:10:import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
src/server.ts:14:} from "@modelcontextprotocol/sdk/types.js";
src/server.ts:103:    description: "Get Graph-RAG context for a query. Combines semantic search with code graph traversal to provide rich context. Use this when you need comprehensive context about a topic including related code, dependencies, and call relationships. Best for: understanding complex features, gathering context for code changes, exploring interconnected code.",
src/server.ts:107:        query: { type: "string", description: "Query for context retrieval" },
src/server.ts:274:          description: "Visualization level: 1=system context, 2=module, 3=file (default: 2)",
src/server.ts:419:  - Graph-RAG context with smart pruning
docs/Augment.md:375:| ä¸Šä¸‹æ–‡å¼•æ“ | ç»“æ„åŒ–ä¸Šä¸‹æ–‡è¾“å‡ºï¼ˆ5 å±‚ï¼‰ | âœ… | `hooks/augment-context-global.sh` |
docs/Augment.md:396:é€šè¿‡ `augment-context-global.sh` å®ç° 5 å±‚ç»“æ„åŒ–è¾“å‡ºï¼š
docs/Augment.md:400:3. `task_context`ï¼šä»»åŠ¡ä¸Šä¸‹æ–‡ï¼ˆæ„å›¾åˆ†æã€ä»£ç ç‰‡æ®µï¼‰
docs/Augment.md:440:| `.devbooks/subgraph-cache.db` | å­å›¾ LRU ç¼“å­˜ |
docs/Augment.md:441:| `.devbooks/conversation-context.json` | å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆFIFO 10 è½®ï¼‰ |
src/tool-handlers.ts:124:  const { stdout, stderr } = await runScript("graph-rag.sh", [
src/tool-handlers.ts:352:  // Available commands: record, get-preferences, cleanup, context, session
scripts/test-embedding.sh:152:HOOK_SCRIPT="$PROJECT_ROOT/.claude/hooks/augment-context-with-embedding.sh"
hooks/augment-context.sh:2:# Augment-style context injection hook v3.0 (Performance Optimized)
scripts/intent-learner.sh:11:#   context save --query <q> --symbols <s1,s2>              - ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡
scripts/intent-learner.sh:12:#   context load                                             - åŠ è½½å¯¹è¯ä¸Šä¸‹æ–‡
scripts/intent-learner.sh:13:#   context apply-weight --results <json>                   - åº”ç”¨å¯¹è¯è¿ç»­æ€§åŠ æƒ
scripts/intent-learner.sh:36:#   CONVERSATION_CONTEXT_PATH - å¯¹è¯ä¸Šä¸‹æ–‡è·¯å¾„ (é»˜è®¤: .devbooks/conversation-context.json)
scripts/intent-learner.sh:64:: "${CONVERSATION_CONTEXT_PATH:=${DEVBOOKS_DIR:-.devbooks}/conversation-context.json}"
scripts/intent-learner.sh:239:ensure_context_dir() {
scripts/intent-learner.sh:248:init_empty_context() {
scripts/intent-learner.sh:249:    ensure_context_dir
scripts/intent-learner.sh:261:            context_window: [],
scripts/intent-learner.sh:269:read_context() {
scripts/intent-learner.sh:270:    ensure_context_dir
scripts/intent-learner.sh:277:            context_window: [],
scripts/intent-learner.sh:288:            context_window: [],
scripts/intent-learner.sh:300:            context_window: [],
scripts/intent-learner.sh:307:write_context() {
scripts/intent-learner.sh:311:    ensure_context_dir
scripts/intent-learner.sh:322:save_context_turn() {
scripts/intent-learner.sh:359:    local context
scripts/intent-learner.sh:360:    context=$(read_context)
scripts/intent-learner.sh:364:    session_id=$(echo "$context" | jq -r '.session_id // empty')
scripts/intent-learner.sh:369:        context=$(echo "$context" | jq \
scripts/intent-learner.sh:377:    next_turn=$(echo "$context" | jq '(.context_window | length) + 1')
scripts/intent-learner.sh:409:    # æ·»åŠ åˆ° context_window
scripts/intent-learner.sh:410:    context=$(echo "$context" | jq --argjson new_turn "$new_turn" '
scripts/intent-learner.sh:411:        .context_window += [$new_turn]
scripts/intent-learner.sh:415:    context=$(echo "$context" | jq --argjson symbols "$symbols_array" '
scripts/intent-learner.sh:422:    context=$(echo "$context" | jq --argjson max "$max_turns" '
scripts/intent-learner.sh:423:        if (.context_window | length) > $max then
scripts/intent-learner.sh:425:            .context_window = (.context_window | .[-$max:])
scripts/intent-learner.sh:433:    context=$(echo "$context" | jq --argjson max "$max_focus" '
scripts/intent-learner.sh:437:            ($ctx.context_window | [.[].focus_symbols[]] | group_by(.) | map({symbol: .[0], count: length}) | sort_by(-.count) | .[0:$max] | map(.symbol)) as $top_symbols |
scripts/intent-learner.sh:445:    write_context "$context"
scripts/intent-learner.sh:452:apply_context_weight() {
scripts/intent-learner.sh:474:    local context
scripts/intent-learner.sh:475:    context=$(read_context)
scripts/intent-learner.sh:477:    # å¦‚æœæ—¢æ²¡æœ‰ context_window ä¹Ÿæ²¡æœ‰ accumulated_focusï¼Œç›´æ¥è¿”å›åŸç»“æœ
scripts/intent-learner.sh:478:    local context_len acc_len
scripts/intent-learner.sh:479:    context_len=$(echo "$context" | jq '.context_window | length // 0')
scripts/intent-learner.sh:480:    acc_len=$(echo "$context" | jq '.accumulated_focus | length // 0')
scripts/intent-learner.sh:481:    if [[ "$context_len" -eq 0 ]] && [[ "$acc_len" -eq 0 ]]; then
scripts/intent-learner.sh:495:        --argjson context "$context" \
scripts/intent-learner.sh:502:        ($context.accumulated_focus // []) as $accumulated |
scripts/intent-learner.sh:505:        ([$context.context_window[-3:]? // [] | .[].focus_symbols[]?] | unique) as $recent |
scripts/intent-learner.sh:508:        ([$context.context_window[-1]?.focus_symbols[]?] | map(split("::")[0]) | unique) as $recent_files |
scripts/intent-learner.sh:529:                context_boost: $total_boost
scripts/intent-learner.sh:543:    session_id=$(init_empty_context)
scripts/intent-learner.sh:564:    local context
scripts/intent-learner.sh:565:    context=$(read_context)
scripts/intent-learner.sh:568:    current_id=$(echo "$context" | jq -r '.session_id // empty')
scripts/intent-learner.sh:572:        echo "$context"
scripts/intent-learner.sh:596:    local context
scripts/intent-learner.sh:597:    context=$(read_context)
scripts/intent-learner.sh:600:    session_id=$(echo "$context" | jq -r '.session_id // empty')
scripts/intent-learner.sh:610:    echo "$context" | jq '{
scripts/intent-learner.sh:614:            turns: (.context_window | length),
scripts/intent-learner.sh:665:# context å‘½ä»¤è·¯ç”±
scripts/intent-learner.sh:666:cmd_context() {
scripts/intent-learner.sh:668:        log_error "ç”¨æ³•: intent-learner context <save|load|apply-weight>"
scripts/intent-learner.sh:677:            save_context_turn "$@"
scripts/intent-learner.sh:680:            read_context
scripts/intent-learner.sh:683:            apply_context_weight "$@"
scripts/intent-learner.sh:958:  context save --query <q> --symbols <s1,s2> [--query-type <type>]
scripts/intent-learner.sh:967:  context load
scripts/intent-learner.sh:970:  context apply-weight --results <json>
scripts/intent-learner.sh:992:  CONVERSATION_CONTEXT_PATH     å¯¹è¯ä¸Šä¸‹æ–‡è·¯å¾„ (é»˜è®¤: .devbooks/conversation-context.json)
scripts/intent-learner.sh:1028:  intent-learner context save --query "find auth module" --symbols "src/auth.ts,src/auth.ts::login"
scripts/intent-learner.sh:1031:  intent-learner context load
scripts/intent-learner.sh:1034:  intent-learner context apply-weight --results '[{"symbol":"src/auth.ts::login","score":0.8}]'
scripts/intent-learner.sh:1063:        if ! is_feature_enabled "context_signals"; then
scripts/intent-learner.sh:1088:        context)
scripts/intent-learner.sh:1089:            cmd_context "$@"
scripts/hotspot-analyzer.sh:238:# ä½¿ç”¨ context-layer.sh çš„åˆ†ç±»é€»è¾‘
scripts/hotspot-analyzer.sh:256:      # ä½¿ç”¨ä¸ context-layer.sh ç›¸åŒçš„ fix åˆ†ç±»è§„åˆ™
scripts/entropy-viz.sh:270:    subgraph çƒ­ç‚¹æ–‡ä»¶åˆ†æ
hooks/augment-context-with-embedding.sh:2:# Augment-style context injection hook with Embedding support
scripts/graph-rag-fusion.sh:3:# åŒ…å«ï¼šRRF èåˆã€LLM é‡æ’åºã€å¯å‘å¼é‡æ’åº
scripts/graph-rag-fusion.sh:14:# ==================== RRF èåˆ ====================
scripts/graph-rag-fusion.sh:16:rrf_fusion() {
scripts/graph-rag-fusion.sh:23:  local rrf_k="$7"
scripts/graph-rag-fusion.sh:32:    --argjson rrf_k "$rrf_k" \
scripts/graph-rag-fusion.sh:38:    def score(rank; weight): weight / ($rrf_k + rank);
scripts/graph-rag-fusion.sh:414:fast_mock_context() {
scripts/graph-rag-fusion.sh:429:    candidates_json=$(rrf_fusion "$keyword_candidates" "$vector_candidates" "$graph_candidates" \
scripts/graph-rag-fusion.sh:430:      "$HYBRID_WEIGHT_KEYWORD" "$HYBRID_WEIGHT_VECTOR" "$HYBRID_WEIGHT_GRAPH" "$HYBRID_RRF_K")
scripts/graph-rag-fusion.sh:437:  local subgraph='{"nodes":[],"edges":[]}'
scripts/graph-rag-fusion.sh:439:  printf '{"schema_version":"1.0","source":"graph-rag","token_count":0,"subgraph":%s,"candidates":%s,"metadata":{"ckb_available":true,"ckb_fallback_reason":null,"fusion_depth":%s,"fusion_weights":"%s","graph_depth":%s,"token_count":0,"boundary_filtered":0,"legacy_mode":%s,"reranked":false,"provider":null,"fallback_reason":null,"retry_count":null,"graph_candidates":%s}}\n' \
scripts/graph-rag-fusion.sh:440:    "$subgraph" "$candidates_json" "$FUSION_DEPTH" "$fusion_weights" "$MAX_DEPTH" "$LEGACY_MODE" "$graph_count"
scripts/context-layer.sh:2:# context-layer.sh - Context Layer Enhancement (Commit Classification + Bug History)
scripts/context-layer.sh:9:#   context-layer.sh --classify <sha>
scripts/context-layer.sh:10:#   context-layer.sh --classify-batch --since "90 days ago"
scripts/context-layer.sh:11:#   context-layer.sh --bug-history --file <path>
scripts/context-layer.sh:12:#   context-layer.sh --index [--days 90]
scripts/context-layer.sh:13:#   context-layer.sh --help
scripts/context-layer.sh:17:#   CONTEXT_INDEX_PATH    - Index file path (default: .devbooks/context-index.json)
scripts/context-layer.sh:32:: "${CONTEXT_INDEX_PATH:=.devbooks/context-index.json}"
scripts/context-layer.sh:78:context-layer.sh - Context Layer Enhancement (Commit Classification + Bug History)
scripts/context-layer.sh:81:  context-layer.sh --classify <sha>
scripts/context-layer.sh:82:  context-layer.sh --classify-batch --since "90 days ago"
scripts/context-layer.sh:83:  context-layer.sh --bug-history --file <path>
scripts/context-layer.sh:84:  context-layer.sh --index [--days 90]
scripts/context-layer.sh:85:  context-layer.sh --help
scripts/context-layer.sh:93:  --index               Generate context index
scripts/context-layer.sh:101:  CONTEXT_INDEX_PATH    Index file path (default: .devbooks/context-index.json)
scripts/context-layer.sh:106:  context-layer.sh --classify abc123
scripts/context-layer.sh:109:  context-layer.sh --classify-batch --since "30 days ago"
scripts/context-layer.sh:112:  context-layer.sh --bug-history --file src/server.ts
scripts/context-layer.sh:114:  # Generate context index
scripts/context-layer.sh:115:  context-layer.sh --index --days 90
scripts/context-layer.sh:342:# Generate context index for all files
scripts/context-layer.sh:345:generate_context_index() {
scripts/context-layer.sh:348:    log_info "Generating context index (last $days days)..."
scripts/context-layer.sh:578:                log_error "Usage: context-layer.sh --classify <sha>"
scripts/context-layer.sh:588:                log_error "Usage: context-layer.sh --bug-history --file <path>"
scripts/context-layer.sh:594:            generate_context_index "$days"
hooks/augment-context-global.sh:55:Usage: augment-context-global.sh [OPTIONS]
hooks/augment-context-global.sh:76:  echo '{"prompt":"fix auth bug"}' | augment-context-global.sh
hooks/augment-context-global.sh:77:  augment-context-global.sh --analyze-intent --prompt "fix authentication bug"
hooks/augment-context-global.sh:78:  augment-context-global.sh --analyze-intent --file src/auth.ts --line 42
hooks/augment-context-global.sh:881:  local graph_rag_tool="${SCRIPT_DIR}/../../tools/graph-rag-context.sh"
hooks/augment-context-global.sh:914:  local reranker_tool="${SCRIPT_DIR}/../../tools/context-reranker.sh"
hooks/augment-context-global.sh:944:build_base_context() {
hooks/augment-context-global.sh:945:  local context
hooks/augment-context-global.sh:946:  context="[DevBooks è‡ªåŠ¨ä¸Šä¸‹æ–‡]
hooks/augment-context-global.sh:956:      context="${context}
hooks/augment-context-global.sh:962:  echo "$context"
hooks/augment-context-global.sh:1142:  if declare -f load_devbooks_context &>/dev/null; then
hooks/augment-context-global.sh:1143:    devbooks_ctx=$(load_devbooks_context "$CWD" 2>/dev/null) || devbooks_ctx='{}'
hooks/augment-context-global.sh:1207:  # 4. æ„å»º task_context
hooks/augment-context-global.sh:1239:  local task_context
hooks/augment-context-global.sh:1240:  task_context=$(jq -n \
hooks/augment-context-global.sh:1273:    --argjson task_context "$task_context" \
hooks/augment-context-global.sh:1279:      task_context: $task_context,
hooks/augment-context-global.sh:1320:  output+="ä¸»è¦æ„å›¾: $(echo "$json_output" | jq -r '.task_context.intent_analysis.primary_intent')\n"
hooks/augment-context-global.sh:1321:  output+="ç½®ä¿¡åº¦: $(echo "$json_output" | jq -r '.task_context.intent_analysis.confidence')\n"
hooks/augment-context-global.sh:1352:add_graph_context() {
hooks/augment-context-global.sh:1353:  local context="$1"
hooks/augment-context-global.sh:1355:  local graph_context=""
hooks/augment-context-global.sh:1360:    graph_context=$(call_graph_rag "$PROMPT")
hooks/augment-context-global.sh:1361:    if [ -n "$graph_context" ]; then
hooks/augment-context-global.sh:1362:      context="${context}
hooks/augment-context-global.sh:1365:$graph_context"
hooks/augment-context-global.sh:1370:  if [ -z "$graph_context" ] && [ -n "$symbols" ]; then
hooks/augment-context-global.sh:1372:    if [ -z "$graph_context" ] && [ "$GRAPH_RAG_ENABLED" = "true" ]; then
hooks/augment-context-global.sh:1380:    context="${context}
hooks/augment-context-global.sh:1389:    context="${context}
hooks/augment-context-global.sh:1395:  echo "$context"
hooks/augment-context-global.sh:1400:  local context="$1"
hooks/augment-context-global.sh:1402:  context="${context}
hooks/augment-context-global.sh:1408:    context="${context}
hooks/augment-context-global.sh:1413:  echo "$context"
hooks/augment-context-global.sh:1418:  local context="$1"
hooks/augment-context-global.sh:1419:  jq -n --arg ctx "$context" \
hooks/augment-context-global.sh:1528:  CONTEXT=$(build_base_context "$AT_REFS")
hooks/augment-context-global.sh:1535:  CONTEXT=$(add_graph_context "$CONTEXT" "$SYMBOLS")
scripts/common.sh:1066:load_devbooks_context() {
scripts/adr-parser.sh:49:    "context" "decision" "status" "title" "file" "path" "type" "name"
scripts/adr-parser.sh:180:    local context
scripts/adr-parser.sh:181:    context=$(extract_section "$file" "Context")
scripts/adr-parser.sh:194:        --arg context "$context" \
scripts/adr-parser.sh:203:            context: $context,
scripts/adr-parser.sh:237:    local context
scripts/adr-parser.sh:238:    context=$(extract_section "$file" "Context")
scripts/adr-parser.sh:252:        --arg context "$context" \
scripts/adr-parser.sh:262:            context: $context,
scripts/adr-parser.sh:301:    # ä» decisionã€contextã€title ä¸­æå–å…³é”®è¯
scripts/adr-parser.sh:302:    local decision context title
scripts/adr-parser.sh:304:    context=$(echo "$adr_json" | jq -r '.context // ""')
scripts/adr-parser.sh:307:    local all_text="$title $decision $context"
scripts/graph-rag.sh:12:#   graph-rag-context.sh --query "æŸ¥è¯¢å†…å®¹" [é€‰é¡¹]
scripts/graph-rag.sh:57:# shellcheck source=graph-rag-core.sh
scripts/graph-rag.sh:58:source "${SCRIPT_DIR}/graph-rag-core.sh"
scripts/graph-rag.sh:61:# shellcheck source=graph-rag-retrieval.sh
scripts/graph-rag.sh:62:source "${SCRIPT_DIR}/graph-rag-retrieval.sh"
scripts/graph-rag.sh:64:# åŠ è½½èåˆæ¨¡å—ï¼ˆRRF èåˆã€LLM é‡æ’åºï¼‰
scripts/graph-rag.sh:65:# shellcheck source=graph-rag-fusion.sh
scripts/graph-rag.sh:66:source "${SCRIPT_DIR}/graph-rag-fusion.sh"
scripts/graph-rag.sh:69:# shellcheck source=graph-rag-query.sh
scripts/graph-rag.sh:70:source "${SCRIPT_DIR}/graph-rag-query.sh"
scripts/graph-rag.sh:80:  graph-rag-context.sh --query "æŸ¥è¯¢å†…å®¹" [é€‰é¡¹]
scripts/graph-rag.sh:105:  graph-rag-context.sh --query "ç”¨æˆ·è®¤è¯ç›¸å…³çš„å‡½æ•°"
scripts/graph-rag.sh:108:  graph-rag-context.sh --query "å¤„ç†æ”¯ä»˜çš„ä»£ç " --top-k 20 --max-depth 3
scripts/graph-rag.sh:111:  graph-rag-context.sh --query "é”™è¯¯å¤„ç†" --format json
scripts/graph-rag.sh:116:    "source": "graph-rag",
scripts/graph-rag.sh:118:    "subgraph": {
scripts/graph-rag.sh:153:  echo "graph-rag-context.sh version 1.0.0"
scripts/graph-rag.sh:337:  result=$(build_context "$QUERY")
scripts/cod-visualizer.sh:188:    echo "    subgraph System[\"Code Intelligence System\"]"
scripts/cod-visualizer.sh:511:            local subgraph_name
scripts/cod-visualizer.sh:512:            subgraph_name=$(_escape_mermaid_label "$module_path")
scripts/cod-visualizer.sh:513:            echo "    subgraph $subgraph_name"
scripts/cod-visualizer.sh:536:        local subgraph_name
scripts/cod-visualizer.sh:537:        subgraph_name=$(_escape_mermaid_label "$module_path")
scripts/cod-visualizer.sh:538:        echo "    subgraph $subgraph_name"
scripts/graph-rag-core.sh:17:# MP5: æ··åˆæ£€ç´¢æƒé‡ (RRF)
scripts/graph-rag-core.sh:21:HYBRID_RRF_K=60
scripts/graph-rag-core.sh:39:CACHE_DIR="${TMPDIR:-/tmp}/.devbooks-cache/graph-rag"
scripts/graph-rag-core.sh:305:      if [[ "$line" =~ ^[[:space:]]+rrf_k:[[:space:]]*([0-9]+) ]]; then
scripts/graph-rag-core.sh:306:        HYBRID_RRF_K="${BASH_REMATCH[1]}"
scripts/graph-rag-core.sh:341:    "$SCRIPT_DIR/graph-rag.sh"
scripts/embedding.sh:78:context_signals_enabled() {
scripts/embedding.sh:92:    in_features && /context_signals:/ { in_target = 1; next }
scripts/embedding.sh:93:    in_features && /^[[:space:]][[:space:]][a-zA-Z]/ && !/context_signals/ { in_target = 0 }
scripts/embedding.sh:113:apply_context_signals() {
scripts/embedding.sh:121:  if ! context_signals_enabled; then
scripts/embedding.sh:122:    log_warn "ä¸Šä¸‹æ–‡ä¿¡å·åŠŸèƒ½å·²ç¦ç”¨ (features.context_signals: false)"
scripts/embedding.sh:157:apply_context_signals_to_tsv() {
scripts/embedding.sh:175:  json=$(apply_context_signals "$json")
scripts/embedding.sh:1162:    candidates_json=$(apply_context_signals "$candidates_json")
scripts/embedding.sh:1200:    apply_context_signals_to_tsv "$TEMP_DIR/final_results.tsv"
scripts/embedding.sh:1264:  --enable-context-signals  å¯ç”¨ä¸Šä¸‹æ–‡ä¿¡å·åŠ æƒï¼ˆéœ€ intent-learnerï¼‰
scripts/embedding.sh:1462:          --enable-context-signals)
scripts/context-compressor.sh:2:# context-compressor.sh - Context skeleton compressor for TS/JS
scripts/context-compressor.sh:5:#   JSONï¼ŒåŒ…å« compressed_context å’Œ metadata
scripts/context-compressor.sh:56:CACHE_DIR="${DEVBOOKS_DIR}/context-compressor-cache"
scripts/context-compressor.sh:64:  context-compressor.sh [é€‰é¡¹] <file|dir>...
scripts/context-compressor.sh:607:    if ! is_feature_enabled "context_compressor"; then
scripts/context-compressor.sh:608:      log_warn "ä¸Šä¸‹æ–‡å‹ç¼©åŠŸèƒ½å·²ç¦ç”¨ (features.context_compressor: false)"
scripts/context-compressor.sh:609:      echo '{"compressed_context":"","metadata":{"status":"disabled"}}'
scripts/context-compressor.sh:754:  local temp_context_file
scripts/context-compressor.sh:755:  temp_context_file=$(mktemp)
scripts/context-compressor.sh:756:  _TEMP_FILES+=("$temp_context_file")
scripts/context-compressor.sh:757:  echo "$_OUTPUT_COMPRESSED_CONTEXT" > "$temp_context_file"
scripts/context-compressor.sh:760:    --rawfile compressed_context "$temp_context_file" \
scripts/context-compressor.sh:774:      compressed_context: $compressed_context,
scripts/context-compressor.sh:798:  local compressed_context=""
scripts/context-compressor.sh:828:    if [ -z "$compressed_context" ]; then
scripts/context-compressor.sh:829:      compressed_context="$file_block"
scripts/context-compressor.sh:831:      compressed_context="${compressed_context}"$'\n'"${file_block}"
scripts/context-compressor.sh:864:    compressed_context=$(printf '%s\n' "$compressed_context" | awk -v limit="$BUDGET" 'NF {count++} count<=limit {print} END {if (count>limit) exit 0}')
scripts/context-compressor.sh:865:    compressed_tokens=$(printf '%s\n' "$compressed_context" | count_compressed_tokens)
scripts/context-compressor.sh:869:  _OUTPUT_COMPRESSED_CONTEXT="$compressed_context"
scripts/cache-utils.sh:4:# ç”¨é€”: ä¸º augment-context-global.sh å’Œ augment-context.sh æä¾›ç»Ÿä¸€çš„ç¼“å­˜æœºåˆ¶
dev-playbooks/project.md:11:- **åè®®**ï¼šMCP (Model Context Protocol) via @modelcontextprotocol/sdk
dev-playbooks/project.md:71:| `ci_graph_rag` | å›¾åŸºä¸Šä¸‹æ–‡æ£€ç´¢ | graph-rag.sh |
dev-playbooks/project.md:98:| @modelcontextprotocol/sdk | npm | æ˜¯ | MCP åè®®å®ç° |
scripts/cache-manager.sh:38:: "${SUBGRAPH_CACHE_DB:=${DEVBOOKS_DIR}/subgraph-cache.db}"
scripts/cache-manager.sh:111:# Initialize SQLite database for subgraph cache (REQ-SLC-001, REQ-SLC-002)
scripts/cache-manager.sh:113:init_subgraph_cache_db() {
scripts/cache-manager.sh:119:        log_error "sqlite3 is required for subgraph cache"
scripts/cache-manager.sh:131:CREATE TABLE IF NOT EXISTS subgraph_cache (
scripts/cache-manager.sh:140:CREATE INDEX IF NOT EXISTS idx_access_time ON subgraph_cache(access_time);
scripts/cache-manager.sh:143:CREATE INDEX IF NOT EXISTS idx_ttl_expires ON subgraph_cache(ttl_expires);
scripts/cache-manager.sh:160:ensure_subgraph_cache_db() {
scripts/cache-manager.sh:162:        init_subgraph_cache_db
scripts/cache-manager.sh:166:# Get value from subgraph cache (REQ-SLC-005)
scripts/cache-manager.sh:170:subgraph_cache_get() {
scripts/cache-manager.sh:173:    ensure_subgraph_cache_db || return 2
scripts/cache-manager.sh:181:    sqlite3 "$SUBGRAPH_CACHE_DB" "DELETE FROM subgraph_cache WHERE ttl_expires IS NOT NULL AND ttl_expires < $now_seconds;" 2>/dev/null || true
scripts/cache-manager.sh:189:UPDATE subgraph_cache SET access_time = $now WHERE key = '$cache_key';
scripts/cache-manager.sh:191:SELECT value FROM subgraph_cache WHERE key = '$cache_key';
scripts/cache-manager.sh:194:WHERE stat_key = CASE WHEN (SELECT COUNT(*) FROM subgraph_cache WHERE key = '$cache_key') > 0 THEN 'hits' ELSE 'misses' END;
scripts/cache-manager.sh:211:# Set value in subgraph cache with LRU eviction (REQ-SLC-006)
scripts/cache-manager.sh:216:subgraph_cache_set() {
scripts/cache-manager.sh:220:    ensure_subgraph_cache_db || return 2
scripts/cache-manager.sh:241:    current_count=$(sqlite3 "$SUBGRAPH_CACHE_DB" "SELECT COUNT(*) FROM subgraph_cache;" 2>/dev/null || echo "0")
scripts/cache-manager.sh:249:                "SELECT key FROM subgraph_cache ORDER BY access_time ASC LIMIT $evict_count;" 2>/dev/null || echo "")
scripts/cache-manager.sh:266:DELETE FROM subgraph_cache WHERE ttl_expires IS NOT NULL AND ttl_expires < $now_seconds;
scripts/cache-manager.sh:270:DELETE FROM subgraph_cache
scripts/cache-manager.sh:272:    SELECT key FROM subgraph_cache
scripts/cache-manager.sh:275:        WHEN (SELECT COUNT(*) FROM subgraph_cache) >= $max_size THEN $evict_count
scripts/cache-manager.sh:280:INSERT OR REPLACE INTO subgraph_cache (key, value, access_time, created_time, ttl_expires)
scripts/cache-manager.sh:282:    (SELECT created_time FROM subgraph_cache WHERE key = '$cache_key'), $now
scripts/cache-manager.sh:290:# Delete entry from subgraph cache
scripts/cache-manager.sh:291:subgraph_cache_delete() {
scripts/cache-manager.sh:294:    ensure_subgraph_cache_db || return 2
scripts/cache-manager.sh:296:    sqlite3 "$SUBGRAPH_CACHE_DB" "DELETE FROM subgraph_cache WHERE key = '$cache_key';"
scripts/cache-manager.sh:300:# Clear all entries from subgraph cache
scripts/cache-manager.sh:301:subgraph_cache_clear() {
scripts/cache-manager.sh:302:    ensure_subgraph_cache_db || return 2
scripts/cache-manager.sh:305:DELETE FROM subgraph_cache;
scripts/cache-manager.sh:312:# Get subgraph cache statistics (REQ-SLC-007, REQ-SLC-009)
scripts/cache-manager.sh:313:subgraph_cache_stats() {
scripts/cache-manager.sh:316:    ensure_subgraph_cache_db || return 2
scripts/cache-manager.sh:321:    total_entries=$(sqlite3 "$SUBGRAPH_CACHE_DB" "SELECT COUNT(*) FROM subgraph_cache;" 2>/dev/null || echo "0")
scripts/cache-manager.sh:322:    oldest_access=$(sqlite3 "$SUBGRAPH_CACHE_DB" "SELECT MIN(access_time) FROM subgraph_cache;" 2>/dev/null || echo "0")
scripts/cache-manager.sh:323:    newest_access=$(sqlite3 "$SUBGRAPH_CACHE_DB" "SELECT MAX(access_time) FROM subgraph_cache;" 2>/dev/null || echo "0")
scripts/cache-manager.sh:409:  stats         Show subgraph cache statistics
scripts/cache-manager.sh:414:  CACHE_MAX_SIZE      Maximum subgraph cache entries (default: 100)
scripts/cache-manager.sh:415:  SUBGRAPH_CACHE_DB   SQLite database path (default: .devbooks/subgraph-cache.db)
scripts/cache-manager.sh:914:    # Check for subgraph cache commands first (positional arguments)
scripts/cache-manager.sh:923:                subgraph_cache_get "$1"
scripts/cache-manager.sh:932:                subgraph_cache_set "$1" "$2"
scripts/cache-manager.sh:941:                subgraph_cache_delete "$1"
scripts/cache-manager.sh:945:                subgraph_cache_clear
scripts/cache-manager.sh:963:                subgraph_cache_stats "$format"
scripts/graph-rag-query.sh:172:build_subgraph() {
scripts/graph-rag-query.sh:238:build_context() {
scripts/graph-rag-query.sh:244:    fast_mock_context "$query"
scripts/graph-rag-query.sh:250:  local cache_key="graph-rag:$CWD:$query:$TOP_K:$MAX_DEPTH:$FUSION_DEPTH:$TOKEN_BUDGET:$CKB_AVAILABLE:$LEGACY_MODE:$RERANK_ENABLED:$HYBRID_WEIGHT_KEYWORD:$HYBRID_WEIGHT_VECTOR:$HYBRID_WEIGHT_GRAPH:$HYBRID_RRF_K"
scripts/graph-rag-query.sh:284:    candidates=$(rrf_fusion "$keyword_candidates" "$vector_candidates" "$graph_candidates" \
scripts/graph-rag-query.sh:285:      "$HYBRID_WEIGHT_KEYWORD" "$HYBRID_WEIGHT_VECTOR" "$HYBRID_WEIGHT_GRAPH" "$HYBRID_RRF_K")
scripts/graph-rag-query.sh:351:  local subgraph='{"nodes":[],"edges":[]}'
scripts/graph-rag-query.sh:353:    subgraph=$(build_subgraph "$trimmed")
scripts/graph-rag-query.sh:364:    --arg source "graph-rag" \
scripts/graph-rag-query.sh:366:    --argjson subgraph "$subgraph" \
scripts/graph-rag-query.sh:386:      subgraph: $subgraph,
scripts/graph-rag-query.sh:425:    edge_count=$(echo "$result" | jq '.subgraph.edges | length')
scripts/graph-rag-query.sh:438:        edge=$(echo "$result" | jq ".subgraph.edges[$j]")
dev-playbooks/_meta/entropy/entropy-report-2026-01-15.md:39:| `hooks/augment-context-global.sh` | 1,099 | ğŸ”´ é«˜ |
dev-playbooks/_meta/entropy/entropy-report-2026-01-15.md:40:| `scripts/graph-rag.sh` | 989 | ğŸ”´ é«˜ |
dev-playbooks/_meta/entropy/entropy-report-2026-01-15.md:46:| `scripts/context-layer.sh` | 611 | ğŸŸ¡ ä¸­ |
dev-playbooks/_meta/entropy/entropy-report-2026-01-15.md:67:| `hooks/augment-context-global.sh` | 7.14 | ä½ |
dev-playbooks/_meta/entropy/entropy-report-2026-01-15.md:68:| `scripts/graph-rag.sh` | 7.09 | ä½ |
dev-playbooks/_meta/entropy/entropy-report-2026-01-15.md:126:   - `hooks/augment-context-global.sh` (1,099 è¡Œ) â†’ æ¨¡å—åŒ–é‡æ„
dev-playbooks/docs/æ¨èMCP.md:16:5. [Context7](#context7)
dev-playbooks/docs/æ¨èMCP.md:32:| **context7** | ä»£ç æ–‡æ¡£ | User Scope | å®æ—¶è·å–æœ€æ–°çš„åº“æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹ |
dev-playbooks/docs/æ¨èMCP.md:391:- **npm åŒ…**ï¼š`@upstash/context7-mcp`
dev-playbooks/docs/æ¨èMCP.md:395:- **å®˜æ–¹ç½‘ç«™**ï¼š[context7.com](https://context7.com)
dev-playbooks/docs/æ¨èMCP.md:396:- **GitHub**ï¼š[upstash/context7](https://github.com/upstash/context7)
dev-playbooks/docs/æ¨èMCP.md:412:    "context7": {
dev-playbooks/docs/æ¨èMCP.md:414:      "args": ["-y", "@upstash/context7-mcp"]
dev-playbooks/docs/æ¨èMCP.md:425:    "context7": {
dev-playbooks/docs/æ¨èMCP.md:427:      "args": ["-y", "@upstash/context7-mcp"],
dev-playbooks/docs/æ¨èMCP.md:442:**è·å– API Key**ï¼šè®¿é—® [context7.com/dashboard](https://context7.com/dashboard) åˆ›å»ºè´¦æˆ·å¹¶è·å–å¯†é’¥ã€‚
dev-playbooks/docs/æ¨èMCP.md:463:Always use context7 when I need code generation, setup or configuration steps, or
dev-playbooks/docs/æ¨èMCP.md:477:å¦‚æœæœªè®¾ç½®è§„åˆ™ï¼Œåœ¨æç¤ºä¸­æ·»åŠ  `use context7`ï¼š
dev-playbooks/docs/æ¨èMCP.md:480:é…ç½® Cloudflare Worker è„šæœ¬ä»¥ç¼“å­˜ JSON API å“åº” 5 åˆ†é’Ÿã€‚use context7
dev-playbooks/docs/æ¨èMCP.md:512:**æŸ¥æ‰¾æ›´å¤š**ï¼šè®¿é—® [context7.com](https://context7.com) æœç´¢å¯ç”¨åº“ã€‚
dev-playbooks/docs/æ¨èMCP.md:554:curl -I https://api.context7.com
dev-playbooks/docs/æ¨èMCP.md:560:# è®¿é—® context7.com/dashboard
dev-playbooks/docs/æ¨èMCP.md:567:2. è®¿é—® [context7.com](https://context7.com) æœç´¢å¯ç”¨åº“
dev-playbooks/docs/æ¨èMCP.md:742:- `context` - ç”¨æˆ·å’Œ GitHub ä¸Šä¸‹æ–‡ä¿¡æ¯
dev-playbooks/docs/æ¨èMCP.md:752:| `context` | ğŸ”° å½“å‰ç”¨æˆ·å’Œ GitHub ä¸Šä¸‹æ–‡ï¼ˆå¼ºçƒˆæ¨èï¼‰|
dev-playbooks/docs/æ¨èMCP.md:774:- `default` - é»˜è®¤é…ç½®ï¼ˆcontext, repos, issues, pull_requests, usersï¼‰
dev-playbooks/docs/æ¨èMCP.md:1628:--shared-browser-context
dev-playbooks/docs/æ¨èMCP.md:1682:    "context7": { ... },
dev-playbooks/docs/æ¨èMCP.md:1811:è¯·å‚è€ƒ [Context7 ç« èŠ‚](#context7) çš„æ•…éšœæ’æŸ¥éƒ¨åˆ†ã€‚
dev-playbooks/docs/æ¨èMCP.md:1894:- [å®˜æ–¹ç½‘ç«™](https://context7.com)
dev-playbooks/docs/æ¨èMCP.md:1895:- [GitHub ä»“åº“](https://github.com/upstash/context7)
dev-playbooks/docs/æ¨èMCP.md:1896:- [npm åŒ…](https://www.npmjs.com/package/@upstash/context7-mcp)
dev-playbooks/docs/æ¨èMCP.md:1897:- [è·å– API Key](https://context7.com/dashboard)
dev-playbooks/docs/æ¨èMCP.md:1898:- [æ·»åŠ é¡¹ç›®åˆ° Context7](https://github.com/upstash/context7#-adding-projects)
dev-playbooks/docs/æ¨èMCP.md:1915:- [MCP åè®®è§„èŒƒ](https://modelcontextprotocol.io/)
dev-playbooks/specs/_meta/project-profile.md:42:â”‚   â”œâ”€â”€ graph-rag.sh       # Graph-RAG
dev-playbooks/specs/_meta/project-profile.md:45:â”‚   â””â”€â”€ augment-context-global.sh  # å…¨å±€ä¸Šä¸‹æ–‡æ³¨å…¥
dev-playbooks/specs/_meta/verification-baseline.md:167:| npm ä¾èµ–æ•° | 1 prod + 2 dev | @modelcontextprotocol/sdk |
dev-playbooks/specs/conversation-context/spec.md:8:# Spec: å¯¹è¯å†å²ä¿¡å·ç´¯ç§¯ï¼ˆconversation-contextï¼‰
dev-playbooks/specs/conversation-context/spec.md:11:> **Capability**: conversation-context
dev-playbooks/specs/conversation-context/spec.md:33:- å­˜å‚¨ä½ç½®ï¼š`.devbooks/conversation-context.json`
dev-playbooks/specs/conversation-context/spec.md:45:  "context_window": [
dev-playbooks/specs/conversation-context/spec.md:121:- åˆ›å»º `.devbooks/conversation-context.json`
dev-playbooks/specs/conversation-context/spec.md:164:- æ¸…ç©º `context_window`
dev-playbooks/specs/conversation-context/spec.md:185:- `context_window`: []
dev-playbooks/specs/conversation-context/spec.md:219:intent-learner.sh context <command> [options]
dev-playbooks/specs/conversation-context/spec.md:224:| `context save --query <q> --symbols <s1,s2>` | ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡ |
dev-playbooks/specs/conversation-context/spec.md:225:| `context load` | åŠ è½½å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡ |
dev-playbooks/specs/conversation-context/spec.md:226:| `context apply-weight --results <json>` | å¯¹ç»“æœåº”ç”¨å¯¹è¯è¿ç»­æ€§åŠ æƒ |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:145:| ä¿®æ”¹æ–‡ä»¶ | `scripts/graph-rag.sh` |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:235:| `scripts/graph-rag.sh` | ä¿®æ”¹ | åŠŸèƒ½å¢å¼ºï¼ˆæ™ºèƒ½è£å‰ªï¼‰ |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:245:| `tests/graph-rag.bats` | ä¿®æ”¹ | æµ‹è¯•æ›´æ–° |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:306:graph-rag.sh â†’ intent-learner.shï¼ˆåå¥½åŠ æƒï¼‰
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:320:| `tests/graph-rag.bats` | ä¿®æ”¹ï¼ˆæ™ºèƒ½è£å‰ªæµ‹è¯•ï¼‰ | P1 |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:349:| `scripts/graph-rag.sh` | ç›´æ¥ä¿®æ”¹ | **é«˜** | æ–°å¢æ™ºèƒ½è£å‰ªé€»è¾‘ï¼Œä¸ intent-learner.sh é›†æˆï¼›è¢« 13 ä¸ªæµ‹è¯•å¼•ç”¨ |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:376:â”‚  intent-learner.sh â—€â”€â”€â”€â”€â”€ graph-rag.sh (æ–°å¢é›†æˆ)               â”‚
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:389:| R1: graph-rag.sh å›å½’ | é«˜ | é«˜ | 13 ä¸ªæµ‹è¯•ä¾èµ–æ­¤è„šæœ¬ | å¢é‡ä¿®æ”¹ï¼Œä¿æŒç°æœ‰æ¥å£ç­¾åï¼›è¿è¡Œå®Œæ•´å›å½’æµ‹è¯• |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:411:   - `scripts/graph-rag.sh`ï¼ˆæ™ºèƒ½è£å‰ª + intent é›†æˆï¼‰
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:424:| OQ-IA03 | intent-learner.sh ä¸ graph-rag.sh çš„è°ƒç”¨æ—¶åºï¼Ÿ | æ€§èƒ½ | å»ºè®® intent ç»“æœå¼‚æ­¥é¢„åŠ è½½ |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:467:| AC-F04 | å­å›¾æ™ºèƒ½è£å‰ªï¼šè¾“å‡º Token æ•° â‰¤ é¢„ç®— | `tests/graph-rag.bats` é¢„ç®—æµ‹è¯• |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:573:| OQ-IA03 | intent-learner.sh ä¸ graph-rag.sh çš„è°ƒç”¨æ—¶åºï¼Ÿ | æ€§èƒ½ | å»ºè®® intent ç»“æœå¼‚æ­¥é¢„åŠ è½½ |
dev-playbooks/changes/archive/achieve-augment-full-parity/proposal.md:1857:â”œâ”€â”€ graph-rag.sh ä¿®æ”¹ï¼ˆæ™ºèƒ½è£å‰ªï¼‰
dev-playbooks/specs/llm-rerank/spec.md:67:2. Consider: semantic match, symbol references, call relationships, context fit
dev-playbooks/specs/llm-rerank/spec.md:142:**When**: æ‰§è¡Œ `graph-rag.sh --query "auth handler" --rerank`
dev-playbooks/specs/llm-rerank/spec.md:154:**When**: æ‰§è¡Œ `graph-rag.sh --query "auth handler" --rerank`
dev-playbooks/specs/adr-parser/spec.md:71:| context | å¦ | ## Context ç« èŠ‚å†…å®¹ |
dev-playbooks/specs/adr-parser/spec.md:104:- statusã€contextã€decisionã€consequencesï¼šåŒ MADR
dev-playbooks/specs/adr-parser/spec.md:191:- æ­£ç¡®æå– statusã€contextã€decisionã€consequences
dev-playbooks/specs/_meta/key-concepts.md:19:**ç›¸å…³ç»„ä»¶**ï¼š`src/server.ts`ï¼Œ`@modelcontextprotocol/sdk`
dev-playbooks/specs/_meta/key-concepts.md:45:**ç›¸å…³ç»„ä»¶**ï¼š`scripts/graph-rag.sh`
dev-playbooks/specs/_meta/key-concepts.md:88:**ç›¸å…³ç»„ä»¶**ï¼š`hooks/augment-context-global.sh`
dev-playbooks/specs/mcp-output-format/spec.md:251:graph-rag.sh --query "test" --format json | jq -e '.metadata | has("ckb_available")'
dev-playbooks/specs/mcp-output-format/spec.md:265:CKB_UNAVAILABLE=1 graph-rag.sh --query "test" --format json | \
dev-playbooks/specs/mcp-output-format/spec.md:279:graph-rag.sh --query "test" --format json | \
dev-playbooks/specs/mcp-output-format/spec.md:294:CKB_MOCK_DELAY_MS=6000 graph-rag.sh --query "test" --format json | \
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:390:    subgraph scripts
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:467:| `scripts/graph-rag.sh` | ä¿®æ”¹ | æ–°å¢ --budget å‚æ•°å’Œè£å‰ªé€»è¾‘ |
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:468:| `tests/graph-rag.bats` | ä¿®æ”¹ | æ–°å¢é¢„ç®—æµ‹è¯•ç”¨ä¾‹ |
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:507:./scripts/graph-rag.sh search <query> --budget <tokens>
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:1014:| AC-F04 | å­å›¾æ™ºèƒ½è£å‰ªï¼šè¾“å‡º Token æ•° â‰¤ é¢„ç®—å€¼ | `tests/graph-rag.bats` é¢„ç®—æµ‹è¯• | M4 |
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:1100:- [ä¿®æ”¹] `scripts/graph-rag.sh`: æ–°å¢æ™ºèƒ½è£å‰ªåŠŸèƒ½
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:1111:| `graph-rag.sh` | `intent-learner.sh` | æ–°å¢ | åå¥½åŠ æƒ |
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:1151:â”‚  [MOD] scripts/graph-rag.sh â”€â”€â–¶ intent-learner.sh (åå¥½åŠ æƒ)            â”‚
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:1175:â”œâ”€â”€ scripts/graph-rag.sh (ä¿®æ”¹ï¼šæ™ºèƒ½è£å‰ª)
dev-playbooks/changes/archive/achieve-augment-full-parity/design.md:1177:â”œâ”€â”€ tests/graph-rag.bats (æ›´æ–°)
dev-playbooks/specs/greedy-selection/spec.md:10:> **æ¨¡å—**: graph-rag.sh
dev-playbooks/specs/cod-visualizer/spec.md:28:- åŒ…å«å­å›¾ï¼ˆsubgraphï¼‰åˆ’åˆ†
dev-playbooks/specs/cod-visualizer/spec.md:63:- æ¨¡å—ä½œä¸ºå­å›¾ï¼ˆsubgraphï¼‰
dev-playbooks/specs/architecture/c4.md:73:â”‚  â”‚  â”‚  (MCP Thin      â”‚    â”‚  (augment-context-global.sh             â”‚â”‚â”‚
dev-playbooks/specs/architecture/c4.md:74:â”‚  â”‚  â”‚   Shell)        â”‚    â”‚   augment-context-with-embedding.sh     â”‚â”‚â”‚
dev-playbooks/specs/architecture/c4.md:90:â”‚  â”‚  â”‚ graph-rag   â”‚  â”‚  indexer    â”‚  â”‚ hotspot-    â”‚  â”‚ boundary-   â”‚â”‚â”‚
dev-playbooks/specs/architecture/c4.md:103:â”‚  â”‚  â”‚  â”‚ cache-      â”‚  â”‚ dependency- â”‚  â”‚ context-    â”‚          â”‚  â”‚â”‚
dev-playbooks/specs/architecture/c4.md:149:| Global Hook | `hooks/augment-context-global.sh` | Hook | å…¨å±€ä¸Šä¸‹æ–‡æ³¨å…¥ï¼Œ4 ç»´æ„å›¾åˆ†æ | Bash |
dev-playbooks/specs/architecture/c4.md:155:| Graph-RAG | `scripts/graph-rag.sh` | Script | å­å›¾æ£€ç´¢ï¼Œè¾¹ç•Œè¿‡æ»¤ | Bash |
dev-playbooks/specs/architecture/c4.md:163:| **Context Layer** | `scripts/context-layer.sh` | Script | **Commit è¯­ä¹‰åˆ†ç±»ï¼ˆfix/feat/refactorï¼‰ã€Bug ä¿®å¤å†å²æå–** | Bash |
dev-playbooks/specs/architecture/c4.md:196:| `hooks/augment-context-global.sh` | 5 å±‚ç»“æ„åŒ–ä¸Šä¸‹æ–‡è¾“å‡ºã€DevBooks é€‚é…æ³¨å…¥ |
dev-playbooks/specs/architecture/c4.md:197:| `scripts/common.sh` | æ–°å¢ detect_devbooks()ã€load_devbooks_context() |
dev-playbooks/specs/architecture/c4.md:206:| `scripts/graph-rag.sh` | èåˆæŸ¥è¯¢é›†æˆï¼š--fusion-depth å‚æ•°ï¼ŒCKB é™çº§æ—¶æœ¬åœ° 1-hop éå† |
dev-playbooks/specs/architecture/c4.md:229:| `ci_graph_rag` | graph-rag.sh | å·²æœ‰ï¼Œ**Full Parity å¢å¼ºï¼š--budget** |
dev-playbooks/specs/architecture/c4.md:274:### scripts/context-layer.sh Components [NEW: Phase 2]
dev-playbooks/specs/architecture/c4.md:282:| `generate_context_index()` | ç”Ÿæˆä¸Šä¸‹æ–‡ç´¢å¼• | - |
dev-playbooks/specs/architecture/c4.md:330:| **`get_bug_fix_ratio()`** | **è·å– Bug ä¿®å¤æ¯”ä¾‹** [Phase 2] | **context-layer.sh** |
dev-playbooks/specs/architecture/c4.md:338:### scripts/graph-rag.sh Components
dev-playbooks/specs/architecture/c4.md:342:| `search()` | ä¸»æœç´¢å‡½æ•° | embedding_search(), subgraph_traverse() |
dev-playbooks/specs/architecture/c4.md:344:| `subgraph_traverse()` | å­å›¾éå†ï¼ˆä¿ç•™è¾¹å…³ç³»ï¼‰ | CKB MCP |
dev-playbooks/specs/architecture/c4.md:346:| **`cached_subgraph()`** | **ç¼“å­˜åŠ é€Ÿå­å›¾æ£€ç´¢** [Phase 2] | **cache-manager.sh** |
dev-playbooks/specs/architecture/c4.md:348:### hooks/augment-context-global.sh Components
dev-playbooks/specs/architecture/c4.md:352:| `generate_context()` | ä¸»å‡½æ•°ï¼šç”Ÿæˆä¸Šä¸‹æ–‡ | analyze_intent_4d() |
dev-playbooks/specs/architecture/c4.md:425:    â”œâ”€â”€â†’ scripts/hotspot-analyzer.sh â”€â”€â†’ context-layer.sh [Phase 2 å¢å¼º]
dev-playbooks/specs/architecture/c4.md:435:    â”œâ”€â”€â†’ scripts/graph-rag.sh â”€â”€â†’ boundary-detector.sh
dev-playbooks/specs/architecture/c4.md:453:    â””â”€â”€â†’ hooks/augment-context-global.sh â”€â”€â†’ pattern-learner.sh
dev-playbooks/specs/architecture/c4.md:464:âœ… hotspot-analyzer.sh â†’ context-layer.shï¼ˆåŠŸèƒ½è„šæœ¬ â†’ å·¥å…·è„šæœ¬ï¼‰
dev-playbooks/specs/architecture/c4.md:466:âœ… graph-rag.sh â†’ cache-manager.shï¼ˆç¼“å­˜åŠ é€Ÿï¼‰
dev-playbooks/specs/architecture/c4.md:467:âœ… graph-rag.sh â†’ intent-learner.shï¼ˆåå¥½åŠ æƒï¼ŒFull Parity æ–°å¢ï¼‰
dev-playbooks/specs/architecture/c4.md:476:âœ… intent-learner.sh â†’ augment-context-global.shï¼ˆå¯¹è¯ä¸Šä¸‹æ–‡æ³¨å…¥ï¼ŒFinal Gaps æ–°å¢ï¼‰
dev-playbooks/specs/architecture/c4.md:477:âœ… augment-context-global.sh â†’ common.sh::detect_devbooks()ï¼ˆDevBooks æ£€æµ‹ï¼ŒFinal Gaps æ–°å¢ï¼‰
dev-playbooks/specs/architecture/c4.md:488:| @modelcontextprotocol/sdk | npm | æ˜¯ | MCP åè®®å®ç° |
dev-playbooks/specs/architecture/c4.md:505:| 2026-01-11 | enhance-code-intelligence | åˆå§‹åˆ›å»ºï¼›æ–°å¢ hotspot-analyzer, boundary-detector, pattern-learner, ast-diffï¼›å¢å¼º bug-locator, graph-rag, call-chain, augment-context-global |
dev-playbooks/specs/architecture/c4.md:506:| 2026-01-13 | **augment-upgrade-phase2** | **Phase 2 å‡çº§**ï¼šæ–°å¢ cache-managerï¼ˆå¤šçº§ç¼“å­˜ L1+L2ï¼Œmtime+blob hash å¤±æ•ˆï¼ŒLRU æ·˜æ±°ï¼‰ã€dependency-guardï¼ˆå¾ªç¯ä¾èµ–æ£€æµ‹ï¼Œæ¶æ„è§„åˆ™æ ¡éªŒï¼‰ã€context-layerï¼ˆCommit è¯­ä¹‰åˆ†ç±»ï¼ŒBug ä¿®å¤å†å²ï¼‰ã€federation-liteï¼ˆè·¨ä»“åº“å¥‘çº¦ç´¢å¼•ï¼‰ï¼›æ–°å¢ pre-commit é’©å­ï¼›æ–°å¢ config/arch-rules.yamlã€config/federation.yaml é…ç½®ï¼›å¢å¼º hotspot-analyzerï¼ˆ--with-bug-historyï¼‰ã€common.shï¼ˆç¼“å­˜å…±äº«å‡½æ•°ï¼‰ï¼›æ–°å¢ MCP å·¥å…· ci_arch_checkã€ci_federation |
dev-playbooks/specs/architecture/c4.md:507:| 2026-01-15 | **augment-parity** | **Augment èƒ½åŠ›å¯¹ç­‰**ï¼šæ–°å¢ graph-store.shï¼ˆSQLite å›¾å­˜å‚¨ï¼Œ4 ç§è¾¹ç±»å‹ CRUDï¼‰ã€scip-to-graph.shï¼ˆSCIP ç´¢å¼•è§£æè½¬æ¢ï¼‰ã€daemon.shï¼ˆå¸¸é©»å®ˆæŠ¤è¿›ç¨‹ï¼ŒUnix Socket é€šä¿¡ï¼‰ï¼›å¢å¼º graph-rag.shï¼ˆLLM é‡æ’åºï¼‰ã€dependency-guard.shï¼ˆå­¤å„¿æ¨¡å—æ£€æµ‹ï¼‰ã€pattern-learner.shï¼ˆè‡ªåŠ¨æ¨¡å¼å‘ç°ï¼‰ã€common.shï¼ˆllm_call() é€‚é…å‡½æ•°ï¼‰ï¼›æ–°å¢ MCP å·¥å…· ci_graph_storeï¼›æ–°å¢ config/features.yaml åŠŸèƒ½å¼€å…³é…ç½® |
dev-playbooks/specs/architecture/c4.md:508:| 2026-01-16 | ****achieve-augment-full-parity**** | ****å…¨é¢è¾¾åˆ° Augment ä»£ç æ™ºèƒ½æ°´å¹³****ï¼šæ–°å¢ ast-delta.sh + src/ast-delta.tsï¼ˆtree-sitter å¢é‡ AST è§£æï¼‰ã€impact-analyzer.shï¼ˆä¼ é€’æ€§å½±å“åˆ†æï¼ŒBFS + ç½®ä¿¡åº¦è¡°å‡ï¼‰ã€cod-visualizer.shï¼ˆMermaid + D3.js æ¶æ„å¯è§†åŒ–ï¼‰ã€intent-learner.shï¼ˆæŸ¥è¯¢å†å² + åå¥½å­¦ä¹ ï¼‰ã€vuln-tracker.shï¼ˆnpm audit æ¼æ´è¿½è¸ªï¼‰ï¼›å¢å¼º graph-rag.shï¼ˆ--budget æ™ºèƒ½è£å‰ªï¼‰ã€federation-lite.shï¼ˆè™šæ‹Ÿè¾¹ç”Ÿæˆï¼‰ï¼›æ–°å¢ MCP å·¥å…· ci_ast_deltaã€ci_impactã€ci_codã€ci_intentã€ci_vulnï¼›æ–°å¢ tree-sitter ä¾èµ– |
dev-playbooks/specs/architecture/c4.md:509:| 2026-01-17 | *****augment-parity-final-gaps***** | *****è¡¥é½ Augment å¯¹ç­‰æœ€åå·®è·ï¼ˆ100% è½»èµ„äº§èƒ½åŠ›å¯¹ç­‰ï¼‰*****ï¼šæ–°å¢ adr-parser.shï¼ˆADR è§£æä¸å…³è”ï¼‰ã€.github/workflows/arch-check.ymlï¼ˆGitHub Action CI/CDï¼‰ã€.gitlab-ci.yml.templateï¼ˆGitLab CI æ¨¡æ¿ï¼‰ï¼›å¢å¼º scip-to-graph.shï¼ˆè¾¹ç±»å‹æ‰©å±•ï¼šIMPLEMENTS/EXTENDS/RETURNS_TYPE/ADR_RELATEDï¼‰ã€graph-store.shï¼ˆfind-path è·¯å¾„æŸ¥è¯¢ + migrate è¿ç§»å‘½ä»¤ï¼‰ã€intent-learner.shï¼ˆå¯¹è¯ä¸Šä¸‹æ–‡æŒä¹…åŒ– + ä¼šè¯ç®¡ç† + è¿ç»­æ€§åŠ æƒï¼‰ã€daemon.shï¼ˆé¢„çƒ­æœºåˆ¶ + è¯·æ±‚å–æ¶ˆåè®®ï¼‰ã€cache-manager.shï¼ˆå­å›¾ LRU ç¼“å­˜ï¼ŒSQLite æŒä¹…åŒ–ï¼Œè·¨è¿›ç¨‹å…±äº«ï¼‰ã€bug-locator.shï¼ˆå½±å“åˆ†æèåˆ --with-impactï¼‰ã€augment-context-global.shï¼ˆ5 å±‚ç»“æ„åŒ–è¾“å‡º + DevBooks é€‚é…ï¼‰ã€common.shï¼ˆdetect_devbooks() + load_devbooks_context()ï¼‰ |
dev-playbooks/specs/architecture/c4.md:510:| 2026-01-18 | ******upgrade-code-intelligence-capabilities****** | ******ä»£ç æ™ºèƒ½èƒ½åŠ›è½»èµ„äº§å‡çº§ï¼ˆ70% â†’ 85-90%ï¼‰******ï¼šæ–°å¢ CKBClientManagerï¼ˆsrc/server.ts å†…ï¼ŒMCP Client SDK é›†æˆï¼Œå¥åº·æ£€æŸ¥ï¼Œé™çº§çŠ¶æ€ç®¡ç†ï¼‰ã€fusion_search()ï¼ˆscripts/embedding.shï¼Œå›¾+å‘é‡èåˆæŸ¥è¯¢ï¼‰ï¼›å¢å¼º scip-to-graph.shï¼ˆIMPLEMENTS/EXTENDS/RETURNS_TYPE è¾¹ç±»å‹è§£æï¼Œæ­£åˆ™é™çº§ï¼‰ã€graph-store.shï¼ˆSchema v3 è¿ç§»ï¼Œè‡ªåŠ¨å¤‡ä»½ä¸å›æ»šï¼Œå¹¶å‘ä¿æŠ¤ï¼‰ã€graph-rag.shï¼ˆ--fusion-depth å‚æ•°ï¼ŒèåˆæŸ¥è¯¢é›†æˆï¼‰ã€daemon.shï¼ˆè‡ªåŠ¨é¢„çƒ­ï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œ30s è¶…æ—¶ï¼‰ï¼›æ–°å¢ 4 ä¸ª CLI è§„æ ¼ï¼ˆmcp-output-format, graph-store-cli, graph-rag-cli, daemon-cliï¼‰ |
dev-playbooks/specs/architecture/c4.md:512:| 2026-01-22 | ********20260118-2112-enhance-code-intelligence-capabilities******** | ********ä»£ç æ™ºèƒ½èƒ½åŠ›å¢å¼ºï¼ˆ9 å¤§æ ¸å¿ƒèƒ½åŠ›ï¼‰********ï¼šæ–°å¢ `scripts/context-compressor.sh`ï¼ˆä¸Šä¸‹æ–‡å‹ç¼©ï¼Œ30-50% å‹ç¼©ç‡ï¼‰ã€`scripts/drift-detector.sh`ï¼ˆæ¶æ„æ¼‚ç§»æ£€æµ‹ï¼ŒC4 åˆè§„æ ¡éªŒï¼‰ã€`scripts/semantic-anomaly.sh`ï¼ˆè¯­ä¹‰å¼‚å¸¸æ£€æµ‹ï¼Œ6 ç§å¼‚å¸¸ç±»å‹ï¼‰ã€`scripts/benchmark.sh`ï¼ˆè¯„æµ‹åŸºå‡†ï¼Œlatency/accuracy/token metricsï¼‰ã€`src/context-signal-manager.ts`ï¼ˆä¸Šä¸‹æ–‡ä¿¡å·ç®¡ç†å™¨ï¼Œ4 ç»´ä¿¡å·é‡‡é›†ï¼‰ï¼›å¢å¼º `scripts/call-chain.sh`ï¼ˆ--data-flow è·¨å‡½æ•°æ•°æ®æµè¿½è¸ªï¼‰ã€`scripts/graph-store.sh`ï¼ˆSchema v4 è¿ç§»ï¼štransitive_closure/path_index/user_signals è¡¨ï¼‰ã€`scripts/embedding.sh`ï¼ˆfusion_search() æ··åˆæ£€ç´¢ï¼ŒRRF èåˆï¼‰ã€`scripts/reranker.sh`ï¼ˆé»˜è®¤é‡æ’åºç®¡çº¿ï¼ŒLLM Provider æŠ½è±¡ï¼‰ï¼›æ–°å¢ MCP å·¥å…· ci_context_compressã€ci_drift_detectã€ci_semantic_anomalyã€ci_benchmarkï¼›Schema v3 â†’ v4 è¿ç§» |
dev-playbooks/specs/smart-pruning/spec.md:55:- graph-rag æœç´¢è¿”å› 20 ä¸ªå€™é€‰ç‰‡æ®µ
dev-playbooks/specs/smart-pruning/spec.md:59:- è°ƒç”¨ `graph-rag.sh search "handleToolCall" --budget 4000`
dev-playbooks/specs/smart-pruning/spec.md:67:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_budget_pruning`
dev-playbooks/specs/smart-pruning/spec.md:83:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_priority_calculation`
dev-playbooks/specs/smart-pruning/spec.md:101:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_budget_boundary`
dev-playbooks/specs/smart-pruning/spec.md:109:- è°ƒç”¨ `graph-rag.sh search "query"`
dev-playbooks/specs/smart-pruning/spec.md:115:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_default_budget`
dev-playbooks/specs/smart-pruning/spec.md:123:- è°ƒç”¨ `graph-rag.sh search "query" --budget 0`
dev-playbooks/specs/smart-pruning/spec.md:129:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_zero_budget`
dev-playbooks/specs/smart-pruning/spec.md:144:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_single_fragment_exceeds_budget`
dev-playbooks/specs/smart-pruning/spec.md:153:- è°ƒç”¨ `graph-rag.sh search "query" --budget 5000`
dev-playbooks/specs/smart-pruning/spec.md:159:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_intent_preference_integration`
dev-playbooks/specs/smart-pruning/spec.md:173:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_token_estimation`
dev-playbooks/specs/smart-pruning/spec.md:188:| SC-SP-001 | `tests/graph-rag.bats::test_budget_pruning` |
dev-playbooks/specs/smart-pruning/spec.md:189:| SC-SP-002 | `tests/graph-rag.bats::test_priority_calculation` |
dev-playbooks/specs/smart-pruning/spec.md:190:| SC-SP-003 | `tests/graph-rag.bats::test_budget_boundary` |
dev-playbooks/specs/smart-pruning/spec.md:191:| SC-SP-004 | `tests/graph-rag.bats::test_default_budget` |
dev-playbooks/specs/smart-pruning/spec.md:192:| SC-SP-005 | `tests/graph-rag.bats::test_zero_budget` |
dev-playbooks/specs/smart-pruning/spec.md:193:| SC-SP-006 | `tests/graph-rag.bats::test_single_fragment_exceeds_budget` |
dev-playbooks/specs/smart-pruning/spec.md:194:| SC-SP-007 | `tests/graph-rag.bats::test_intent_preference_integration` |
dev-playbooks/specs/smart-pruning/spec.md:195:| SC-SP-008 | `tests/graph-rag.bats::test_token_estimation` |
dev-playbooks/changes/archive/achieve-augment-full-parity/verification.md:71:| `tests/graph-rag.bats` | 8 | M4: æ™ºèƒ½è£å‰ª |
dev-playbooks/changes/archive/achieve-augment-full-parity/verification.md:199:### M4: å­å›¾æ™ºèƒ½è£å‰ªï¼ˆæ‰©å±• graph-rag.batsï¼‰
dev-playbooks/specs/hybrid-retrieval/spec.md:1:# è§„æ ¼ï¼šæ··åˆæ£€ç´¢ï¼ˆRRF èåˆï¼‰
dev-playbooks/specs/hybrid-retrieval/spec.md:15:### REQ-HR-001ï¼šRRF èåˆç®—æ³•
dev-playbooks/specs/hybrid-retrieval/spec.md:17:ç³»ç»Ÿåº”å®ç° Reciprocal Rank Fusion (RRF) ç®—æ³•èåˆå¤šç§æ£€ç´¢ç»“æœï¼š
dev-playbooks/specs/hybrid-retrieval/spec.md:20:RRF_score(d) = Î£_r [ 1 / (k + rank_r(d)) ]
dev-playbooks/specs/hybrid-retrieval/spec.md:29:score(d) = w_keyword Ã— RRF_keyword(d) + w_vector Ã— RRF_vector(d) + w_graph Ã— RRF_graph(d)
dev-playbooks/specs/hybrid-retrieval/spec.md:72:  rrf_k: 60
dev-playbooks/specs/hybrid-retrieval/spec.md:133:- ä½¿ç”¨ RRF èåˆç»“æœ
dev-playbooks/specs/hybrid-retrieval/spec.md:213:- `graph-rag.sh`ï¼šä½¿ç”¨æ··åˆæ£€ç´¢ç»“æœ
dev-playbooks/specs/hybrid-retrieval/spec.md:225:| RRF èåˆè®¡ç®— | å»¶è¿Ÿ | < 50ms |
dev-playbooks/specs/ci-cd-integration/spec.md:319:              issue_number: context.issue.number,
dev-playbooks/specs/ci-cd-integration/spec.md:320:              owner: context.repo.owner,
dev-playbooks/specs/ci-cd-integration/spec.md:321:              repo: context.repo.repo,
dev-playbooks/specs/ci-cd-integration/spec.md:322:              body: '## Architecture Check Failed\n\nPlease review the architecture violations in the workflow logs.\n\n[View Details](' + context.serverUrl + '/' + context.repo.owner + '/' + context.repo.repo + '/actions/runs/' + context.runId + ')'
dev-playbooks/specs/intent-analysis/spec.md:39:#### Scenario: Analyze intent with implicit context
dev-playbooks/specs/intent-analysis/spec.md:50:#### Scenario: Analyze intent with historical context
dev-playbooks/specs/intent-analysis/spec.md:59:#### Scenario: Analyze intent with code context
dev-playbooks/specs/architecture/module-graph.md:40:â”‚  â”‚ complexity  â”‚  â”‚ graph-rag   â”‚  â”‚  indexer    â”‚              â”‚
dev-playbooks/specs/architecture/module-graph.md:74:| MCP Server | `src/server.ts` | MCP åè®®å¤„ç†ï¼Œå·¥å…·è°ƒåº¦ | @modelcontextprotocol/sdk |
dev-playbooks/specs/architecture/module-graph.md:79:| Graph-RAG | `scripts/graph-rag.sh` | å›¾åŸºä¸Šä¸‹æ–‡æ£€ç´¢ | common.sh, CKB MCP |
dev-playbooks/specs/architecture/module-graph.md:94:| Global Context | `hooks/augment-context-global.sh` | å…¨å±€ä¸Šä¸‹æ–‡æ³¨å…¥ |
dev-playbooks/specs/architecture/module-graph.md:95:| Embedding Context | `hooks/augment-context-with-embedding.sh` | Embedding å¢å¼ºä¸Šä¸‹æ–‡ |
dev-playbooks/specs/architecture/module-graph.md:96:| Context | `hooks/augment-context.sh` | åŸºç¡€ä¸Šä¸‹æ–‡æ³¨å…¥ |
dev-playbooks/specs/architecture/module-graph.md:119:graph-rag.sh        â”‚   âœ“    â”‚   âœ“    â”‚   âœ“    â”‚   -    â”‚   -    â”‚   -    â”‚
dev-playbooks/specs/architecture/module-graph.md:153:| @modelcontextprotocol/sdk | npm | package.json |
dev-playbooks/specs/context-weighting/spec.md:98:- **Given**: `context_window` ä¸ºç©º
dev-playbooks/specs/structured-context-output/spec.md:8:# Spec: ç»“æ„åŒ–ä¸Šä¸‹æ–‡è¾“å‡ºï¼ˆstructured-context-outputï¼‰
dev-playbooks/specs/structured-context-output/spec.md:11:> **Capability**: structured-context-output
dev-playbooks/specs/structured-context-output/spec.md:34:| 3 | `task_context` | ä»»åŠ¡ä¸Šä¸‹æ–‡ï¼ˆæ„å›¾åˆ†æ/ç›¸å…³ä»£ç ç‰‡æ®µ/è°ƒç”¨é“¾ï¼‰ |
dev-playbooks/specs/structured-context-output/spec.md:87:### REQ-SCO-004ï¼štask_context ç»“æ„
dev-playbooks/specs/structured-context-output/spec.md:93:  "task_context": {
dev-playbooks/specs/structured-context-output/spec.md:188:**When**: æ‰§è¡Œ `augment-context-global.sh --format json`
dev-playbooks/specs/structured-context-output/spec.md:192:- è¾“å‡ºåŒ…å« `task_context` å­—æ®µ
dev-playbooks/specs/structured-context-output/spec.md:217:### SC-SCO-004ï¼štask_context æ„å›¾åˆ†æ
dev-playbooks/specs/structured-context-output/spec.md:221:**When**: åˆ†ææ„å›¾å¹¶æ„å»º task_context
dev-playbooks/specs/structured-context-output/spec.md:291:| CT-SCO-004 | behavior | REQ-SCO-004, SC-SCO-004 | task_context æ„å›¾åˆ†æ |
dev-playbooks/specs/structured-context-output/spec.md:304:  "required": ["project_profile", "current_state", "task_context", "recommended_tools", "constraints"],
dev-playbooks/specs/structured-context-output/spec.md:324:    "task_context": {
dev-playbooks/specs/architecture/hotspots.md:31:| 2 | `scripts/graph-rag.sh` | 912 | ğŸŸ¡ ä¸­é«˜ | æ ¸å¿ƒåŠŸèƒ½ï¼Œéœ€å……åˆ†æµ‹è¯• |
dev-playbooks/specs/architecture/hotspots.md:63:â”œâ”€â”€ è¢«ä¾èµ–ï¼šgraph-rag.sh, bug-locator.sh, hooks/*
dev-playbooks/specs/architecture/hotspots.md:77:| CKB MCP | call-chain.sh, graph-rag.sh | åŠŸèƒ½é™çº§ |
dev-playbooks/specs/architecture/hotspots.md:104:   - è¦†ç›–ï¼šembedding, graph-rag, call-chain
dev-playbooks/specs/architecture/hotspots.md:121:  â”‚               â— graph-rag.sh (912)
dev-playbooks/specs/long-term-memory/spec.md:50:  context TEXT,              -- ç¬¦å·å‡ºç°çš„ä¸Šä¸‹æ–‡
dev-playbooks/specs/long-term-memory/spec.md:106:  context_similarity * 0.3   # ä¸Šä¸‹æ–‡ç›¸ä¼¼åº¦
dev-playbooks/specs/long-term-memory/spec.md:408:migrations/002_add_context_column.sql
dev-playbooks/specs/keystroke-cancel/spec.md:110:**Given**: æ­£åœ¨æ‰§è¡Œ `graph-rag.sh` æŸ¥è¯¢
dev-playbooks/specs/keystroke-cancel/spec.md:176:daemon_start_with_cancel "graph-rag.sh" "query args"
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:169:  - è¯­æ³•ï¼š`graph TD`ã€`subgraph`ã€`-->`
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:191:**ç›®çš„ï¼ˆWhyï¼‰**ï¼šåœ¨ graph-rag æœç´¢ä¸­å®ç° Token é¢„ç®—æ§åˆ¶ï¼Œé€šè¿‡ä¼˜å…ˆçº§ç®—æ³•æ™ºèƒ½è£å‰ªå­å›¾ï¼Œç¡®ä¿è¾“å‡ºä¸è¶…è¿‡ LLM ä¸Šä¸‹æ–‡é™åˆ¶ã€‚
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:194:- `scripts/graph-rag.sh` ä¿®æ”¹ï¼šæ–°å¢ `--budget` å‚æ•°å’Œè£å‰ªé€»è¾‘
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:197:- ä¿®æ”¹ï¼š`scripts/graph-rag.sh`
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:575:| graph-rag.sh | intent-learner.sh | CALLS | åå¥½åŠ æƒ |
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:927:2. **æ„å›¾å†å²ä¸ graph-rag é›†æˆçš„è°ƒç”¨æ—¶æœº**
dev-playbooks/changes/archive/achieve-augment-full-parity/tasks.md:928:   - å‡è®¾ï¼šgraph-rag.sh å¯åŠ¨æ—¶è°ƒç”¨ intent-learner.sh get-preferences
dev-playbooks/specs/graph-rag-cli/spec.md:7:# è§„æ ¼ï¼šgraph-rag.sh æŸ¥è¯¢æ¥å£æ‰©å±•
dev-playbooks/specs/graph-rag-cli/spec.md:24:**æè¿°**ï¼š`graph-rag.sh` å¿…é¡»æ”¯æŒ `--fusion-depth` å¯é€‰å‚æ•°ï¼Œæ§åˆ¶å›¾+å‘é‡èåˆæŸ¥è¯¢çš„å›¾æ‰©å±•æ·±åº¦ã€‚
dev-playbooks/specs/graph-rag-cli/spec.md:46:**æè¿°**ï¼š`graph-rag.sh` å¿…é¡»æ”¯æŒ `--include-virtual` å¯é€‰å‚æ•°ï¼Œæ§åˆ¶æ˜¯å¦åŒ…å«è™šæ‹Ÿè¾¹ï¼ˆè·¨ä»“åº“è”é‚¦è¾¹ï¼‰ã€‚
dev-playbooks/specs/graph-rag-cli/spec.md:135:- æ‰§è¡Œ `graph-rag.sh --query "authentication handler" --format json`
dev-playbooks/specs/graph-rag-cli/spec.md:165:- æ‰§è¡Œ `graph-rag.sh --query "test" --fusion-depth 2 --format json`
dev-playbooks/specs/graph-rag-cli/spec.md:188:- æ‰§è¡Œ `CKB_UNAVAILABLE=1 graph-rag.sh --query "test" --fusion-depth 3 --format json`
dev-playbooks/specs/graph-rag-cli/spec.md:213:- æ‰§è¡Œ `graph-rag.sh --query "test" --fusion-depth 0 --format json`
dev-playbooks/specs/graph-rag-cli/spec.md:238:- æ‰§è¡Œ `graph-rag.sh --query "api call" --include-virtual --format json`
dev-playbooks/specs/graph-rag-cli/spec.md:265:- æ‰§è¡Œ `graph-rag.sh --query "test" --fusion-depth 10 --format json`
dev-playbooks/specs/graph-rag-cli/spec.md:287:ç”¨æ³•: graph-rag.sh --query <æŸ¥è¯¢> [é€‰é¡¹]
dev-playbooks/specs/graph-rag-cli/spec.md:320:  "$id": "graph-rag-output.schema.json",
dev-playbooks/specs/graph-rag-cli/spec.md:387:graph-rag.sh --query "test" --fusion-depth 2 --format json | \
dev-playbooks/specs/graph-rag-cli/spec.md:401:graph-rag.sh --query "test" --format json | \
dev-playbooks/specs/graph-rag-cli/spec.md:415:CKB_UNAVAILABLE=1 graph-rag.sh --query "test" --fusion-depth 3 --format json | \
dev-playbooks/specs/graph-rag-cli/spec.md:429:graph-rag.sh --query "test" --include-virtual --format json | \
dev-playbooks/specs/graph-rag-cli/spec.md:443:graph-rag.sh --query "test" --format json | \
dev-playbooks/specs/graph-rag-cli/spec.md:458:vector_count=$(graph-rag.sh --query "test" --fusion-depth 0 --format json | jq '.metadata.total_candidates')
dev-playbooks/specs/graph-rag-cli/spec.md:461:fusion_count=$(graph-rag.sh --query "test" --fusion-depth 1 --format json | jq '.metadata.total_candidates')
dev-playbooks/specs/graph-rag-cli/spec.md:464:ckb_available=$(graph-rag.sh --query "test" --format json | jq '.metadata.ckb_available')
dev-playbooks/specs/graph-rag-cli/spec.md:480:graph-rag.sh --query "test" --fusion-depth 0 --format json | \
dev-playbooks/specs/benchmark/spec.md:239:- `context-compressor.sh`ï¼šå‹ç¼©ç‡è¯„æµ‹
dev-playbooks/specs/context-compressor/spec.md:3:> **Capability**: context-compressor
dev-playbooks/specs/context-compressor/spec.md:31:context_compress --mode skeleton <files>
dev-playbooks/specs/context-compressor/spec.md:79:context_compress --budget 5000 <files>
dev-playbooks/specs/context-compressor/spec.md:143:**When**: è¿è¡Œ `context-compress --mode skeleton src/service.ts`
dev-playbooks/specs/context-compressor/spec.md:155:**When**: è¿è¡Œ `context-compress --budget 5000 src/`
dev-playbooks/specs/context-compressor/spec.md:198:**When**: è¿è¡Œ `context-compress --budget 3000 file1.ts file2.ts ...`
dev-playbooks/specs/context-compressor/spec.md:208:### context_compress
dev-playbooks/specs/context-compressor/spec.md:212:context_compress [OPTIONS] <files...>
dev-playbooks/specs/context-compressor/spec.md:228:  "compressed_context": "// file: src/service.ts\nexport function process...",
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:46:| Intent Analyzer | å¢å¼º | `hooks/augment-context-global.sh` | 4 ç»´ä¿¡å·èšåˆ |
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:47:| Subgraph Retrieval | å¢å¼º | `scripts/graph-rag.sh` | å­å›¾æ£€ç´¢æ›¿ä»£çº¿æ€§åˆ—è¡¨ |
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:77:1. `scripts/graph-rag.sh` - å­å›¾æ£€ç´¢é€»è¾‘
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:80:4. `hooks/augment-context-global.sh` - 4 ç»´æ„å›¾åˆ†æ
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:133:  â”œâ”€â”€ scripts/graph-rag.sh      (ci_graph_rag)
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:140:scripts/graph-rag.sh
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:144:hooks/augment-context-global.sh
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:146:  â””â”€â”€ tools/graph-rag-context.sh  (Graph-RAG)
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:154:  graph-rag.sh â”€â”€â”€â”€â†’ boundary-detector.sh (æ–°å¢ï¼Œè¾¹ç•Œè¿‡æ»¤)
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:155:  augment-context-global.sh â”€â”€â†’ pattern-learner.sh (æ–°å¢ï¼Œæ¨¡å¼åŒ¹é…)
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:162:  âœ… graph-rag.sh â†’ boundary-detector.shï¼šåŠŸèƒ½è„šæœ¬ â†’ å·¥å…·è„šæœ¬ï¼Œåˆè§„
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:163:  âœ… augment-context-global.sh â†’ pattern-learner.shï¼šé’©å­ â†’ å·¥å…·è„šæœ¬ï¼Œåˆè§„
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:181:#### 3.4.2 graph-rag.sh ä¿®æ”¹ç‚¹
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:201:#### 3.4.4 augment-context-global.sh ä¿®æ”¹ç‚¹
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:231:| `hooks/augment-context-with-embedding.sh` | è°ƒç”¨ embedding ç›¸å…³å‡½æ•° | æ— å½±å“ |
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:262:| `scripts/graph-rag.sh` | ğŸŸ¡ ä¸­ | è¾“å‡ºæ ¼å¼å˜æ›´ | ä¸­ |
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:264:| `hooks/augment-context-global.sh` | ğŸŸ¡ ä¸­ | åŠŸèƒ½å¢å¼º | ä¸­ |
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:278:- `augment-context-global.sh` å¢åŠ æ„å›¾åˆ†æ
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:285:- `graph-rag.sh` æ”¹ä¸ºå­å›¾æ£€ç´¢
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:293:| OQ2 | å­å›¾æ£€ç´¢çš„è¾¹å…³ç³»è¾“å‡ºæ ¼å¼å¦‚ä½•å®šä¹‰ï¼Ÿ | graph-rag.sh | Design Owner |
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:324:  subgraph_retrieval: true    # å­å›¾æ£€ç´¢
dev-playbooks/changes/archive/enhance-code-intelligence/proposal.md:341:| V3 | å­å›¾æ£€ç´¢ä¿ç•™è¾¹å…³ç³» | æ£€æŸ¥è¾“å‡ºåŒ…å« `--calls-->` ç­‰å…³ç³» | `evidence/subgraph-output.log` |
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:46:| Context Layer | æ–°å¢ | `scripts/context-layer.sh` | Commit è¯­ä¹‰åˆ†ç±» + Bug ä¿®å¤å†å² |
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:65:3. `scripts/context-layer.sh` - ä¸Šä¸‹æ–‡å±‚å¢å¼º
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:76:1. `.devbooks/context-index.json` - ä¸Šä¸‹æ–‡ç´¢å¼•ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:107:| ä¸Šä¸‹æ–‡ç´¢å¼• | æ–°å¢ `.devbooks/context-index.json` | è¿è¡Œæ—¶ç”Ÿæˆ |
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:114:  hotspot-analyzer.sh â”€â”€â†’ context-layer.sh (Bug ä¿®å¤å†å²)
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:116:  graph-rag.sh â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ cache-manager.sh (ç¼“å­˜åŠ é€Ÿ)
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:122:  âœ… hotspot-analyzer.sh â†’ context-layer.shï¼šåŠŸèƒ½è„šæœ¬ â†’ å·¥å…·è„šæœ¬ï¼Œåˆè§„
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:173:- æ–°å¢ `context-layer.sh`
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:208:| æ•°æ®å±‚ | åˆ é™¤ `.devbooks/context-index.json`ã€`.devbooks/federation-index.json`ã€`.ci-cache/l2/` |
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:217:  context_layer: true         # ä¸Šä¸‹æ–‡å±‚å¢å¼º
dev-playbooks/changes/archive/augment-upgrade-phase2/proposal.md:310:| U2 | Commit è¯­ä¹‰åˆ†ç±»è§„åˆ™æ˜¯å¦éœ€è¦å›½é™…åŒ– | ç”¨æˆ·æäº¤ä¿¡æ¯è¯­è¨€ | context-layer.sh |
dev-playbooks/changes/archive/augment-parity/proposal.md:87:| ä¿®æ”¹æ–‡ä»¶ | `scripts/graph-rag.sh` |
dev-playbooks/changes/archive/augment-parity/proposal.md:106:2. Consider: semantic match, symbol references, call relationships, context fit
dev-playbooks/changes/archive/augment-parity/proposal.md:153:| `scripts/graph-rag.sh` | ä¿®æ”¹ | åŠŸèƒ½å¢å¼º |
dev-playbooks/changes/archive/augment-parity/proposal.md:235:graph-rag.sh â†’ graph-store.shï¼ˆå›¾æŸ¥è¯¢ï¼‰
dev-playbooks/changes/archive/augment-parity/proposal.md:236:graph-rag.sh â†’ daemon.shï¼ˆå®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼‰
dev-playbooks/changes/archive/augment-parity/proposal.md:248:| `tests/graph-rag.bats` | éœ€æ›´æ–°ï¼ˆé‡æ’åºæµ‹è¯•ï¼‰ | P1 |
dev-playbooks/changes/archive/augment-parity/proposal.md:267:| ç›´æ¥è°ƒç”¨å¤–éƒ¨ API | âš ï¸ é£é™© | `graph-rag.sh` ç›´æ¥è°ƒç”¨ Claude/Ollama API |
dev-playbooks/changes/archive/augment-parity/proposal.md:282:  - graph-rag.sh â†’ graph-store.shï¼ˆå›¾æŸ¥è¯¢ï¼‰
dev-playbooks/changes/archive/augment-parity/proposal.md:287:  - graph-rag.sh â†’ cache-manager.sh
dev-playbooks/changes/archive/augment-parity/proposal.md:947:CKB_ENABLED=false ./scripts/graph-rag.sh --query "test" --format json | \
dev-playbooks/changes/archive/augment-parity/proposal.md:1271:â”œâ”€â”€ graph-rag.sh ä¿®æ”¹ï¼ˆLLM é‡æ’åºï¼‰
dev-playbooks/specs/context-layer/spec.md:4:> **Capability**: context-layer
dev-playbooks/specs/context-layer/spec.md:75:ç³»ç»Ÿåº”ç”Ÿæˆä¸Šä¸‹æ–‡ç´¢å¼• `.devbooks/context-index.json`ï¼š
dev-playbooks/specs/context-layer/spec.md:135:**When**: æ‰§è¡Œ `context-layer.sh --file src/auth.ts`
dev-playbooks/specs/context-layer/spec.md:170:**When**: æ‰§è¡Œ `context-layer.sh --index`
dev-playbooks/specs/context-layer/spec.md:172:- ç”Ÿæˆ `.devbooks/context-index.json`
dev-playbooks/specs/context-layer/spec.md:206:### context-layer.sh
dev-playbooks/specs/context-layer/spec.md:210:context-layer.sh --classify <sha>
dev-playbooks/specs/context-layer/spec.md:213:context-layer.sh --classify-batch --since "90 days ago"
dev-playbooks/specs/context-layer/spec.md:216:context-layer.sh --bug-history --file <path>
dev-playbooks/specs/context-layer/spec.md:219:context-layer.sh --index [--days 90]
dev-playbooks/specs/context-layer/spec.md:251:| `CONTEXT_INDEX_PATH` | `.devbooks/context-index.json` | ç´¢å¼•è·¯å¾„ |
dev-playbooks/specs/subgraph-lru-cache/spec.md:8:# Spec Delta: å­å›¾ LRU ç¼“å­˜ï¼ˆsubgraph-lru-cacheï¼‰
dev-playbooks/specs/subgraph-lru-cache/spec.md:11:> **Capability**: subgraph-lru-cache
dev-playbooks/specs/subgraph-lru-cache/spec.md:33:- æ•°æ®åº“æ–‡ä»¶ï¼š`.devbooks/subgraph-cache.db`
dev-playbooks/specs/subgraph-lru-cache/spec.md:42:CREATE TABLE IF NOT EXISTS subgraph_cache (
dev-playbooks/specs/subgraph-lru-cache/spec.md:48:CREATE INDEX IF NOT EXISTS idx_access_time ON subgraph_cache(access_time);
dev-playbooks/specs/subgraph-lru-cache/spec.md:84:UPDATE subgraph_cache SET access_time = $now WHERE cache_key = '$key';
dev-playbooks/specs/subgraph-lru-cache/spec.md:85:SELECT cache_value FROM subgraph_cache WHERE cache_key = '$key';
dev-playbooks/specs/subgraph-lru-cache/spec.md:99:DELETE FROM subgraph_cache
dev-playbooks/specs/subgraph-lru-cache/spec.md:101:    SELECT cache_key FROM subgraph_cache
dev-playbooks/specs/subgraph-lru-cache/spec.md:103:    LIMIT MAX(0, (SELECT COUNT(*) FROM subgraph_cache) - $MAX_SIZE + 1)
dev-playbooks/specs/subgraph-lru-cache/spec.md:106:INSERT OR REPLACE INTO subgraph_cache (cache_key, cache_value, access_time, created_time)
dev-playbooks/specs/subgraph-lru-cache/spec.md:108:    (SELECT created_time FROM subgraph_cache WHERE cache_key = '$key'), $now
dev-playbooks/specs/subgraph-lru-cache/spec.md:167:- æ¡ç›®å†™å…¥ `subgraph_cache` è¡¨
dev-playbooks/specs/subgraph-lru-cache/spec.md:229:- åˆ›å»º `.devbooks/subgraph-cache.db`
dev-playbooks/specs/subgraph-lru-cache/spec.md:230:- åˆ›å»º `subgraph_cache` è¡¨
dev-playbooks/specs/subgraph-lru-cache/spec.md:314:| `SUBGRAPH_CACHE_DB` | `.devbooks/subgraph-cache.db` | ç¼“å­˜æ•°æ®åº“è·¯å¾„ |
dev-playbooks/changes/archive/optimize-indexing-pipeline-20260117/proposal.md:99:- `scripts/embedding.sh` çš„å­˜å‚¨å½¢æ€è¿ç§»ï¼ˆä¾‹å¦‚ SQLite/`sqlite-vec`ï¼‰ã€æ··åˆæ£€ç´¢ RRF
dev-playbooks/changes/archive/optimize-indexing-pipeline-20260117/proposal.md:114:- `scripts/graph-rag.sh`ï¼ˆè¯» `graph.db`ï¼Œéœ€å…³æ³¨å¹¶å‘/é”ç­‰å¾…ï¼‰
dev-playbooks/changes/archive/optimize-indexing-pipeline-20260117/proposal.md:155:  - `graph-rag.sh`/`impact-analyzer.sh` ç­‰è¯»è·¯å¾„ä¸ indexer å†™è·¯å¾„å¹¶å‘æ—¶ï¼Œéœ€ç¡®è®¤ WAL ä¸é”ç­‰å¾…ç­–ç•¥æ˜¯å¦å¯æ¥å—ï¼ˆç›®æ ‡æ˜¯â€œé€€åŒ–ä½†ä¸å¤±è´¥â€ï¼‰
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:55:- graph-rag æœç´¢è¿”å› 20 ä¸ªå€™é€‰ç‰‡æ®µ
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:59:- è°ƒç”¨ `graph-rag.sh search "handleToolCall" --budget 4000`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:67:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_budget_pruning`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:83:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_priority_calculation`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:101:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_budget_boundary`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:109:- è°ƒç”¨ `graph-rag.sh search "query"`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:115:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_default_budget`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:123:- è°ƒç”¨ `graph-rag.sh search "query" --budget 0`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:129:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_zero_budget`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:144:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_single_fragment_exceeds_budget`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:153:- è°ƒç”¨ `graph-rag.sh search "query" --budget 5000`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:159:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_intent_preference_integration`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:173:**éªŒè¯**ï¼š`tests/graph-rag.bats::test_token_estimation`
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:188:| SC-SP-001 | `tests/graph-rag.bats::test_budget_pruning` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:189:| SC-SP-002 | `tests/graph-rag.bats::test_priority_calculation` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:190:| SC-SP-003 | `tests/graph-rag.bats::test_budget_boundary` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:191:| SC-SP-004 | `tests/graph-rag.bats::test_default_budget` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:192:| SC-SP-005 | `tests/graph-rag.bats::test_zero_budget` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:193:| SC-SP-006 | `tests/graph-rag.bats::test_single_fragment_exceeds_budget` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:194:| SC-SP-007 | `tests/graph-rag.bats::test_intent_preference_integration` |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/smart-pruning/spec.md:195:| SC-SP-008 | `tests/graph-rag.bats::test_token_estimation` |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:133:    â”œâ”€â”€â†’ scripts/graph-rag.sh â”€â”€â†’ boundary-detector.sh
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:135:    â””â”€â”€â†’ hooks/augment-context-global.sh â”€â”€â†’ pattern-learner.sh
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:158:| ä¿®æ”¹ | `scripts/graph-rag.sh` | å­å›¾æ£€ç´¢ + è¾¹ç•Œè¿‡æ»¤ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:160:| ä¿®æ”¹ | `hooks/augment-context-global.sh` | 4 ç»´æ„å›¾åˆ†æ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:172:| ä¿®æ”¹ | `embedding_search()` | graph-rag.sh | å¢åŠ å­å›¾è¿é€šæ€§åˆ†æ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:174:| æ–°å¢ | `analyze_intent_4d()` | augment-context-global.sh | 4 ç»´æ„å›¾åˆ†æ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:181:| graph-rag.sh â†’ boundary-detector.sh | åŠŸèƒ½è„šæœ¬ â†’ å·¥å…·è„šæœ¬ | âœ… |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:182:| augment-context-global.sh â†’ pattern-learner.sh | é’©å­ â†’ å·¥å…·è„šæœ¬ | âœ… |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:257:| `graph-rag.sh:search()` | 2 | é›†æˆè¾¹ç•Œ/å­å›¾ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:258:| `augment-context-global.sh:generate_context()` | 4 | é›†æˆ 4 ç»´æ„å›¾ä¿¡å· |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:278:| PatternMatch | @ValueObject | pattern_id, confidence, context | æ¨¡å¼åŒ¹é…ç»“æœ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:303:| EC-005 | ç¬¦å·ä¸å­˜åœ¨ | æŸ¥è¯¢æœªç´¢å¼•ç¬¦å· | è¿”å›ç©ºå­å›¾ `{nodes: [], edges: []}` | graph-rag.sh |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:304:| EC-006 | å­¤ç«‹ç¬¦å· | ç¬¦å·å­˜åœ¨ä½†æ— è°ƒç”¨/å¼•ç”¨è¾¹ | è¿”å›å•èŠ‚ç‚¹å­å›¾ `{nodes: [symbol], edges: []}` | graph-rag.sh |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:350:  subgraph_retrieval: true
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:461:- `augment-context-global.sh` å¢åŠ  4 ç»´æ„å›¾åˆ†æ
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:471:- `graph-rag.sh` æ”¹ä¸ºå­å›¾æ£€ç´¢
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:540:| å­å›¾æ£€ç´¢è¾“å‡º | `evidence/subgraph-output.log` | AC-003 |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:553:| OQ-2 | 4 ç»´æ„å›¾ä¿¡å·çš„æƒé‡åˆ†é…æ¯”ä¾‹ï¼Ÿ | augment-context-global.sh | Test Ownerï¼ˆå®éªŒç¡®å®šï¼‰ | å¾…å®š |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:620:| `graph-rag.sh` | `--depth` | number | 3 | å­å›¾æ·±åº¦ï¼ˆ1-5ï¼‰ |
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:664:  subgraph_retrieval: true
dev-playbooks/changes/archive/enhance-code-intelligence/design.md:723:| AC-003 | subgraph-retrieval | - |
dev-playbooks/specs/subgraph-retrieval/spec.md:1:# Spec: subgraph-retrieval
dev-playbooks/specs/subgraph-retrieval/spec.md:25:#### Scenario: Retrieve subgraph with call edges
dev-playbooks/specs/subgraph-retrieval/spec.md:36:#### Scenario: Retrieve subgraph with reference edges
dev-playbooks/changes/archive/augment-parity/design.md:125:  â”‚       â””â”€ æœ€å°æ–¹æ¡ˆ: graph-rag.sh é›†æˆ llm_rerank()
dev-playbooks/changes/archive/augment-parity/design.md:144:| Graph-RAG | `scripts/graph-rag.sh` | å¯ç”¨ï¼Œå¾…é›†æˆ LLM é‡æ’åº |
dev-playbooks/changes/archive/augment-parity/design.md:194:â”‚  â”‚  graph-rag (LLM rerank) | dependency-guard        â”‚         â”‚
dev-playbooks/changes/archive/augment-parity/design.md:217:             graph-rag.sh â”€â”€â†’ llm_call() â”€â”€â†’ LLM APIs
dev-playbooks/changes/archive/augment-parity/design.md:240:| ä¿®æ”¹ | scripts/graph-rag.sh | é›†æˆ LLM é‡æ’åº |
dev-playbooks/changes/archive/augment-parity/design.md:427:2. Consider: semantic match, symbol references, call relationships, context fit
dev-playbooks/changes/archive/augment-parity/design.md:648:- [ ] graph-rag.sh é›†æˆ LLM é‡æ’åº
dev-playbooks/changes/archive/augment-parity/design.md:857:- [ä¿®æ”¹] `scripts/graph-rag.sh`: é›†æˆ LLM é‡æ’åº
dev-playbooks/changes/archive/augment-parity/design.md:866:| `graph-rag.sh` | `graph-store.sh` | æ–°å¢ | å›¾æŸ¥è¯¢ä¾èµ– |
dev-playbooks/changes/archive/augment-parity/design.md:867:| `graph-rag.sh` | `daemon.sh` | æ–°å¢ | å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ |
dev-playbooks/changes/archive/augment-parity/design.md:868:| `graph-rag.sh` | `common.sh:llm_call()` | æ–°å¢ | LLM é‡æ’åº |
dev-playbooks/specs/devbooks-adapter/spec.md:151:| å½“å‰å˜æ›´ | `task_context` æˆ–å•ç‹¬å­—æ®µ |
dev-playbooks/specs/devbooks-adapter/spec.md:312:load_devbooks_context() {
dev-playbooks/specs/devbooks-adapter/spec.md:318:æ–°å¢åˆ° `augment-context-global.sh`ï¼š
dev-playbooks/specs/devbooks-adapter/spec.md:322:build_enhanced_context() {
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:54:| AC-003 | å­å›¾æ£€ç´¢ä¿ç•™è¾¹å…³ç³» | tests/subgraph-retrieval.bats | SR-* | 21 | RED |
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:100:| IA-002 | éšå¼ä¿¡å·æå– | file: src/auth.ts, line: 42 | åŒ…å« implicit æ ‡ç­¾ | Scenario: Analyze intent with implicit context |
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:101:| IA-003 | å†å²ä¿¡å·æå– | æœ€è¿‘ 5 æ¬¡ç¼–è¾‘ | åŒ…å« historical æ ‡ç­¾ | Scenario: Analyze intent with historical context |
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:102:| IA-004 | ä»£ç ä¿¡å·æå– | function: validateToken | åŒ…å« code æ ‡ç­¾ | Scenario: Analyze intent with code context |
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:106:**æµ‹è¯•æ–‡ä»¶**: `tests/subgraph-retrieval.bats`
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:110:| SR-001 | å­å›¾åŒ…å«è°ƒç”¨è¾¹ | symbol: handleToolCall | åŒ…å« --calls--> | Scenario: Retrieve subgraph with call edges |
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:111:| SR-002 | å­å›¾åŒ…å«å¼•ç”¨è¾¹ | symbol: TOOLS | åŒ…å« --refs--> | Scenario: Retrieve subgraph with reference edges |
dev-playbooks/changes/archive/enhance-code-intelligence/verification.md:199:| subgraph-retrieval.bats | å­å›¾é€»è¾‘æœªå®ç° | AC-003 |
dev-playbooks/changes/archive/augment-final-10-percent/proposal.md:123:- `scripts/context-compressor.sh`
dev-playbooks/changes/archive/augment-final-10-percent/proposal.md:216:â”œâ”€â”€ context-compressor.sh     # ä¸Šä¸‹æ–‡å‹ç¼©
dev-playbooks/changes/archive/augment-final-10-percent/proposal.md:443:| M5 | `context_compressor.enabled` | false | Alpha | ä¸Šä¸‹æ–‡å‹ç¼© |
dev-playbooks/changes/archive/augment-final-10-percent/proposal.md:487:| å¯¹è¯ä¸Šä¸‹æ–‡ | `conversation-context.json` | SQLite `conversation.db` | ~1K æ¡ç›® |
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:125:  â”‚       â””â”€ æœ€å°æ–¹æ¡ˆ: context-layer.sh + hotspot-analyzer.sh é›†æˆ
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:191:â”‚  â”‚  hotspot-analyzer | bug-locator | graph-rag | ... â”‚         â”‚
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:211:             context-layer.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:221:| Commit åˆ†ç±»è§„åˆ™ | context-layer.sh | å†…ç½® + è‡ªå®šä¹‰æ­£åˆ™ |
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:232:| æ–°å¢ | context-layer.sh | ä¸Šä¸‹æ–‡å±‚å®¹å™¨ |
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:252:| context-layer.sh | `GIT_LOG_CMD` ç¯å¢ƒå˜é‡ | æµ‹è¯•æ—¶ Mock git log |
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:715:- [ ] é›†æˆç¼“å­˜åˆ° bug-locator.shã€graph-rag.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:726:- [ ] æ–°å¢ context-layer.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/design.md:956:| ä¸Šä¸‹æ–‡ç´¢å¼• | `.devbooks/context-index.json` | 1.0.0 |
dev-playbooks/changes/archive/augment-parity/archive-summary.md:36:| `scripts/graph-rag.sh` | LLM é‡æ’åº | âœ… å·²å®ç° |
dev-playbooks/specs/priority-sorting/spec.md:10:> **æ¨¡å—**: graph-rag.sh
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:155:#### MP2.2 å››ç»´æ„å›¾åˆ†æ (augment-context-global.sh)
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:160:- ä¿®æ”¹ `hooks/augment-context-global.sh`ï¼šæ–°å¢ `analyze_intent_4d()` å‡½æ•°
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:163:- ä¿®æ”¹ï¼š`hooks/augment-context-global.sh`
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:208:#### MP3.2 å­å›¾æ£€ç´¢ (graph-rag.sh)
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:213:- ä¿®æ”¹ `scripts/graph-rag.sh`ï¼šæ–°å¢å­å›¾è¿é€šæ€§åˆ†æã€è¾¹ç•Œè¿‡æ»¤
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:216:- ä¿®æ”¹ï¼š`scripts/graph-rag.sh`
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:338:| graph-rag.sh | å­å›¾æ£€ç´¢ + è¾¹ç•Œè¿‡æ»¤ |
dev-playbooks/changes/archive/enhance-code-intelligence/tasks.md:340:| augment-context-global.sh | 4 ç»´æ„å›¾åˆ†æ |
dev-playbooks/changes/archive/augment-upgrade-phase2/archive-summary.md:17:| Context Layer | `scripts/context-layer.sh` | âœ… å·²å®Œæˆ | Commit è¯­ä¹‰åˆ†ç±» + Bug ä¿®å¤å†å² |
dev-playbooks/changes/archive/augment-upgrade-phase2/archive-summary.md:31:| `scripts/context-layer.sh` | ä¸Šä¸‹æ–‡å±‚å¢å¼ºè„šæœ¬ |
dev-playbooks/changes/archive/augment-upgrade-phase2/archive-summary.md:43:| `scripts/graph-rag.sh` | é›†æˆå¤šçº§ç¼“å­˜ |
dev-playbooks/changes/archive/augment-upgrade-phase2/archive-summary.md:53:| `tests/context-layer.bats` | 16 |
dev-playbooks/changes/archive/augment-upgrade-phase2/archive-summary.md:98:| Context Layer | `specs/context-layer/spec.md` | âœ… Approved |
dev-playbooks/changes/archive/enhance-code-intelligence/evidence/red-baseline/summary.md:14:| subgraph-retrieval.bats | 14 | 3 | 0 | 11 |
dev-playbooks/changes/archive/augment-upgrade-phase2/verification.md:46:| AC-009 | Commit è¯­ä¹‰åˆ†ç±» | CT-CTX-001, CT-CTX-002, CT-CTX-003, CT-CTX-008 | context-layer.bats |
dev-playbooks/changes/archive/augment-upgrade-phase2/verification.md:47:| AC-010 | Bug ä¿®å¤å†å²æƒé‡ | CT-CTX-004, CT-CTX-005 | context-layer.bats |
dev-playbooks/changes/archive/augment-upgrade-phase2/verification.md:51:| AC-014 | hotspot-analyzer.sh åŸºçº¿ | CT-CTX-006 | context-layer.bats |
dev-playbooks/changes/archive/augment-upgrade-phase2/verification.md:110:| CT-CTX-007 | ç´¢å¼•ç”Ÿæˆ | SC-CTX-007 | ç”Ÿæˆ context-index.json |
dev-playbooks/changes/archive/augment-upgrade-phase2/verification.md:162:| `tests/context-layer.bats` | 16 | Context Layer |
dev-playbooks/changes/archive/augment-upgrade-phase2/verification.md:251:- context-layer.bats: 1 å¤±è´¥ï¼ˆ--with-bug-history æœªå®Œå…¨å®ç°ï¼‰
dev-playbooks/changes/archive/augment-final-10-percent/design.md:228:â”‚                   context-compressor.sh                          â”‚
dev-playbooks/changes/archive/augment-final-10-percent/design.md:258:â”‚    "compressed_context": "...",                                  â”‚
dev-playbooks/changes/archive/augment-final-10-percent/design.md:335:â”‚ Query   â”‚â”€â”€â”€â”€â–¶â”‚ graph-rag   â”‚â”€â”€â”€â”€â–¶â”‚ llm-providerâ”‚â”€â”€â”€â”€â–¶â”‚ Ranked  â”‚
dev-playbooks/changes/archive/augment-final-10-percent/design.md:410:**When**: è¿è¡Œ `context-compressor.sh --budget 5000`
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:39:ok 38 SC-LR-001: graph-rag skips rerank when disabled # skip graph-rag.sh rerank disabled not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:40:ok 39 SC-LR-002: graph-rag reranks when enabled with mock # skip graph-rag.sh rerank enabled not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:41:ok 40 SC-LR-003: graph-rag falls back on timeout # skip graph-rag.sh timeout not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:42:ok 41 SC-LR-004: graph-rag falls back when API key missing # skip graph-rag.sh api key not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:43:ok 42 SC-LR-005: graph-rag uses OpenAI provider # skip graph-rag.sh openai not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:44:ok 43 SC-LR-006: graph-rag uses Ollama provider # skip Ollama test requires local Ollama service
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:45:ok 44 SC-LR-007: graph-rag falls back on invalid JSON response # skip graph-rag.sh invalid json not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:46:ok 45 SC-LR-008: graph-rag truncates long candidates # skip Truncation test requires specific candidate setup
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:47:ok 46 SC-LR-009: graph-rag retries on transient failure # skip Retry test requires mock server with failure simulation
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:48:ok 47 SC-LR-010: graph-rag falls back after max retries # skip Max retry test requires mock server
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:49:ok 48 SC-LR-011: graph-rag skips rerank for empty candidates # skip graph-rag.sh empty not yet implemented
dev-playbooks/changes/archive/augment-parity/evidence/red-baseline/core-tests.txt:50:ok 49 CT-LR-003: rerank result contains required fields # skip graph-rag.sh format not yet implemented
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:407:- `scripts/context-layer.sh`ï¼šä¸Šä¸‹æ–‡å±‚è„šæœ¬
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:413:| `scripts/context-layer.sh` | æ–°å¢ |
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:475:generate_context_index(days) -> void
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:476:# è¾“å‡º: .devbooks/context-index.json
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:733:- `scripts/graph-rag.sh` ä¿®æ”¹ï¼šé›†æˆç¼“å­˜
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:756:#### MP5.2: é›†æˆç¼“å­˜åˆ° graph-rag.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:758:**äº¤ä»˜ç‰©**ï¼š`scripts/graph-rag.sh` ä¿®æ”¹
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:904:| Context Layer | `scripts/context-layer.sh` | ä¸Šä¸‹æ–‡å¢å¼º |
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:918:             context-layer.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:928:| Git å‘½ä»¤ Mock | context-layer.sh | `GIT_LOG_CMD` |
dev-playbooks/changes/archive/augment-upgrade-phase2/tasks.md:1003:- context-layer.sh åŠŸèƒ½å®Œæ•´
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:298:| ä¿®æ”¹æ–‡ä»¶ | `scripts/intent-learner.sh`ã€`hooks/augment-context-global.sh` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:300:| å­˜å‚¨ä½ç½® | `.devbooks/conversation-context.json` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:307:  "context_window": [
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:335:    ./scripts/graph-rag.sh search "main" --budget 1000 >/dev/null
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:424:| å­˜å‚¨åç«¯ | SQLite è¡¨ï¼ˆ`.devbooks/subgraph-cache.db`ï¼‰ |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:430:CACHE_DB=".devbooks/subgraph-cache.db"
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:436:CREATE TABLE IF NOT EXISTS subgraph_cache (
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:442:CREATE INDEX IF NOT EXISTS idx_access_time ON subgraph_cache(access_time);
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:447:cache_subgraph() {
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:456:DELETE FROM subgraph_cache
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:458:    SELECT cache_key FROM subgraph_cache
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:460:    LIMIT MAX(0, (SELECT COUNT(*) FROM subgraph_cache) - $CACHE_MAX_SIZE + 1)
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:463:INSERT OR REPLACE INTO subgraph_cache (cache_key, cache_value, access_time, created_time)
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:464:VALUES ('$key', '$value', $now, COALESCE((SELECT created_time FROM subgraph_cache WHERE cache_key = '$key'), $now));
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:470:get_cached_subgraph() {
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:477:UPDATE subgraph_cache SET access_time = $now WHERE cache_key = '$key';
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:478:SELECT cache_value FROM subgraph_cache WHERE cache_key = '$key';
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:493:    'total_entries', (SELECT COUNT(*) FROM subgraph_cache),
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:494:    'oldest_access', (SELECT MIN(access_time) FROM subgraph_cache),
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:495:    'newest_access', (SELECT MAX(access_time) FROM subgraph_cache)
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:604:              issue_number: context.issue.number,
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:605:              owner: context.repo.owner,
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:606:              repo: context.repo.repo,
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:643:| ä¿®æ”¹æ–‡ä»¶ | `hooks/augment-context-global.sh` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:676:# æ–°å¢å‡½æ•°ï¼šbuild_structured_context()
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:677:build_structured_context() {
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:687:    local task_ctx=$(build_task_context "$intent_analysis")
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:705:            task_context: $task,
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:716:| ä¿®æ”¹æ–‡ä»¶ | `hooks/augment-context-global.sh`ã€`scripts/common.sh` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:760:load_devbooks_context() {
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:762:    local context=""
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:767:        context+=$(extract_section "$profile" "## ç¬¬ä¸€å±‚" "## ç¬¬äºŒå±‚")
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:773:        context+=$(extract_section "$c4" "### Layering Constraints" "### Environment")
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:779:        context+="å½“å‰å˜æ›´åŒ…ï¼š$active_change"
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:782:    echo "$context"
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:806:| `hooks/augment-context-global.sh` | ä¿®æ”¹ | å¯¹è¯ä¿¡å·æ³¨å…¥ + ç»“æ„åŒ–è¾“å‡º + DevBooks é€‚é… |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:816:| `tests/augment-context.bats` | æ–°å¢ | ç»“æ„åŒ–è¾“å‡º + DevBooks é€‚é…æµ‹è¯• |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:857:| `.devbooks/conversation-context.json` | æ–°å¢å¯¹è¯ä¸Šä¸‹æ–‡æ–‡ä»¶ï¼ˆé¢„ä¼° < 100KBï¼‰ |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:869:intent-learner.sh â†’ augment-context-global.shï¼ˆå¯¹è¯ä¸Šä¸‹æ–‡æ³¨å…¥ï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:870:augment-context-global.sh â†’ common.shï¼ˆDevBooks æ£€æµ‹å‡½æ•°ï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:880:| `scripts/cache-manager.sh` | bug-locator, graph-rag, daemon | ç¼“å­˜ä¾èµ–è„šæœ¬ | ä¸­ |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:882:| `scripts/intent-learner.sh` | server.ts (ci_intent), graph-rag | åå¥½åŠ æƒ | ä½ |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:883:| `hooks/augment-context-global.sh` | Claude Code Hook | ä¸Šä¸‹æ–‡æ³¨å…¥ | ä¸­ |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:891:- hotspot-analyzer, pattern-learner, call-chain, context-layer
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:892:- graph-rag, federation-lite, bug-locator, ast-diff, entropy-viz
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:932:3. **æ•°æ®å›æ»š**ï¼šåˆ é™¤ `.devbooks/conversation-context.json`ã€`.devbooks/adr-index.json`
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:947:| AC-G04 | å¯¹è¯ä¸Šä¸‹æ–‡ | **å­˜å‚¨ 5 è½®åå¯æ­£ç¡®è¯»å–å…¨éƒ¨ä¸Šä¸‹æ–‡**ï¼šå†™å…¥ 5 æ¡å¯¹è¯è®°å½•ï¼Œè¯»å–æ—¶è¿”å›å®Œæ•´ 5 æ¡ | `tests/intent-learner.bats::test_conversation_context` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:954:| AC-G11 | ç»“æ„åŒ–è¾“å‡º | **è¾“å‡º JSON åŒ…å« 5 ä¸ªå¿…éœ€å­—æ®µ**ï¼š`project_profile`ã€`current_state`ã€`task_context`ã€`recommended_tools`ã€`constraints` | `tests/augment-context.bats::test_structured_output` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:955:| AC-G12 | DevBooks é€‚é… | **æ­£å‘æµ‹è¯•**ï¼šæœ‰ `.devbooks/config.yaml` æ—¶æ³¨å…¥ç”»åƒï¼›**è´Ÿå‘æµ‹è¯•**ï¼šæ— é…ç½®æ—¶ä¸æŠ¥é”™ | `tests/augment-context.bats::test_devbooks_detection` |
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:991:  "required": ["project_profile", "current_state", "task_context", "recommended_tools", "constraints"],
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1010:    "task_context": {
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1068:rm -f .devbooks/subgraph-cache.db
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1069:cold_start=$(time (./scripts/graph-rag.sh search "main" --budget 1000 >/dev/null) 2>&1 | grep real | awk '{print $2}')
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1074:warm_start=$(time (./scripts/graph-rag.sh search "main" --budget 1000 >/dev/null) 2>&1 | grep real | awk '{print $2}')
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1263:  - ä¿®æ”¹æ¨¡å— 7 æŠ€æœ¯å®ç°ï¼Œä½¿ç”¨ `.devbooks/subgraph-cache.db`
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1335:â”œâ”€â”€ hooks/augment-context-global.sh
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1353:â”œâ”€â”€ hooks/augment-context-global.shï¼ˆç»“æ„åŒ–è¾“å‡º + DevBooks æ£€æµ‹ï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/proposal.md:1355:â””â”€â”€ tests/augment-context.bats
dev-playbooks/changes/archive/20260118-0057-upgrade-code-intelligence-capabilities/proposal.md:41:- `scripts/graph-rag.sh` - CKB é›†æˆ + Fusion
dev-playbooks/changes/archive/augment-final-10-percent/verification.md:25:| AC-006 | ä¸Šä¸‹æ–‡å‹ç¼©ç‡ >=50%ï¼Œè¯­ä¹‰ä¿ç•™åº¦ >=90% | tests/context-compressor.bats | SC-CC-001, SC-CC-002, SC-CC-003, SC-CC-004 | P1 | [ ] |
dev-playbooks/changes/archive/augment-final-10-percent/verification.md:26:| AC-006a | TypeScript å¿…é¡»æ”¯æŒï¼ŒPython/Go å¯é€‰ | tests/context-compressor.bats | SC-CC-005, SC-CC-006 | P1 | [ ] |
dev-playbooks/changes/archive/augment-final-10-percent/verification.md:133:#### M5: ä¸Šä¸‹æ–‡æ™ºèƒ½å‹ç¼©ï¼ˆtests/context-compressor.batsï¼‰
dev-playbooks/changes/archive/augment-final-10-percent/verification.md:208:| tests/context-compressor.bats | `context-compressor.sh` è„šæœ¬ä¸å­˜åœ¨ | P1 |
dev-playbooks/changes/archive/augment-final-10-percent/verification.md:355:| proposal.md 5.5 | AC-006, AC-006a | tests/context-compressor.bats | evidence/red-baseline/context-compressor-*.log |
dev-playbooks/changes/archive/augment-final-10-percent/verification.md:417:| tests/context-compressor.bats | å¾…åˆ›å»º | P1 |
dev-playbooks/changes/archive/enhance-code-intelligence/specs/intent-analysis/spec.md:31:#### Scenario: Analyze intent with implicit context
dev-playbooks/changes/archive/enhance-code-intelligence/specs/intent-analysis/spec.md:42:#### Scenario: Analyze intent with historical context
dev-playbooks/changes/archive/enhance-code-intelligence/specs/intent-analysis/spec.md:51:#### Scenario: Analyze intent with code context
dev-playbooks/changes/archive/augment-parity/tasks.md:151:- [x] ä¿®æ”¹ï¼š`scripts/graph-rag.sh`ï¼ˆé›†æˆå®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼‰
dev-playbooks/changes/archive/augment-parity/tasks.md:218:- [x] å¢å¼ºï¼š`scripts/graph-rag.sh`ï¼ˆLLM é‡æ’åºï¼‰
dev-playbooks/changes/archive/augment-parity/tasks.md:224:- [x] ä¿®æ”¹ï¼š`scripts/graph-rag.sh`
dev-playbooks/changes/archive/augment-parity/tasks.md:281:#### MP3.2: å¢å¼º graph-rag.sh æ”¯æŒ LLM é‡æ’åº âœ…
dev-playbooks/changes/archive/augment-parity/tasks.md:289:# options: {--rerank, --top-k, --context-window}
dev-playbooks/changes/archive/augment-parity/tasks.md:302:- `scripts/graph-rag.sh` ä¸­å·²å®ç° `--rerank` å‚æ•°å’Œ `llm_rerank_candidates()` å‡½æ•°
dev-playbooks/changes/archive/augment-parity/tasks.md:511:| `scripts/graph-rag.sh` | é›†æˆ LLM é‡æ’åº | âœ… å®Œæˆ |
dev-playbooks/changes/archive/augment-parity/tasks.md:527:             graph-rag.sh â”€â”€â†’ llm_call() â”€â”€â†’ LLM APIs
dev-playbooks/changes/archive/augment-parity/tasks.md:605:- **äº¤ä»˜ç‰©**ï¼šå¢å¼º graph-rag.sh, dependency-guard.sh, pattern-learner.sh, common.sh
dev-playbooks/changes/archive/augment-parity/tasks.md:627:| PR-5 | MP3.2 graph-rag.sh å¢å¼º | å¦ | PR-1, PR-4 | âœ… å®Œæˆ |
dev-playbooks/changes/archive/augment-final-10-percent/tasks.md:204:- [ ] T5.1: åˆ›å»º `scripts/context-compressor.sh` åŸºç¡€ç»“æ„
dev-playbooks/changes/archive/augment-final-10-percent/tasks.md:234:  - æ·»åŠ  `context_compressor.enabled` å¼€å…³
dev-playbooks/changes/archive/augment-final-10-percent/tasks.md:427:| AA-005 | T5.1-T5.7 | `bats tests/context-compressor.bats` | å‹ç¼©ç‡ >=50%ï¼ŒTypeScript æ”¯æŒ |
dev-playbooks/changes/archive/augment-final-10-percent/tasks.md:454:    subgraph Phase1[Phase 1: P0 æ ¸å¿ƒèƒ½åŠ›]
dev-playbooks/changes/archive/augment-final-10-percent/tasks.md:460:    subgraph Phase2[Phase 2: P1 æ€§èƒ½ä¼˜åŒ–]
dev-playbooks/changes/archive/augment-final-10-percent/tasks.md:466:    subgraph Phase3[Phase 3: P2 ä¼ä¸šå¢å¼º]
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:183:| å†™å…¥ 5 æ¡å¯¹è¯è®°å½•åå¯æ­£ç¡®è¯»å–å…¨éƒ¨ 5 æ¡ | tests/intent-learner.bats::test_conversation_context_write_read |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:184:| ä¸Šä¸‹æ–‡åŒ…å« turnã€queryã€focus_symbols å­—æ®µ | tests/intent-learner.bats::test_conversation_context_schema |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:185:| è¶…è¿‡ 10 è½®å FIFO æ·˜æ±°æœ€æ—§è®°å½• | tests/intent-learner.bats::test_conversation_context_fifo |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:186:| æœç´¢ç»“æœæ’åºåŠ å…¥å¯¹è¯è¿ç»­æ€§åŠ æƒ | tests/intent-learner.bats::test_conversation_context_weighting |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:188:**æµ‹è¯•è„šæœ¬**ï¼š`tests/intent-learner.bats::test_conversation_context`
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:194:| è¾“å‡º JSON åŒ…å« `project_profile` å­—æ®µ | tests/augment-context.bats::test_structured_output_profile |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:195:| è¾“å‡º JSON åŒ…å« `current_state` å­—æ®µ | tests/augment-context.bats::test_structured_output_state |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:196:| è¾“å‡º JSON åŒ…å« `task_context` å­—æ®µ | tests/augment-context.bats::test_structured_output_task |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:197:| è¾“å‡º JSON åŒ…å« `recommended_tools` å­—æ®µ | tests/augment-context.bats::test_structured_output_tools |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:198:| è¾“å‡º JSON åŒ…å« `constraints` å­—æ®µ | tests/augment-context.bats::test_structured_output_constraints |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:199:| è¾“å‡ºç¬¦åˆå®šä¹‰çš„ JSON Schema | tests/augment-context.bats::test_structured_output_schema |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:206:  "task_context": { "intent_analysis": {}, "relevant_snippets": [], "call_chains": [] },
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:212:**æµ‹è¯•è„šæœ¬**ï¼š`tests/augment-context.bats::test_structured_output`
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:218:| **æ­£å‘æµ‹è¯•**ï¼šæœ‰ `.devbooks/config.yaml` æ—¶æ£€æµ‹åˆ° DevBooks é…ç½® | tests/augment-context.bats::test_devbooks_detection_positive |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:219:| **æ­£å‘æµ‹è¯•**ï¼šæ³¨å…¥é¡¹ç›®ç”»åƒï¼ˆæŠ€æœ¯æ ˆ + æ¶æ„æ¨¡å¼ï¼‰ | tests/augment-context.bats::test_devbooks_profile_inject |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:220:| **æ­£å‘æµ‹è¯•**ï¼šæ³¨å…¥æ¶æ„çº¦æŸï¼ˆåˆ†å±‚è§„åˆ™ï¼‰ | tests/augment-context.bats::test_devbooks_constraints_inject |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:221:| **è´Ÿå‘æµ‹è¯•**ï¼šæ—  `.devbooks/config.yaml` æ—¶ä¸æŠ¥é”™ | tests/augment-context.bats::test_devbooks_detection_negative |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:222:| **è´Ÿå‘æµ‹è¯•**ï¼šé DevBooks é¡¹ç›®æ­£å¸¸è¾“å‡ºä¸Šä¸‹æ–‡ | tests/augment-context.bats::test_devbooks_fallback |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:224:**æµ‹è¯•è„šæœ¬**ï¼š`tests/augment-context.bats::test_devbooks_*`
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:255:| ç¼“å­˜ä½¿ç”¨ SQLite æŒä¹…åŒ–ï¼ˆ`.devbooks/subgraph-cache.db`ï¼‰ | tests/cache-manager.bats::test_lru_persistence |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:375:| **æ–°å¢** | `tests/augment-context.bats` | ä¸Šä¸‹æ–‡è¾“å‡ºæµ‹è¯• |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:383:| ä¿®æ”¹ | `hooks/augment-context-global.sh` | ç»“æ„åŒ–è¾“å‡º + DevBooks é€‚é… |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:396:| `intent-learner.sh` | `save_conversation_context()` | å¯¹è¯ä¸Šä¸‹æ–‡ä¿å­˜ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:397:| `intent-learner.sh` | `load_conversation_context()` | å¯¹è¯ä¸Šä¸‹æ–‡åŠ è½½ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:403:| `cache-manager.sh` | `cache_subgraph()` | å†™å…¥ç¼“å­˜ï¼ˆå¸¦ LRU æ·˜æ±°ï¼‰ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:404:| `cache-manager.sh` | `get_cached_subgraph()` | è¯»å–ç¼“å­˜ï¼ˆæ›´æ–°è®¿é—®æ—¶é—´ï¼‰ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:407:| `augment-context-global.sh` | `build_structured_context()` | æ„å»ºç»“æ„åŒ–ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:408:| `augment-context-global.sh` | `build_project_profile()` | æ„å»ºé¡¹ç›®ç”»åƒ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:409:| `augment-context-global.sh` | `build_current_state()` | æ„å»ºå½“å‰çŠ¶æ€ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:410:| `augment-context-global.sh` | `build_task_context()` | æ„å»ºä»»åŠ¡ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:411:| `augment-context-global.sh` | `recommend_tools()` | å·¥å…·æ¨è |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:412:| `augment-context-global.sh` | `get_active_constraints()` | è·å–çº¦æŸ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:414:| `common.sh` | `load_devbooks_context()` | åŠ è½½ DevBooks ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:424:| `intent-learner.sh` | `augment-context-global.sh` | æ–°å¢ | å¯¹è¯ä¸Šä¸‹æ–‡æ³¨å…¥ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:425:| `augment-context-global.sh` | `common.sh` | æ–°å¢ | DevBooks æ£€æµ‹ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:434:- `augment-context-global.sh`ï¼šintegration å±‚ï¼Œä¾èµ– `common.sh`ï¼ˆsharedï¼‰ âœ…
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:461:[MODIFIED] hooks/augment-context-global.sh
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:477:| `.devbooks/conversation-context.json` | å¯¹è¯ä¸Šä¸‹æ–‡å­˜å‚¨ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:479:| `.devbooks/subgraph-cache.db` | LRU å­å›¾ç¼“å­˜ï¼ˆSQLiteï¼‰ |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:502:- hotspot-analyzer, pattern-learner, call-chain, context-layer
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:503:- graph-rag, federation-lite, bug-locator, ast-diff, entropy-viz
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:506:1. æ–°å¢å‡½æ•°ï¼ˆdetect_devbooks, load_devbooks_contextï¼‰ä¸ºç‹¬ç«‹å‡½æ•°ï¼Œä¸ä¿®æ”¹ç°æœ‰å‡½æ•°
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:562:| AC-G04 | AC-G04 | tests/intent-learner.bats::test_conversation_context |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:569:| AC-G11 | AC-G11 | tests/augment-context.bats::test_structured_output |
dev-playbooks/changes/archive/augment-parity-final-gaps/design.md:570:| AC-G12 | AC-G12 | tests/augment-context.bats::test_devbooks_* |
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/cod-visualizer/spec.md:28:- åŒ…å«å­å›¾ï¼ˆsubgraphï¼‰åˆ’åˆ†
dev-playbooks/changes/archive/achieve-augment-full-parity/specs/cod-visualizer/spec.md:63:- æ¨¡å—ä½œä¸ºå­å›¾ï¼ˆsubgraphï¼‰
dev-playbooks/changes/archive/enhance-code-intelligence/specs/subgraph-retrieval/spec.md:1:# Spec Delta: subgraph-retrieval
dev-playbooks/changes/archive/enhance-code-intelligence/specs/subgraph-retrieval/spec.md:4:> **Capability**: subgraph-retrieval
dev-playbooks/changes/archive/enhance-code-intelligence/specs/subgraph-retrieval/spec.md:17:#### Scenario: Retrieve subgraph with call edges
dev-playbooks/changes/archive/enhance-code-intelligence/specs/subgraph-retrieval/spec.md:28:#### Scenario: Retrieve subgraph with reference edges
dev-playbooks/changes/archive/augment-parity/specs/llm-rerank/spec.md:64:2. Consider: semantic match, symbol references, call relationships, context fit
dev-playbooks/changes/archive/augment-parity/specs/llm-rerank/spec.md:139:**When**: æ‰§è¡Œ `graph-rag.sh --query "auth handler" --rerank`
dev-playbooks/changes/archive/augment-parity/specs/llm-rerank/spec.md:151:**When**: æ‰§è¡Œ `graph-rag.sh --query "auth handler" --rerank`
dev-playbooks/changes/archive/20260118-0057-upgrade-code-intelligence-capabilities/tasks.md:47:| scripts/graph-rag.sh | ä¿®æ”¹ | CKB é›†æˆ + Fusion æŸ¥è¯¢ |
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/red-baseline/summary.md:24:| Context Layer | 16 | 14 | 2 | `context-layer.sh` æœªå®ç° |
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/red-baseline/summary.md:41:3. **context-layer.sh** - ä¸Šä¸‹æ–‡å±‚
dev-playbooks/changes/archive/augment-final-10-percent/specs/keystroke-cancel/spec.md:108:**Given**: æ­£åœ¨æ‰§è¡Œ `graph-rag.sh` æŸ¥è¯¢
dev-playbooks/changes/archive/augment-final-10-percent/specs/keystroke-cancel/spec.md:174:daemon_start_with_cancel "graph-rag.sh" "query args"
dev-playbooks/changes/archive/augment-final-10-percent/specs/long-term-memory/spec.md:48:  context TEXT,              -- ç¬¦å·å‡ºç°çš„ä¸Šä¸‹æ–‡
dev-playbooks/changes/archive/augment-final-10-percent/specs/long-term-memory/spec.md:104:  context_similarity * 0.3   # ä¸Šä¸‹æ–‡ç›¸ä¼¼åº¦
dev-playbooks/changes/archive/augment-final-10-percent/specs/long-term-memory/spec.md:406:migrations/002_add_context_column.sql
dev-playbooks/changes/archive/achieve-augment-full-parity/evidence/red-baseline/summary.md:26:| `tests/graph-rag.bats` | 14 | 2 | 12 | 0 |
dev-playbooks/changes/archive/achieve-augment-full-parity/evidence/red-baseline/summary.md:63:| `scripts/graph-rag.sh` | é›¶é¢„ç®—è¿”å›ç©ºç»“æœ | T-SP-005 |
dev-playbooks/changes/archive/achieve-augment-full-parity/evidence/red-baseline/summary.md:64:| `scripts/graph-rag.sh` | æ„å›¾åå¥½é›†æˆ | T-SP-007 |
dev-playbooks/changes/archive/achieve-augment-full-parity/evidence/red-baseline/summary.md:76:- `graph-rag-20260116-013818.log` - Graph RAG æµ‹è¯•è¾“å‡º
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:4:> **Capability**: context-layer
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:72:ç³»ç»Ÿåº”ç”Ÿæˆä¸Šä¸‹æ–‡ç´¢å¼• `.devbooks/context-index.json`ï¼š
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:132:**When**: æ‰§è¡Œ `context-layer.sh --file src/auth.ts`
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:167:**When**: æ‰§è¡Œ `context-layer.sh --index`
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:169:- ç”Ÿæˆ `.devbooks/context-index.json`
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:203:### context-layer.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:207:context-layer.sh --classify <sha>
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:210:context-layer.sh --classify-batch --since "90 days ago"
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:213:context-layer.sh --bug-history --file <path>
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:216:context-layer.sh --index [--days 90]
dev-playbooks/changes/archive/augment-upgrade-phase2/specs/context-layer/spec.md:248:| `CONTEXT_INDEX_PATH` | `.devbooks/context-index.json` | ç´¢å¼•è·¯å¾„ |
dev-playbooks/changes/archive/achieve-augment-full-parity/evidence/performance-report.md:20:| M4 æ™ºèƒ½è£å‰ª | graph-rag.sh | ci_graph_rag | AC-F04 |
dev-playbooks/changes/archive/augment-parity-final-gaps/verification.md:153:- Contract: ç»“æ„åŒ–è¾“å‡º JSON Schema ä¸å­—æ®µå®Œæ•´æ€§ï¼ˆaugment-contextï¼‰ã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/verification.md:338:- tests/augment-context.bats
dev-playbooks/changes/archive/augment-parity-final-gaps/verification.md:356:- `bats tests/augment-context.bats`
dev-playbooks/changes/archive/augment-parity-final-gaps/verification.md:481:- æ”¹è¿›å»ºè®®ï¼šä¸º bug-locator ç»Ÿä¸€ CLI å¥‘çº¦ï¼›ä¸º augment-context æä¾›ç¨³å®šçš„ JSON Schema è¾“å‡ºå…¥å£ã€‚
dev-playbooks/changes/archive/augment-final-10-percent/evidence/red-baseline/summary.md:20:| context-compressor.bats | 10 | 10 | 0 | `context-compressor.sh` ä¸å­˜åœ¨ |
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/baseline-hotspot.golden:5:    {"rank": 2, "file": "hooks/augment-context-global.sh", "score": 125, "frequency": 1, "complexity": 125},
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/baseline-hotspot.golden:6:    {"rank": 3, "file": "scripts/graph-rag.sh", "score": 122, "frequency": 1, "complexity": 122},
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:4:> **Capability**: context-compressor
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:29:context_compress --mode skeleton <files>
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:77:context_compress --budget 5000 <files>
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:141:**When**: è¿è¡Œ `context-compress --mode skeleton src/service.ts`
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:153:**When**: è¿è¡Œ `context-compress --budget 5000 src/`
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:196:**When**: è¿è¡Œ `context-compress --budget 3000 file1.ts file2.ts ...`
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:206:### context_compress
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:210:context_compress [OPTIONS] <files...>
dev-playbooks/changes/archive/augment-final-10-percent/specs/context-compressor/spec.md:226:  "compressed_context": "// file: src/service.ts\nexport function process...",
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/green-final/verification-summary.md:29:### MP3: context-layer.sh âœ…
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/green-final/verification-summary.md:49:- graph-rag.sh ç¼“å­˜é›†æˆï¼šå®Œæˆ
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/green-final/verification-summary.md:80:2. **MP5 (ç¼“å­˜é›†æˆ)**: bug-locator.sh å’Œ graph-rag.sh å·²é›†æˆ cache-manager.sh
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/green-final/test-summary-20260114.md:32:### context-layer.bats (1 å¤±è´¥)
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/green-final/test-summary-20260114.md:52:- tests/context-layer.bats
dev-playbooks/changes/archive/augment-upgrade-phase2/evidence/green-final/test-summary-20260114.md:63:- tests/subgraph-retrieval.bats
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:13:>   - `dev-playbooks/changes/augment-parity-final-gaps/specs/conversation-context/spec.md`
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:14:>   - `dev-playbooks/changes/augment-parity-final-gaps/specs/structured-context-output/spec.md`
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:16:>   - `dev-playbooks/changes/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md`
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:56:**Deliverables**ï¼šå¯¹è¯ä¸Šä¸‹æ–‡æ–‡ä»¶ `.devbooks/conversation-context.json`ã€ä¼šè¯ç®¡ç†å‘½ä»¤ã€å¯¹è¯è¿ç»­æ€§åŠ æƒä¿¡å·è¾“å‡ºã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:82:**Deliverables**ï¼š`.devbooks/subgraph-cache.db`ï¼ˆWALï¼‰ã€LRU æ·˜æ±°ã€cache key è§„èŒƒã€ç»Ÿè®¡ï¼ˆå‘½ä¸­ç‡ç­‰ï¼‰ã€è·¨è¿›ç¨‹å¯ç”¨ã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:83:**å½±å“èŒƒå›´ï¼ˆFiles/Modulesï¼‰**ï¼š`scripts/cache-manager.sh`ã€`.devbooks/subgraph-cache.db`ã€ï¼ˆå¯èƒ½ï¼‰å­å›¾ç”Ÿäº§/æ¶ˆè´¹è„šæœ¬çš„è°ƒç”¨ç‚¹ã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:109:**å½±å“èŒƒå›´ï¼ˆFiles/Modulesï¼‰**ï¼š`hooks/augment-context-global.sh`ã€`scripts/hotspot-analyzer.sh`ã€`scripts/intent-learner.sh`ã€ï¼ˆå¯èƒ½ï¼‰Git è°ƒç”¨ã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:111:**ä¾èµ–ï¼ˆDependenciesï¼‰**ï¼šTest Owner åˆ›å»º `tests/augment-context.bats`ï¼ˆè®¾è®¡å¼•ç”¨ï¼‰ï¼›MP8 DevBooks é€‚é…ä¼šæ³¨å…¥éƒ¨åˆ†å­—æ®µã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:114:- [x] MP7.1 åœ¨ `augment-context-global.sh` è¾“å‡º 5 å±‚ç»“æ„åŒ– JSONï¼ˆproject_profile/current_state/task_context/recommended_tools/constraintsï¼‰ï¼ˆAC-G11ï¼›é”šç‚¹ï¼š`npm test`ï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:122:**å½±å“èŒƒå›´ï¼ˆFiles/Modulesï¼‰**ï¼š`scripts/common.sh`ï¼ˆæ–°å¢å‡½æ•°ï¼‰ã€`hooks/augment-context-global.sh`ã€ï¼ˆå¯èƒ½ï¼‰æœç´¢/æ„å›¾æ¨¡å—çš„ query æ‰©å±•ç‚¹ã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:124:**ä¾èµ–ï¼ˆDependenciesï¼‰**ï¼šé«˜é£é™©ï¼š`common.sh` è¢« 18 ä¸ªè„šæœ¬ç›´æ¥è°ƒç”¨ï¼ˆè§â€œé£é™©ä¸è¾¹ç•Œâ€ï¼‰ï¼›Test Owner åˆ›å»º `tests/augment-context.bats`ï¼ˆè®¾è®¡å¼•ç”¨ï¼‰ã€‚  
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:127:- [x] MP8.1 åœ¨ `common.sh` æ–°å¢ `detect_devbooks()`ï¼ˆæŒ‰ä¼˜å…ˆçº§æ¢æµ‹ï¼Œç¼“å­˜ 60sï¼‰ä¸ `load_devbooks_context()`ï¼ˆåªæ–°å¢ã€ä¸ä¿®æ”¹æ—¢æœ‰å‡½æ•°ï¼‰ï¼ˆAC-G12ï¼›é”šç‚¹ï¼š`npm test`ï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:190:- ä¿®æ”¹ï¼š`scripts/scip-to-graph.sh`ã€`scripts/graph-store.sh`ã€`scripts/intent-learner.sh`ã€`scripts/daemon.sh`ã€`scripts/cache-manager.sh`ã€`scripts/bug-locator.sh`ã€`hooks/augment-context-global.sh`ã€`scripts/common.sh`ã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:202:- `.devbooks/conversation-context.json`ï¼šå¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆSpec REQ-CC-001/002ï¼‰ã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:204:- `.devbooks/subgraph-cache.db`ï¼šå­å›¾ LRU ç¼“å­˜ï¼ˆSpec REQ-SLC-001/002ï¼‰ã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:207:- 5 å±‚å­—æ®µä¸é™åˆ¶ï¼š`project_profile/current_state/task_context/recommended_tools/constraints`ï¼ˆSpec REQ-SCO-001~007ï¼›è®¾è®¡ AC-G11ï¼‰ã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:226:- PR-Gï¼šMP7+MP8ï¼ˆaugment-context ç»“æ„åŒ–è¾“å‡º + DevBooks é€‚é…ï¼›æ³¨æ„ `common.sh` é£é™©ï¼Œå»ºè®®å…ˆå°æ­¥åˆå…¥ MP8.1ï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:253:- `common.sh` é«˜é£é™©ï¼šè¢« 18 ä¸ªè„šæœ¬ç›´æ¥è°ƒç”¨ï¼ˆè®¾è®¡ 7.2 åˆ—è¡¨ï¼šscip-to-graphã€graph-storeã€daemonã€intent-learnerã€vuln-trackerã€impact-analyzerã€ast-deltaã€cod-visualizerã€boundary-detectorã€hotspot-analyzerã€pattern-learnerã€call-chainã€context-layerã€graph-ragã€federation-liteã€bug-locatorã€ast-diffã€entropy-vizï¼‰ã€‚ç­–ç•¥ï¼šåªæ–°å¢å‡½æ•°ã€ä¸æ”¹æ—¢æœ‰å‡½æ•°ç­¾å/è¡Œä¸ºï¼›å…ˆåˆå…¥æœ€å°å˜æ›´å¹¶è·‘å…¨é‡æµ‹è¯•ã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:265:  - LRU ç¼“å­˜ï¼šåˆ é™¤ `.devbooks/subgraph-cache.db` åº”å¯å®‰å…¨é‡å»ºã€‚
dev-playbooks/changes/archive/augment-parity-final-gaps/tasks.md:266:  - å¯¹è¯ä¸Šä¸‹æ–‡ï¼šåˆ é™¤ `.devbooks/conversation-context.json` åº”å¯å®‰å…¨é‡å»ºã€‚
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:79:| ä¿®æ”¹æ–‡ä»¶ | `scripts/graph-rag.sh` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:236:| ä¿®æ”¹æ–‡ä»¶ | `scripts/graph-rag.sh` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:301:| æ‰‹åŠ¨è§¦å‘ | `graph-rag.sh build-corpus` | å…¨é‡é‡å»ºè¯­æ–™åº“ç»Ÿè®¡ |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:306:# graph-rag.sh ä¸­çš„è‡ªåŠ¨è§¦å‘é€»è¾‘
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:348:    ./scripts/graph-rag.sh build-corpus --incremental &
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:358:| ä¿®æ”¹æ–‡ä»¶ | `scripts/graph-rag.sh` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:393:| ä¿®æ”¹æ–‡ä»¶ | `scripts/graph-rag.sh` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:617:    local context="${3:-different_session}"
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:631:    local context_multiplier
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:632:    case "$context" in
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:633:        same_session)      context_multiplier=$CONTEXT_SAME_SESSION ;;
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:634:        related_file)      context_multiplier=$CONTEXT_RELATED_FILE ;;
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:635:        different_session) context_multiplier=$CONTEXT_DIFFERENT_SESSION ;;
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:636:        *)                 context_multiplier=1.0 ;;
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:644:    local raw_score=$(echo "scale=4; $frequency * $action_weight * $recency_weight * $context_multiplier" | bc)
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:656:| 5 æ¬¡ IGNOREï¼ˆ-0.3 Ã— 5 = -1.5ï¼‰ | -1.5 Ã— recency Ã— context | **0**ï¼ˆä¸‹é™ä¿æŠ¤ç”Ÿæ•ˆï¼‰ |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:687:# æ›¿æ¢ apply_context_boost() å‡½æ•°
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:688:apply_context_boost_multiplicative() {
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:695:    # context_multiplier = (1 + acc) * (1 + recent) * sqrt(1 + same_file)
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:698:    local context_multiplier=$(echo "scale=4;
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:703:    local final_score=$(echo "scale=4; $original_score * $context_multiplier" | bc)
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:779:| ä¿®æ”¹æ–‡ä»¶ | `config/features.yaml`ã€`scripts/graph-rag.sh` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:797:# scripts/graph-rag.sh ä¿®æ”¹
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:856:| `scripts/graph-rag.sh` | ä¿®æ”¹ | èƒŒåŒ…ç®—æ³•ã€TF-IDFã€å»é‡èåˆã€è·ç¦»åº¦é‡ã€LLM é‡æ’åº |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:861:| `tests/graph-rag.bats` | ä¿®æ”¹ | èƒŒåŒ…ç®—æ³•ã€TF-IDFã€å»é‡æµ‹è¯• |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:915:graph-rag.sh â†’ common.shï¼ˆæ™ºèƒ½ Token ä¼°ç®—ï¼‰
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:956:| AC-A01 | èƒŒåŒ…ç®—æ³• | **é¢„ç®— 1000 tokens æ—¶ï¼Œåˆ©ç”¨ç‡ > 90%**ï¼ˆvs è´ªå¿ƒ 60-80%ï¼‰ | `tests/graph-rag.bats::test_knapsack_utilization` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:957:| AC-A02 | TF-IDF | **é©¼å³°åˆ†è§£æ­£ç¡®**ï¼š`handleAuth` â†’ `[handle, auth]` | `tests/graph-rag.bats::test_tfidf_camel_case` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:958:| AC-A03 | å€™é€‰å»é‡ | **åŒç¬¦å·å¤šæ¥æºæ—¶åˆå¹¶ä¸ºå•æ¡ï¼Œscore æœ‰åŠ æˆ** | `tests/graph-rag.bats::test_candidate_fusion` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:959:| AC-A04 | å¤šç»´è·ç¦» | **å¤šè·¯å¾„èŠ‚ç‚¹è·ç¦» < å•è·¯å¾„èŠ‚ç‚¹**ï¼ˆåŒæ·±åº¦ï¼‰ | `tests/graph-rag.bats::test_multidim_distance` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:966:| AC-A11 | LLM é‡æ’åºå¯é…ç½® | **é»˜è®¤å…³é—­ï¼Œè®¾ç½® enabled=true åå°è¯•è°ƒç”¨** | `tests/graph-rag.bats::test_llm_rerank_config` |
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:1097:â”œâ”€â”€ scripts/graph-rag.shï¼ˆèƒŒåŒ…ã€TF-IDFã€å»é‡ã€è·ç¦»ï¼‰
dev-playbooks/changes/archive/algorithm-optimization-parity/proposal.md:1098:â”œâ”€â”€ tests/graph-rag.bats
dev-playbooks/changes/archive/algorithm-optimization-parity/tasks.md:9:### é‡Œç¨‹ç¢‘ 1: Graph-RAG æ ¸å¿ƒç®—æ³• (graph-rag.sh)
dev-playbooks/changes/archive/algorithm-optimization-parity/tasks.md:194:graph-rag.sh (MP1)
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:30:| AC-A02 | TF-IDF é©¼å³°åˆ†è§£ | - | (graph-rag å†…éƒ¨) | - | âš ï¸ æ— æ˜¾å¼ Design AC |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:60:- æµ‹è¯•æ–‡ä»¶ `tests/graph-rag.bats::test_tfidf_camel_case` å·²å­˜åœ¨
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:63:- åŠŸèƒ½å·²åœ¨ graph-rag.sh ä¸­ä½œä¸º ALG-001/002 çš„å®ç°ç»†èŠ‚
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:76:| AC-A01 | `tests/graph-rag.bats::test_knapsack_utilization` | tests/graph-rag.bats | âœ… |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:77:| AC-A02 | `tests/graph-rag.bats::test_tfidf_camel_case` | tests/graph-rag.bats | âœ… |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:78:| AC-A03 | `tests/graph-rag.bats::test_candidate_fusion` | tests/graph-rag.bats | âœ… |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:79:| AC-A04 | `tests/graph-rag.bats::test_multidim_distance` | tests/graph-rag.bats | âœ… |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:85:| AC-A10 | `tests/common.bats::test_smart_token_estimate` | tests/graph-rag.bats (CT-GS-005) | âœ… |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:86:| AC-A11 | `tests/graph-rag.bats::test_llm_rerank_config` | tests/graph-rag.bats | âœ… |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:253:| ALG-001 + ALG-002 | tests/graph-rag.bats | evidence/red-baseline/graph-rag-*.log | 2026-01-17 |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:270:| CT-PS-* | tests/graph-rag.bats | 4 |
dev-playbooks/changes/archive/algorithm-optimization-parity/verification.md:271:| CT-GS-* | tests/graph-rag.bats | 5 |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:183:| å‘½ä»¤ | `intent-learner.sh context/session` |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:190:| `context save --query <q> --symbols <s>` | ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:191:| `context load` | åŠ è½½å¯¹è¯ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:192:| `context apply-weight --results <json>` | åº”ç”¨å¯¹è¯è¿ç»­æ€§åŠ æƒ |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:200:### 1.7 augment-context-global.sh è¾“å‡ºå˜æ›´
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:213:  "task_context": { "intent_analysis", "relevant_snippets", "call_chains" },
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:252:| `.devbooks/conversation-context.json` | å¯¹è¯ä¸Šä¸‹æ–‡ | è§ REQ-CC-002 |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:254:| `.devbooks/subgraph-cache.db` | å­å›¾ LRU ç¼“å­˜ | è§ REQ-SLC-002 |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:270:| intent-learner.sh context/session | âœ… å…¼å®¹ | æ–°å¢å‘½ä»¤ |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:271:| augment-context-global.sh è¾“å‡º | âš ï¸ éœ€æ³¨æ„ | è¾“å‡ºæ ¼å¼å˜åŒ– |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:297:**augment-context-global.sh è¾“å‡ºè¿ç§»**ï¼š
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:302:./hooks/augment-context-global.sh --format text
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:317:| CT-API-007 | API | intent-learner context/session |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:319:| CT-SCHEMA-002 | Schema | conversation-context.json |
dev-playbooks/changes/archive/augment-parity-final-gaps/contract-plan.md:321:| CT-SCHEMA-004 | Schema | subgraph-cache.db |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:42:| `scripts/graph-rag.sh` | 2 | low | é«˜ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:44:| `scripts/context-compressor.sh` | - | - | é«˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:52:### ä¸€ã€ç±»å‹å®‰å…¨ä¸åå‘³é“ï¼ˆsrc/server.ts, src/context-signal-manager.tsï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:115:**[M-001] `src/context-signal-manager.ts:196` - ç±»å‹å®ˆå«å¯ä»¥æ›´ä¸¥æ ¼**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:178:**[m-001] `src/context-signal-manager.ts:100-105` - SQL å­—ç¬¦ä¸²æ‹¼æ¥**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:183:**[m-002] `src/context-signal-manager.ts:225-241` - Feature Envy**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:188:**[m-003] `src/context-signal-manager.ts:55-58` - ç¼ºå°‘èµ„æºæ¸…ç†**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:226:**[M-004] `tests/context-compressor.bats:481-522` - å¹¶å‘æµ‹è¯•ç¼ºå°‘èµ„æºéš”ç¦»éªŒè¯**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:254:**[m-004] `tests/context-compressor.bats` - æµ‹è¯•å‘½åä¸ä¸€è‡´**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:270:**[C-005] `scripts/context-compressor.sh:16-19` - ä¸´æ—¶æ–‡ä»¶æ¸…ç†å­˜åœ¨ç«æ€æ¡ä»¶é£é™©**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:305:**[M-008] `scripts/context-compressor.sh:410-543` - `compress_file` å‡½æ•°å¤æ‚åº¦è¿‡é«˜ï¼ˆçº¦ 130 è¡Œï¼‰**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:344:**[M-013] `scripts/context-compressor.sh:792-819` - `_main_build_output_json` å‡½æ•°å‚æ•°è¿‡å¤šï¼ˆ9 ä¸ªï¼‰**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:356:**[m-006] `scripts/context-compressor.sh:244-276` - `is_signature_start` å‡½æ•°æ­£åˆ™è¿‡äºå¤æ‚**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:371:**[m-009] `scripts/context-compressor.sh:127-133` - `count_non_empty_lines` å’Œ `count_compressed_tokens` åŠŸèƒ½é‡å¤**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:426:1. **ä¸´æ—¶æ–‡ä»¶æ¸…ç†**ï¼ˆ`context-compressor.sh:12-25`ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:440:1. **ç¼“å­˜é”æ–‡ä»¶**ï¼ˆ`context-compressor.sh:21-23`ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:544:- **æ–‡ä»¶**: src/server.ts, src/context-signal-manager.ts
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:549:- **æ–‡ä»¶**: tests/hybrid-retrieval.bats, tests/context-compressor.bats, tests/llm-rerank.bats, tests/graph-store.bats
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:554:- **æ–‡ä»¶**: scripts/context-compressor.sh, scripts/call-chain.sh, scripts/graph-store.sh
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:581:| TypeScript æºæ–‡ä»¶ | src/server.ts, src/context-signal-manager.ts, src/tool-handlers.ts | a8a24c7 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:582:| æ ¸å¿ƒè„šæœ¬ | scripts/context-compressor.sh, scripts/call-chain.sh, scripts/graph-store.sh | ac50c24 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:583:| æµ‹è¯•æ–‡ä»¶ | tests/context-compressor.bats, tests/hybrid-retrieval.bats, tests/llm-rerank.bats, tests/graph-store.bats | a95741d |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/code-review-report.md:658:| M-NEW-002 | src/context-signal-manager.ts:100-105 | SQL å‚æ•°ç»‘å®šå­˜åœ¨æ³¨å…¥é£é™© | ä½¿ç”¨çœŸæ­£çš„å‚æ•°åŒ–æŸ¥è¯¢ |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:16:| ALG-001 | graph-rag.sh | ä¼˜å…ˆçº§æ’åºç®—æ³• | MP4.2 |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:17:| ALG-002 | graph-rag.sh | è´ªå©ªé€‰æ‹©ç­–ç•¥ | MP4.4 |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:323:| graph-rag.sh | ä¼˜å…ˆçº§è®¡ç®—ã€è´ªå©ªé€‰æ‹© |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:483:| BC-001 | graph-rag.sh | ä¼˜å…ˆçº§å…¬å¼ï¼š`P = rÃ—0.4 + hÃ—0.3 + (1/d)Ã—0.3` |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:484:| BC-002 | graph-rag.sh | è´ªå©ªé€‰æ‹©ä¸è¶…è¿‡ Token é¢„ç®— |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:519:| context-weighting | 6 |
dev-playbooks/changes/archive/algorithm-optimization-parity/design.md:537:| ALG-005 è¿ç»­æ€§åŠ æƒ | `specs/context-weighting/spec.md` |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:1:# Spec: å¯¹è¯å†å²ä¿¡å·ç´¯ç§¯ï¼ˆconversation-contextï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:4:> **Capability**: conversation-context
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:26:- å­˜å‚¨ä½ç½®ï¼š`.devbooks/conversation-context.json`
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:38:  "context_window": [
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:114:- åˆ›å»º `.devbooks/conversation-context.json`
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:157:- æ¸…ç©º `context_window`
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:178:- `context_window`: []
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:212:intent-learner.sh context <command> [options]
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:217:| `context save --query <q> --symbols <s1,s2>` | ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:218:| `context load` | åŠ è½½å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/conversation-context/spec.md:219:| `context apply-weight --results <json>` | å¯¹ç»“æœåº”ç”¨å¯¹è¯è¿ç»­æ€§åŠ æƒ |
dev-playbooks/changes/archive/augment-parity-final-gaps/evidence/scripts/benchmark.sh:46:    rm -f "$DEVBOOKS_DIR/subgraph-cache.db" 2>/dev/null || true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/test-review-report.md:34:| AC-001 | context-compressor.bats | 19 | âœ… å·²è¦†ç›– | T-CC-001~013, T-CC-ERROR-001~005, T-PERF-CC-001 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/test-review-report.md:64:**C-001** `context-compressor.bats:414-457` **T-CC-005 ç¼“å­˜æ€§èƒ½æµ‹è¯•ç¨³å®šæ€§ä¸è¶³**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/test-review-report.md:120:**M-001** `context-compressor.bats:587-596` **T-CC-ERROR-001 ç©ºæ–‡ä»¶é”™è¯¯æ¶ˆæ¯åŒ¹é…è¿‡å®½**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/test-review-report.md:189:- **å»ºè®®**: å¢åŠ æ–­è¨€éªŒè¯éç„¦ç‚¹ç¬¦å·çš„ `context_boost == 0`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/test-review-report.md:332:| #1 æ ¸å¿ƒåŠŸèƒ½ | context-compressor, drift-detector, data-flow-tracing, graph-store | Critical: 4, Major: 5 | æ€§èƒ½æµ‹è¯•ç¨³å®šæ€§ä¸è¶³ã€è¿ç§»æµ‹è¯•è¦†ç›–ä¸å®Œæ•´ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:1:# Spec Delta: å­å›¾ LRU ç¼“å­˜ï¼ˆsubgraph-lru-cacheï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:4:> **Capability**: subgraph-lru-cache
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:26:- æ•°æ®åº“æ–‡ä»¶ï¼š`.devbooks/subgraph-cache.db`
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:35:CREATE TABLE IF NOT EXISTS subgraph_cache (
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:41:CREATE INDEX IF NOT EXISTS idx_access_time ON subgraph_cache(access_time);
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:77:UPDATE subgraph_cache SET access_time = $now WHERE cache_key = '$key';
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:78:SELECT cache_value FROM subgraph_cache WHERE cache_key = '$key';
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:92:DELETE FROM subgraph_cache
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:94:    SELECT cache_key FROM subgraph_cache
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:96:    LIMIT MAX(0, (SELECT COUNT(*) FROM subgraph_cache) - $MAX_SIZE + 1)
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:99:INSERT OR REPLACE INTO subgraph_cache (cache_key, cache_value, access_time, created_time)
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:101:    (SELECT created_time FROM subgraph_cache WHERE cache_key = '$key'), $now
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:160:- æ¡ç›®å†™å…¥ `subgraph_cache` è¡¨
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:222:- åˆ›å»º `.devbooks/subgraph-cache.db`
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:223:- åˆ›å»º `subgraph_cache` è¡¨
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/subgraph-lru-cache/spec.md:307:| `SUBGRAPH_CACHE_DB` | `.devbooks/subgraph-cache.db` | ç¼“å­˜æ•°æ®åº“è·¯å¾„ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:51:- æ–°å¢ `scripts/context-compressor.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:56:- æ–°å¢æµ‹è¯•ï¼š`tests/context-compressor.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:83:- å®ç°å…³é”®è¯ + å‘é‡ + å›¾è·ç¦»çš„ RRFï¼ˆReciprocal Rank Fusionï¼‰èåˆ
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:88:- ä¿®æ”¹ `scripts/graph-rag.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:96:- ä¿®æ”¹ `scripts/context-layer.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:100:- ä¿®æ”¹ `scripts/graph-rag.sh`ï¼Œå°†ä¸Šè¿°ä¿¡å·çº³å…¥ priority score è®¡ç®—
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:135:3. **ä¸Šä¸‹æ–‡å‹ç¼©**ï¼ˆcontext-compressor.shï¼‰- ä¾èµ–å›¾æŸ¥è¯¢åŠ é€Ÿ
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:139:   - éªŒè¯ï¼štests/context-compressor.bats
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:154:6. **é‡æ’åºç®¡çº¿**ï¼ˆgraph-rag.shï¼‰- ä¾èµ–æ··åˆæ£€ç´¢
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:158:   - éªŒè¯ï¼štests/graph-rag.bats
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:160:7. **ä¸Šä¸‹æ–‡å±‚ä¿¡å·**ï¼ˆcontext-layer.sh, graph-rag.shï¼‰- ä¾èµ–é‡æ’åºç®¡çº¿
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:161:   - åŸå› ï¼šéœ€è¦é›†æˆåˆ° graph-rag.sh çš„æƒé‡è®¡ç®—
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:162:   - ä¾èµ–ï¼šgraph-rag.shï¼ˆé˜¶æ®µ 3ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:164:   - éªŒè¯ï¼štests/graph-rag.bats
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:182:    A[å›¾æŸ¥è¯¢åŠ é€Ÿ<br/>graph-store.sh] --> C[ä¸Šä¸‹æ–‡å‹ç¼©<br/>context-compressor.sh]
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:188:    E --> F[é‡æ’åºç®¡çº¿<br/>graph-rag.sh]
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:189:    F --> G[ä¸Šä¸‹æ–‡å±‚ä¿¡å·<br/>context-layer.sh]
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:240:| æ–°å¢æ–‡ä»¶ | 4 ä¸ªè„šæœ¬ + 4 ä¸ªæµ‹è¯• | context-compressor.sh, drift-detector.sh, benchmark.sh + å¯¹åº”æµ‹è¯• |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:241:| ä¿®æ”¹æ–‡ä»¶ | 7 ä¸ªè„šæœ¬ | call-chain.sh, graph-store.sh, embedding.sh, graph-rag.sh, context-layer.sh, semantic-anomaly.sh, pattern-learner.sh, bug-locator.sh |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:253:- æ–°å¢ 4 ä¸ªè„šæœ¬ï¼š`context-compressor.sh`, `drift-detector.sh`, `benchmark.sh` + å¯¹åº”æµ‹è¯•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:254:- ä¿®æ”¹ 7 ä¸ªè„šæœ¬ï¼š`call-chain.sh`, `graph-store.sh`, `embedding.sh`, `graph-rag.sh`, `context-layer.sh`, `semantic-anomaly.sh`, `pattern-learner.sh`, `bug-locator.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:255:- æ–°å¢ 4 ä¸ªæµ‹è¯•æ–‡ä»¶ï¼š`tests/context-compressor.bats`, `tests/drift-detector.bats`, `tests/data-flow-tracing.bats`ï¼ˆå¢å¼ºï¼‰, `tests/benchmark.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:256:- ä¿®æ”¹ 3 ä¸ªæµ‹è¯•æ–‡ä»¶ï¼š`tests/graph-store.bats`, `tests/embedding.bats`, `tests/graph-rag.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:269:æ ¹æ® GoF ã€Šè®¾è®¡æ¨¡å¼ã€‹å½’çº³çš„"8 ç±»å¯¼è‡´é‡è®¾è®¡çš„åŸå› "ï¼Œæœ¬æ¬¡å˜æ›´å±äºä»¥ä¸‹ç±» [x] **ç®—æ³•ä¾èµ–**ï¼šæ··åˆæ£€ç´¢æƒé‡é…ç½®ï¼ˆRRF èåˆç®—æ³•ï¼‰ã€å‹ç¼©ç®—æ³•é€‰æ‹©ï¼ˆAST éª¨æ¶æŠ½å– vs æ­£åˆ™è¿‡æ»¤ vs LLM æ‘˜è¦ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:270:  - **å½±å“èŒƒå›´**ï¼š`embedding.sh`ï¼ˆæ··åˆæ£€ç´¢ï¼‰ã€`context-compressor.sh`ï¼ˆå‹ç¼©ç®—æ³•ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:310:- âœ… `graph-rag.sh` å·²æœ‰é‡æ’åºé›†æˆç‚¹ï¼ˆRERANK_ENABLED å˜é‡å­˜åœ¨ï¼Œç¬¬ 90 è¡Œï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:312:- âš ï¸ `reranker.sh` å·²å­˜åœ¨ä½†æœªè¢« `graph-rag.sh` è°ƒç”¨ï¼ˆéœ€åœ¨æœ¬æ¬¡å˜æ›´ä¸­é›†æˆï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:318:| `context-compressor.sh` | `--budget`, `--mode` | 5000, skeleton | æ–°è„šæœ¬ | ğŸ†• å¾…å®ç° |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:322:| `graph-rag.sh` | `--rerank` | true | å‘åå…¼å®¹ | âœ… å˜é‡å·²é¢„ç•™ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:497:     context_compression: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:503:     context_signals: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:584:context-compressor.sh â†’ hotspot-analyzer.shï¼ˆå¾…å®ç°ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:587:graph-rag.sh â†’ reranker.shï¼ˆå¾…é›†æˆï¼Œå˜é‡å·²é¢„ç•™ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:588:graph-rag.sh â†’ context-layer.shï¼ˆå·²å­˜åœ¨ï¼Œéœ€å¢å¼ºä¿¡å·æå–ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:600:- âœ… `graph-rag.sh` å·²é›†æˆ `cache-manager.sh`ï¼ˆCACHE_MANAGER å˜é‡ï¼Œç¬¬ 73 è¡Œï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:601:- âœ… `graph-rag.sh` å·²é›†æˆ `boundary-detector.sh`ï¼ˆBOUNDARY_DETECTOR å˜é‡ï¼Œç¬¬ 70 è¡Œï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:602:- âš ï¸ `graph-rag.sh` çš„ `reranker.sh` é›†æˆç‚¹å·²é¢„ç•™ä½†æœªå®ç°ï¼ˆRERANK_ENABLED å˜é‡ï¼Œç¬¬ 90 è¡Œï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:614:| context-compressor.sh â†’ hotspot-analyzer.sh | æ–°å¢ | ä½ | hotspot-analyzer.sh å·²å­˜åœ¨ä¸”ç¨³å®š |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:617:| graph-rag.sh â†’ reranker.sh | æ–°å¢ | ä½ | reranker.sh å·²å­˜åœ¨ï¼Œé€šè¿‡é…ç½®å¼€å…³æ§åˆ¶ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:618:| graph-rag.sh â†’ context-layer.sh | å¢å¼º | ä½ | context-layer.sh å·²å­˜åœ¨ï¼Œä»…æ–°å¢ä¿¡å·æå– |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:629:- âœ… `tests/context-compressor.bats` - å·²å­˜åœ¨ï¼ˆå¾…å¢å¼ºï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:643:1. `tests/context-compressor.bats` - ä¸Šä¸‹æ–‡å‹ç¼©åŠŸèƒ½æµ‹è¯•ï¼ˆâœ… å·²å­˜åœ¨ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:673:   - æµ‹è¯• RRF èåˆç®—æ³•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:678:3. `tests/graph-rag.bats` - å¢åŠ é‡æ’åºå’Œä¸Šä¸‹æ–‡ä¿¡å·æµ‹è¯•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:685:- **å•å…ƒæµ‹è¯•**ï¼šæ¯ä¸ªæ–°å¢/ä¿®æ”¹è„šæœ¬çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚å‹ç¼©ç®—æ³•ã€æ¼‚ç§»è¯„åˆ†ã€RRF èåˆï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:701:- âœ… å¤–éƒ¨ç³»ç»Ÿ/API å˜æ›´å·²è¢« ACL éš”ç¦»ï¼ˆOllama/OpenAI é€šè¿‡ `embedding.sh` éš”ç¦»ï¼ŒCKB MCP é€šè¿‡ `graph-rag.sh` éš”ç¦»ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:719:3. **[NEW]** `dev-playbooks/specs/context-compressor/spec.md`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:734:6. **[EXTEND]** `dev-playbooks/specs/subgraph-retrieval/spec.md`ï¼ˆgraph-rag.shï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:756:| @modelcontextprotocol/sdk | ^1.0.0 | å®Œå…¨å…¼å®¹ | æ— é£é™©ï¼ˆæ— å˜æ›´ï¼‰ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:765:| context-compressor.sh â†’ hotspot-analyzer.sh | æ–°å¢ | ä½ | hotspot-analyzer.sh å·²å­˜åœ¨ä¸”ç¨³å®š |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:768:| graph-rag.sh â†’ reranker.sh | æ–°å¢ | ä½ | reranker.sh å·²å­˜åœ¨ï¼Œé€šè¿‡é…ç½®å¼€å…³æ§åˆ¶ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:769:| graph-rag.sh â†’ context-layer.sh | å¢å¼º | ä½ | context-layer.sh å·²å­˜åœ¨ï¼Œä»…æ–°å¢ä¿¡å·æå– |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:817:  context_compression: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:823:  context_signals: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:841:   - **æ”¶å£ç‚¹**ï¼šRRF èåˆç®—æ³•å®ç°
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:848:3. **é‡æ’åºç®¡çº¿ï¼ˆgraph-rag.shï¼‰**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:873:     - `graph-rag.sh` â†’ `graph-store.sh::query_graph()`ï¼ˆå­å›¾æ£€ç´¢ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:879:     - `context-compressor.sh` â†’ `hotspot-analyzer.sh::calculate_score()`ï¼ˆçƒ­ç‚¹ä¼˜å…ˆå‹ç¼©ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:887:     - `graph-rag.sh` â†’ `embedding.sh::hybrid_search()`ï¼ˆGraph-RAG æ£€ç´¢ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:892:- åœ¨ PP-1 å†™ 1 ä¸ªæµ‹è¯• â†’ è¦†ç›– drift-detector/embedding/graph-rag ä¸‰æ¡è·¯å¾„
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:893:- åœ¨ PP-2 å†™ 1 ä¸ªæµ‹è¯• â†’ è¦†ç›– context-compressor/bug-locator ä¸¤æ¡è·¯å¾„
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:894:- åœ¨ PP-3 å†™ 1 ä¸ªæµ‹è¯• â†’ è¦†ç›– bug-locator/graph-rag ä¸¤æ¡è·¯å¾„
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:974:  context_compression: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:980:  context_signals: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1078:| AC-007 | ä¸Šä¸‹æ–‡å±‚ä¿¡å·æ­£ç¡®çº³å…¥æ£€ç´¢æƒé‡ | è¿è¡Œ graph-rag.shï¼Œæ£€æŸ¥ priority score è®¡ç®— | `evidence/context-signals.log` |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1088:1. `tests/context-compressor.bats` - ä¸Šä¸‹æ–‡å‹ç¼©åŠŸèƒ½æµ‹è¯•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1096:3. `tests/graph-rag.bats` - å¢åŠ é‡æ’åºå’Œä¸Šä¸‹æ–‡ä¿¡å·æµ‹è¯•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1104:| ä¸Šä¸‹æ–‡å‹ç¼© | hotspot-analyzer.sh | å‹ç¼© + çƒ­ç‚¹ä¼˜å…ˆç­–ç•¥ | context-compressor.bats |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1109:| é‡æ’åºç®¡çº¿ | graph-rag.sh, reranker.sh | Graph-RAG + é‡æ’åº | graph-rag.bats |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1110:| ä¸Šä¸‹æ–‡å±‚ä¿¡å· | context-layer.sh, graph-rag.sh | ä¿¡å·æå– + æƒé‡è®¡ç®— | graph-rag.bats |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1115:- **å•å…ƒæµ‹è¯•**ï¼šæ¯ä¸ªæ–°å¢/ä¿®æ”¹è„šæœ¬çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚å‹ç¼©ç®—æ³•ã€æ¼‚ç§»è¯„åˆ†ã€RRF èåˆï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1123:| ä¸Šä¸‹æ–‡å‹ç¼© | ç©ºæ–‡ä»¶è¾“å…¥ | è¿è¡Œ context-compressor.sh å¤„ç†ç©ºæ–‡ä»¶ | è¿”å›ç©ºç»“æœï¼Œä¸å´©æºƒ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1225:| `evidence/context-signals.log` | AC-007 | åŠŸèƒ½æµ‹è¯•é€šè¿‡å | æ—¥å¿— | Coder |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1631:- âœ… `graph-rag.sh` å·²é¢„ç•™é‡æ’åºé›†æˆç‚¹ï¼ˆRERANK_ENABLEDï¼Œç¬¬ 90 è¡Œï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1646:- **æ–°å»ºè„šæœ¬**: 3 ä¸ªï¼ˆcontext-compressor.sh, drift-detector.sh, benchmark.shï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1670:- âœ… 4/5 ä¸ªæµ‹è¯•æ–‡ä»¶å·²å­˜åœ¨ï¼ˆcontext-compressor, drift-detector, data-flow-tracing, semantic-anomalyï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1725:   - `graph-rag.sh` çš„é‡æ’åºé›†æˆï¼ˆRERANK_ENABLEDï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1731:   - `context-compressor.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1776:# context-compressor.sh
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1777:compress_context() {
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1797:### æ··åˆæ£€ç´¢ RRF å…¬å¼
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1800:RRF_score(d) = Î£_r [ 1 / (k + rank_r(d)) ]
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/proposal.md:1809:score(d) = w_keyword Ã— RRF_keyword(d) + w_vector Ã— RRF_vector(d) + w_graph Ã— RRF_graph(d)
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/adr-parser/spec.md:64:| context | å¦ | ## Context ç« èŠ‚å†…å®¹ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/adr-parser/spec.md:97:- statusã€contextã€decisionã€consequencesï¼šåŒ MADR
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/adr-parser/spec.md:184:- æ­£ç¡®æå– statusã€contextã€decisionã€consequences
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:1:# Spec: ç»“æ„åŒ–ä¸Šä¸‹æ–‡è¾“å‡ºï¼ˆstructured-context-outputï¼‰
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:4:> **Capability**: structured-context-output
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:27:| 3 | `task_context` | ä»»åŠ¡ä¸Šä¸‹æ–‡ï¼ˆæ„å›¾åˆ†æ/ç›¸å…³ä»£ç ç‰‡æ®µ/è°ƒç”¨é“¾ï¼‰ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:80:### REQ-SCO-004ï¼štask_context ç»“æ„
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:86:  "task_context": {
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:181:**When**: æ‰§è¡Œ `augment-context-global.sh --format json`
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:185:- è¾“å‡ºåŒ…å« `task_context` å­—æ®µ
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:210:### SC-SCO-004ï¼štask_context æ„å›¾åˆ†æ
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:214:**When**: åˆ†ææ„å›¾å¹¶æ„å»º task_context
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:284:| CT-SCO-004 | behavior | REQ-SCO-004, SC-SCO-004 | task_context æ„å›¾åˆ†æ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:297:  "required": ["project_profile", "current_state", "task_context", "recommended_tools", "constraints"],
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/structured-context-output/spec.md:317:    "task_context": {
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/ci-cd-integration/spec.md:312:              issue_number: context.issue.number,
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/ci-cd-integration/spec.md:313:              owner: context.repo.owner,
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/ci-cd-integration/spec.md:314:              repo: context.repo.repo,
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/ci-cd-integration/spec.md:315:              body: '## Architecture Check Failed\n\nPlease review the architecture violations in the workflow logs.\n\n[View Details](' + context.serverUrl + '/' + context.repo.owner + '/' + context.repo.repo + '/actions/runs/' + context.runId + ')'
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/devbooks-adapter/spec.md:144:| å½“å‰å˜æ›´ | `task_context` æˆ–å•ç‹¬å­—æ®µ |
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/devbooks-adapter/spec.md:305:load_devbooks_context() {
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/devbooks-adapter/spec.md:311:æ–°å¢åˆ° `augment-context-global.sh`ï¼š
dev-playbooks/changes/archive/augment-parity-final-gaps/specs/devbooks-adapter/spec.md:315:build_enhanced_context() {
dev-playbooks/changes/archive/algorithm-optimization-parity/specs/greedy-selection/spec.md:4:> **æ¨¡å—**: graph-rag.sh
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:19:| `context-compressor.sh` | `--compress <level>` | medium | æ–°è„šæœ¬ | CT-CLI-003 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:20:| `context-compressor.sh` | `--budget <tokens>` | æ— é™åˆ¶ | æ–°è„šæœ¬ | CT-CLI-004 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:28:| `graph-rag.sh` | `--no-rerank` | false | å‘åå…¼å®¹ | CT-CLI-012 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:29:| `graph-rag.sh` | `--rerank-strategy <s>` | auto | å‘åå…¼å®¹ | CT-CLI-013 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:53:  context_compression: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:59:  context_signals: true
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:70:  rrf_k: 60
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:79:context_signals:
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:230:  "compressed_context": "...",
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:281:    "rrf_k": 60,  // æ–°å¢
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:307:| CT-CLI-003 | `context-compressor.sh --compress` å‚æ•°è§£æ | å‹ç¼©çº§åˆ«æ­£ç¡®åº”ç”¨ | P0 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:432:| AC-001 | CLI: context-compressor.sh | CT-CLI-003, CT-CLI-004 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/contract-plan.md:444:| AC-006 | CLI: graph-rag.sh | CT-CLI-012, CT-CLI-013 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:72:- `evidence/context-compression-test.log`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:73:- `tests/context-compressor.bats` é€šè¿‡
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:128:- å®ç°å…³é”®è¯ + å‘é‡ + å›¾è·ç¦»çš„ RRF èåˆ
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:162:- æä¾› `--enable-context-signals` å¼€å…³
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:168:- æœ¬å˜æ›´çš„ AC-007 ä¸“æ³¨äºç”¨æˆ·äº¤äº’ä¿¡å·çš„æƒé‡è®¡ç®—ï¼ˆä½¿ç”¨ `context` å’Œ `session` APIï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:172:- `evidence/context-signals-test.log`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/design.md:255:| Hybrid Retrieval | Function | æ··åˆæ£€ç´¢ï¼ŒRRF èåˆ | Bash |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:35:  - Candidate Anchorsï¼š`bats tests/context-compressor.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:120:- ä¸Šæ¬¡è¿›åº¦ï¼šå·²ç”Ÿæˆ context-compressorã€hybrid-retrievalã€llm-rerankã€data-flow-tracingã€semantic-anomalyã€graph-storeï¼ˆå« SC-GS-008bï¼‰ã€feature-toggleã€benchmarkã€long-term-memoryã€drift-detector çš„ Red åŸºçº¿æ—¥å¿—
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:165:- `tests/fixtures/context-compressor/order-service.base.ts`ï¼šå‹ç¼©å™¨åŸºç¡€æ ·æœ¬
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:195:| AC-001 | REQ-CC-001~006 | T-CC-001, T-CC-002, T-CC-003, T-CC-004, T-CC-005, T-CC-006, T-CC-007, T-CC-008, T-CC-009, T-CC-010, T-CC-011, T-CC-012, T-CC-013, T-CC-ERROR-001, T-CC-ERROR-002, T-CC-ERROR-003, T-CC-ERROR-004, T-CC-ERROR-005, T-PERF-CC-001 | `dev-playbooks/changes/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/context-compressor-20260119-092722.log` | [ ] | [ ] |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:232:- unitï¼š`bats tests/context-compressor.bats`, `bats tests/drift-detector.bats`, `bats tests/long-term-memory.bats`, `bats tests/semantic-anomaly.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:251:  - æ­¥éª¤ 2ï¼šè¿è¡Œ `context-compressor.sh --mode skeleton`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:309:- M-001 `tests/context-compressor.bats` `T-CC-005`ï¼šç¼“å­˜æ€§èƒ½æµ‹è¯•ä¸ç¨³å®šï¼›å»ºè®®é¢„çƒ­æ¬¡æ•° 1â†’10ï¼Œå¹¶ä½¿ç”¨ P95 ä»£æ›¿å•æ¬¡æµ‹é‡
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:337:| m-001 | long-term-memory.bats:139 | ä»…éªŒè¯ç„¦ç‚¹ç¬¦å·è¢«æå‡ï¼ŒæœªéªŒè¯éç„¦ç‚¹ç¬¦å· | å¢åŠ è´Ÿå‘æ–­è¨€ç¡®ä¿éç„¦ç‚¹ç¬¦å· context_boost=0 | âœ… å·²ä¿®å¤ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:339:| m-003 | context-compressor.bats:481 | å¹¶å‘æµ‹è¯•æœªéš”ç¦» DEVBOOKS_DIR/ç¼“å­˜ | ä¸ºæ¯ä¸ªè¿›ç¨‹è®¾ç½®ç‹¬ç«‹ DEVBOOKS_DIR | âœ… å·²ä¿®å¤ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:382:| context-compressor.bats | 13 | 7 | âš ï¸ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:447:| å•ç‹¬è¿è¡Œ context-layer.bats | âš ï¸ è¿è¡Œç¼“æ…¢ (>60ç§’æœªå®Œæˆ) |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:463:1. **context-compressor.bats**: å¤šä¸ªæµ‹è¯•æ¶‰åŠå¤§æ–‡ä»¶å‹ç¼© (>10MB)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:497:| æ‰¹æ¬¡ 3 | long-term-memory, context-compressor | 21/29 | 72% |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:546:5. **å‹ç¼©æ¯”ä¾‹è°ƒæ•´** - context-compressor.bats T-CC-009
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:565:| context-compressor.bats | 16/20 | âœ… Coder ä¿®å¤æœ‰æ•ˆ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:636:| scripts/context-compressor.sh | `brace_delta()` ä½¿ç”¨ `[!{]` æ¨¡å¼åœ¨ macOS/zsh ä¸å…¼å®¹ | æ”¹ç”¨ `tr -cd '{' \| wc -c` è®¡æ•° | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:637:| scripts/context-compressor.sh | `is_signature_start()` ä¸æ”¯æŒå¤šä¿®é¥°ç¬¦ï¼ˆå¦‚ `private async`ï¼‰ | æ‰©å±•æ­£åˆ™æ”¯æŒ `(modifier)*` | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:638:| scripts/context-compressor.sh | `is_structural_line()` å¤„ç† class æ—¶æ”¶é›†æ•´ä¸ª body | ä»…å¯¹ interface/type/enum æ”¶é›† bodyï¼Œclass åªè¾“å‡ºå£°æ˜ | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:639:| scripts/context-compressor.sh | ä¸æ”¯æŒ Python è¯­æ³• | æ·»åŠ  `def`/`async def` æ£€æµ‹å’Œç¼©è¿›è·Ÿè¸ª | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:640:| scripts/context-compressor.sh | ä¸æ”¯æŒ Python è£…é¥°å™¨ | æ·»åŠ  `@decorator` è¡Œæ£€æµ‹ | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:662:| smoke-context-compressor.txt | 4/4 é€šè¿‡ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:664:| critical-context-compressor.txt | 3/3 é€šè¿‡ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:698:| ç±»å‹å®‰å…¨ä¸åå‘³é“ | src/server.ts, src/context-signal-manager.ts | a053441 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:699:| æµ‹è¯•æ–‡ä»¶è´¨é‡ | tests/hybrid-retrieval.bats, tests/context-compressor.bats, tests/llm-rerank.bats, tests/graph-store.bats | ad2529e |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:700:| æ ¸å¿ƒè„šæœ¬å¯è¯»æ€§ä¸ä¾èµ– | scripts/context-compressor.sh, scripts/call-chain.sh, scripts/graph-store.sh | a460700 |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:730:| C-005 | scripts/context-compressor.sh:16-19 | ä¸´æ—¶æ–‡ä»¶æ¸…ç†ç«æ€æ¡ä»¶ | ä¸´æ—¶æ–‡ä»¶æ³„æ¼ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:738:| M-001 | src/context-signal-manager.ts:196 | ç±»å‹å®ˆå«è¿‡äºå®½æ¾ | å®šä¹‰æ›´ä¸¥æ ¼çš„ç±»å‹å®ˆå« |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:740:| M-008 | scripts/context-compressor.sh:410-543 | `compress_file` å‡½æ•°è¿‡é•¿ï¼ˆ130 è¡Œï¼‰ | æ‹†åˆ†ä¸ºå­å‡½æ•° |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/verification.md:819:| C-005 | scripts/context-compressor.sh:16-19 | ä¸´æ—¶æ–‡ä»¶æ¸…ç†ç«æ€ | ä½¿ç”¨æ•°ç»„ `declare -a _TEMP_FILES=()` | âœ… | å·²å­˜åœ¨ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:7:| 2026-01-19 04:51 | CONSTRAINT_CHANGE | ä¸Šä¸‹æ–‡å‹ç¼©å®ç°ä½¿ç”¨åŸºäºè§„åˆ™çš„ç­¾åæŠ½å–ï¼Œæœªæ¥å…¥ tree-sitter ASTï¼ˆä¸"åŸºäº AST"çº¦æŸä¸ä¸€è‡´ï¼‰ | scripts/context-compressor.sh | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:8:| 2026-01-19 04:51 | CONSTRAINT_CHANGE | å•æ–‡ä»¶å¿«é€Ÿæ¨¡å¼å¯èƒ½å¯¼è‡´å‹ç¼©ç‡è¶…å‡º 50% ä¸Šé™ | scripts/context-compressor.sh | âœ… (IMPL_ONLY) |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:13:| 2026-01-19 05:38 | IMPLEMENTATION_GAP | config/features.yaml ç¼ºå°‘æ–°èƒ½åŠ›å¼€å…³ï¼ˆcontext_compressor, drift_detector, hybrid_retrieval, context_signals, benchmark, performance_regressionï¼‰ | config/features.yaml | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:14:| 2026-01-19 05:38 | SPEC_DRIFT | truth spec çš„ long-term-memoryï¼ˆmemory_* APIï¼‰ä¸æœ¬å˜æ›´ AC-007ï¼ˆcontext signalsï¼‰ä¸ä¸€è‡´ | dev-playbooks/specs/long-term-memory/spec.md, dev-playbooks/changes/20260118-2112-enhance-code-intelligence-capabilities/design.md | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:16:| 2026-01-19 05:38 | IMPLEMENTATION_GAP | ç¼ºå°‘ --enable-all-features ä¸€é”®å¯ç”¨å…¥å£ | scripts/graph-rag.sh, dev-playbooks/changes/20260118-2112-enhance-code-intelligence-capabilities/design.md | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:17:| 2026-01-19 06:20 | DESIGN_GAP | ä¸Šä¸‹æ–‡å‹ç¼©æœªå®šä¹‰ä¸æ”¯æŒè¯­è¨€çš„é”™è¯¯åé¦ˆï¼ˆæ–°å¢ T-CC-ERROR-004 æœŸæœ›å‹å¥½æç¤ºï¼‰ | dev-playbooks/specs/context-compressor/spec.md, tests/context-compressor.bats | âœ… (IMPL_ONLY) |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:20:| 2026-01-20 19:30 | TEST_QUALITY | ä¿®å¤ M-004ï¼štests/context-compressor.bats:481-522 å¹¶å‘æµ‹è¯•æ·»åŠ ç¼“å­˜éš”ç¦»éªŒè¯ï¼ˆéªŒè¯ç¼“å­˜ç›®å½•åˆ›å»ºå’Œäº¤å‰æ±¡æŸ“æ£€æµ‹ï¼‰ | tests/context-compressor.bats | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:23:| 2026-01-20 19:10 | REFACTOR | ä¿®å¤ M-008ï¼šé‡æ„ compress_file å‡½æ•°ï¼Œæ‹†åˆ†ä¸º _cf_process_signature_line ç­‰å­å‡½æ•°ï¼Œé™ä½å¤æ‚åº¦ï¼ˆ130è¡Œâ†’70è¡Œï¼‰ - **å·²å›æ»š**ï¼Œé‡æ„å¼•å…¥é‡å¤è¾“å‡º bug | scripts/context-compressor.sh | âœ… (IMPL_ONLY) |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:24:| 2026-01-20 19:10 | REFACTOR | ä¿®å¤ M-013ï¼šé‡æ„ _main_build_output_json å‡½æ•°ï¼Œä½¿ç”¨å…¨å±€å˜é‡å‡å°‘å‚æ•°æ•°é‡ï¼ˆ9â†’0ï¼‰ | scripts/context-compressor.sh | âœ… |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:25:| 2026-01-21 00:30 | BUG_FIX | å›æ»š M-008 é‡æ„ï¼šæ¢å¤åŸå§‹ compress_file å‡½æ•°ï¼Œä¿®å¤é‡å¤è¾“å‡º bugï¼ˆconstructor å’Œç­¾åè¢«é‡å¤è¾“å‡ºï¼Œå¯¼è‡´å‹ç¼©ç‡ >1ï¼‰ | scripts/context-compressor.sh | âœ… (IMPL_ONLY) |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:34:| 2026-01-19 05:38 | IMPLEMENTATION_GAP | LLM Mock æœºåˆ¶æœªå®ç° | graph-rag.sh å·²è°ƒç”¨ common.sh çš„ llm_callï¼Œæ”¯æŒ LLM_MOCK_* ç¯å¢ƒå˜é‡ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:39:| 2026-01-19 | IMPLEMENTATION_GAP | config/features.yaml ç¼ºå°‘æ–°èƒ½åŠ›å¼€å…³ | å·²è¡¥å…¨æ‰€æœ‰æ–°èƒ½åŠ›å¼€å…³ï¼ˆcontext_compressor, drift_detector, hybrid_retrieval, context_signals, benchmark, performance_regression ç­‰ï¼‰ï¼Œé»˜è®¤å€¼è®¾ä¸º false |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/deviation-log.md:59:**å»ºè®®**ï¼šåœ¨ design.md ä¸­æ˜ç¡®é‡‡ç”¨ context signals æˆ–è¡¥é½ long-term-memory å®ç°ã€‚
dev-playbooks/changes/archive/algorithm-optimization-parity/specs/boundary-detection/spec.md:4:> **æ¨¡å—**: boundary-detector.sh / graph-rag.sh
dev-playbooks/changes/archive/algorithm-optimization-parity/specs/priority-sorting/spec.md:4:> **æ¨¡å—**: graph-rag.sh
dev-playbooks/changes/archive/algorithm-optimization-parity/specs/context-weighting/spec.md:92:- **Given**: `context_window` ä¸ºç©º
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:24:- `scripts/context-compressor.sh`ï¼ˆä¸Šä¸‹æ–‡å‹ç¼©è„šæœ¬ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:25:- `tests/context-compressor.bats`ï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:26:- `evidence/context-compression-test.log`ï¼ˆè¯æ®æ–‡ä»¶ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:29:- æ–°å¢æ–‡ä»¶ï¼š`scripts/context-compressor.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:30:- æ–°å¢æµ‹è¯•ï¼š`tests/context-compressor.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:37:- `tests/context-compressor.bats` å…¨éƒ¨é€šè¿‡
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:44:- [x] MP1.1 åˆ›å»º `scripts/context-compressor.sh` è„šæœ¬éª¨æ¶ï¼Œå®šä¹‰æ¥å£ç­¾åï¼ˆè¾“å…¥ï¼šæ–‡ä»¶è·¯å¾„ï¼Œè¾“å‡ºï¼šå‹ç¼©åå†…å®¹ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:48:- [x] MP1.5 ç¼–å†™ `tests/context-compressor.bats`ï¼Œè¦†ç›– 3 ç§å‹ç¼©çº§åˆ«å’Œè¾¹ç•Œæ¡ä»¶
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:49:- [x] MP1.6 è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¯æ®æ–‡ä»¶ `evidence/context-compression-test.log`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:164:**ç›®çš„**: å®ç°å…³é”®è¯ + å‘é‡ + å›¾è·ç¦»çš„ RRF èåˆï¼ŒMRR@10 > 0.65ã€‚
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:177:- å®ç° RRF èåˆç®—æ³•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:189:- [x] MP5.1 åœ¨ `scripts/embedding.sh` ä¸­å®ç° RRF èåˆç®—æ³•ï¼ˆReciprocal Rank Fusionï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:193:- [x] MP5.5 ç¼–å†™ `tests/hybrid-retrieval.bats`ï¼Œè¦†ç›– RRF èåˆã€æƒé‡é…ç½®ã€A/B æµ‹è¯•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:236:- `src/context-signal-manager.ts`ï¼ˆä¿¡å·ç®¡ç†ç»„ä»¶ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:239:- `evidence/context-signals-test.log`ï¼ˆè¯æ®æ–‡ä»¶ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:242:- æ–°å¢æ–‡ä»¶ï¼š`src/context-signal-manager.ts`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:250:- æä¾› `--enable-context-signals` å¼€å…³
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:259:- [x] MP7.2 å®ç° `src/context-signal-manager.ts`ï¼ˆä¿¡å·è®°å½•ã€æŸ¥è¯¢ã€è¡°å‡é€»è¾‘ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:262:- [x] MP7.5 æ·»åŠ  `--enable-context-signals` å¼€å…³æ”¯æŒ
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:264:- [x] MP7.7 è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¯æ®æ–‡ä»¶ `evidence/context-signals-test.log`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:408:- `scripts/context-compressor.sh`ï¼ˆä¸Šä¸‹æ–‡å‹ç¼©ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:411:- `src/context-signal-manager.ts`ï¼ˆä¸Šä¸‹æ–‡å±‚ä¿¡å·ç®¡ç†ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:422:scripts/context-compressor.sh â†’ tree-sitter
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:426:src/context-signal-manager.ts â†’ SQLite
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:672:#### 1. RRF èåˆç®—æ³•ï¼ˆMP5ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:685:FUNCTION rrf_fusion(keyword_results, vector_results, graph_results, weights):
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:686:  k = 60  // RRF å¸¸æ•°
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/tasks.md:772:FUNCTION compress_context(file_path, compress_level):
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-layer/spec.md:4:> **Capability**: context-layer
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-layer/spec.md:105:context_signals:
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-layer/spec.md:183:**Given**: é…ç½® `context_signals.enabled = false`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-layer/spec.md:209:- `graph-rag.sh`ï¼šé›†æˆä¿¡å·åˆ°æ£€ç´¢æƒé‡
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-layer/spec.md:214:- `graph-rag.sh`ï¼šä½¿ç”¨ä¸Šä¸‹æ–‡ä¿¡å·
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:1:# è§„æ ¼ Deltaï¼šæ··åˆæ£€ç´¢ï¼ˆRRF èåˆï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:13:### REQ-HR-001ï¼šRRF èåˆç®—æ³•
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:15:ç³»ç»Ÿåº”å®ç° Reciprocal Rank Fusion (RRF) ç®—æ³•èåˆå¤šç§æ£€ç´¢ç»“æœï¼š
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:18:RRF_score(d) = Î£_r [ 1 / (k + rank_r(d)) ]
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:27:score(d) = w_keyword Ã— RRF_keyword(d) + w_vector Ã— RRF_vector(d) + w_graph Ã— RRF_graph(d)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:70:  rrf_k: 60
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:131:- ä½¿ç”¨ RRF èåˆç»“æœ
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:211:- `graph-rag.sh`ï¼šä½¿ç”¨æ··åˆæ£€ç´¢ç»“æœ
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/hybrid-retrieval/spec.md:223:| RRF èåˆè®¡ç®— | å»¶è¿Ÿ | < 50ms |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-compressor/spec.md:4:> **Capability**: context-compressor
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-compressor/spec.md:34:context_compress --compress <low|medium|high> <files>
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-compressor/spec.md:73:**When**: è¿è¡Œ `context_compress --compress low src/service.ts`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-compressor/spec.md:90:**When**: è¿è¡Œ `context_compress --budget 3000 --hotspot src/`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/context-compressor/spec.md:124:**æ‰©å±•è‡ª**ï¼š`dev-playbooks/specs/context-compressor/spec.md` v1.0.0
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:17:**æ–°è¦æ±‚**ï¼šé‡æ’åºä½œä¸º `graph-rag.sh` çš„é»˜è®¤ç®¡çº¿
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:21:graph-rag.sh <query>  # è‡ªåŠ¨è°ƒç”¨ reranker.sh
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:24:graph-rag.sh <query> --no-rerank
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:50:graph-rag.sh <query> --rerank-strategy <llm|heuristic>
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:108:**When**: è¿è¡Œ `graph-rag.sh "graph query optimization"`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:121:**When**: è¿è¡Œ `graph-rag.sh <query> --rerank-strategy llm`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:134:**When**: è¿è¡Œ `graph-rag.sh <query> --rerank-strategy heuristic`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:161:**When**: è¿è¡Œ `graph-rag.sh <query> --no-rerank`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/llm-rerank/spec.md:190:4. é›†æˆåˆ° graph-rag.sh ç®¡çº¿
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/specs/benchmark/spec.md:237:- `context-compressor.sh`ï¼šå‹ç¼©ç‡è¯„æµ‹
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/major-issues-fix-plan.md:5:### M-001: context-compressor ç¼“å­˜æ€§èƒ½æµ‹è¯•ä¸ç¨³å®š
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/major-issues-fix-plan.md:6:- **ä½ç½®**: tests/context-compressor.bats:T-CC-005
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:31:| `scripts/graph-rag.sh` | ä¿®æ”¹ | èƒŒåŒ…ç®—æ³•ã€TF-IDFã€å»é‡èåˆã€è·ç¦»åº¦é‡ã€LLM é‡æ’åº |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:36:| `tests/graph-rag.bats` | ä¿®æ”¹ | èƒŒåŒ…ç®—æ³•ã€TF-IDFã€å»é‡æµ‹è¯• |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:45:| `src/server.ts` | è°ƒç”¨ graph-rag.shã€impact-analyzer.shã€intent-learner.shï¼ˆé€šè¿‡ runScriptï¼‰ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:48:| `hooks/augment-context-global.sh` | å¼•ç”¨ llm_rerank é…ç½®å’Œ reranker å·¥å…· |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:56:| `scripts/graph-rag.sh` | ç›´æ¥ä¿®æ”¹ | ğŸ”´ é«˜ | æ ¸å¿ƒæ£€ç´¢é€»è¾‘ï¼Œ5 ä¸ªç®—æ³•æ¨¡å—å˜æ›´ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:67:server.ts â”€â”€è°ƒç”¨â”€â”€> graph-rag.sh â”€â”€åŠ è½½â”€â”€> common.sh
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:82:                         â””â”€â”€> apply_context_boost_multiplicative()
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:87:#### graph-rag.sh è¢«å¼•ç”¨ä½ç½®
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:91:| `src/server.ts` | 426 | `runScript("graph-rag.sh", [...])` |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:92:| `tests/graph-rag.bats` | å…¨æ–‡ä»¶ | æµ‹è¯•è„šæœ¬ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:94:| `tests/subgraph-retrieval.bats` | å¤šå¤„ | é›†æˆæµ‹è¯• |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:132:| graph-rag.sh | `select_within_budget()` | `knapsack_select()` | æ›¿æ¢ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:133:| graph-rag.sh | `extract_keywords()` | `extract_keywords_tfidf()` | æ›¿æ¢ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:134:| graph-rag.sh | `merge_candidates()` | `merge_candidates_with_fusion()` | æ›¿æ¢ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:135:| graph-rag.sh | `calculate_distance()` | `calculate_multidim_distance()` | æ›¿æ¢ |
dev-playbooks/changes/archive/algorithm-optimization-parity/impact-analysis.md:140:| intent-learner.sh | `apply_context_boost()` | `apply_context_boost_multiplicative()` | æ›¿æ¢ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/COLLABORATION-SUMMARY.md:48:- **æ ¸å¿ƒæµ‹è¯•**: T-HR-001ï¼ˆRRF èåˆç®—æ³•ï¼‰ã€T-HR-004ï¼ˆMRR@10 è´¨é‡ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/COLLABORATION-SUMMARY.md:143:1. å®ç° `scripts/context-compressor.sh`ï¼ˆä½¿ 11 ä¸ªæµ‹è¯•é€šè¿‡ï¼‰
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/green-final/full-test-20260120.summary.md:9:| context-compressor.bats | 16/20 | 80% |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/fix-report-m008-rollback.md:5:**æ¶‰åŠæ–‡ä»¶**: `scripts/context-compressor.sh`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/fix-report-m008-rollback.md:120:scripts/context-compressor.sh --enable-all-features --mode skeleton --compress high /tmp/test.ts
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/fix-report-m008-rollback.md:135:è¿è¡Œå®Œæ•´çš„ context-compressor æµ‹è¯•å¥—ä»¶ï¼š
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/fix-report-m008-rollback.md:225:å®Œæ•´æµ‹è¯•æ—¥å¿—: `/tmp/context-compressor-test-results.txt`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/fix-report-m008-rollback.md:229:- ä¿®å¤å‰: `scripts/context-compressor.sh` (M-008 é‡æ„ç‰ˆæœ¬)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/fix-report-m008-rollback.md:230:- ä¿®å¤å: `scripts/context-compressor.sh` (åŸå§‹ç‰ˆæœ¬)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/P0-FIXES-SUMMARY.md:91:### AC-001: ä¸Šä¸‹æ–‡å‹ç¼© (context-compressor.bats)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/P0-FIXES-SUMMARY.md:167:- **T-CC-001, T-CC-009, T-CC-ERROR-001~004, T-PERF-CC-001**: context-compressor è„šæœ¬å®ç°é—®é¢˜
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/P0-FIXES-SUMMARY.md:212:- [ ] **åŠŸèƒ½å¼€å…³**: è¯»å– `features.context_signals.enabled`ï¼Œç¦ç”¨æ—¶ä¸è®°å½•ä¿¡å·
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/P0-FIXES-SUMMARY.md:216:æ–‡ä»¶: scripts/graph-rag.sh
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/P0-FIXES-SUMMARY.md:232:æ–‡ä»¶: scripts/graph-rag.sh æˆ– config/features.yaml
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/green-final/retest-20260120-summary.md:20:| context-compressor.bats | 13 | 7 | 0 | âš ï¸ |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/green-final/retest-20260120-summary.md:36:- `context-compressor.bats`: å¤šä¸ªæ€§èƒ½æµ‹è¯•è¶…é˜ˆå€¼
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/green-final/retest-20260120-summary.md:44:- `context-compressor.bats`: compression ratio è¾¹ç•Œ (T-CC-009)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:30:**æµ‹è¯•æ–‡ä»¶**: `tests/context-compressor.bats`
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:37:# (in test file tests/context-compressor.bats, line 116)
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:41:**æ ¹æœ¬åŸå› **: `scripts/context-compressor.sh` è„šæœ¬ä¸å­˜åœ¨
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:56:**é¢„æœŸè¡Œä¸º**: æ‰€æœ‰æµ‹è¯•åº”åœ¨ `context-compressor.sh` å®ç°åå˜ä¸º Green
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:196:| `context-compressor-20260119-031846.log` | 1.7 KB | ä¸Šä¸‹æ–‡å‹ç¼©æµ‹è¯•å¤±è´¥æ—¥å¿— |
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:209:1. **å®ç° `context-compressor.sh`**
dev-playbooks/changes/archive/20260118-2112-enhance-code-intelligence-capabilities/evidence/red-baseline/RED-BASELINE-SUMMARY.md:278:1. å®ç° `scripts/context-compressor.sh`ï¼ˆä½¿æµ‹è¯• T-CC-001~011 é€šè¿‡ï¼‰
