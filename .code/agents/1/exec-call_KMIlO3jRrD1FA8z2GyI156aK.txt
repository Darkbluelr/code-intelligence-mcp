total 368
drwxr-xr-x@  35 ozbombor  staff   1120 Jan 18 09:53 .
drwxr-xr-x   35 ozbombor  staff   1120 Jan 18 06:25 ..
-rw-r--r--@   1 ozbombor  staff  14340 Jan 18 09:58 .DS_Store
drwxr-xr-x    8 ozbombor  staff    256 Jan 13 20:35 .ckb
drwxr-xr-x    4 ozbombor  staff    128 Jan 17 20:46 .claude
drwxr-xr-x    3 ozbombor  staff     96 Jan 18 09:53 .code
drwxr-xr-x    4 ozbombor  staff    128 Jan 18 09:59 .codex
drwxr-xr-x   12 ozbombor  staff    384 Jan 18 08:08 .devbooks
drwxr-xr-x   13 ozbombor  staff    416 Jan 18 10:11 .git
drwxr-xr-x    3 ozbombor  staff     96 Jan 16 18:33 .github
-rw-r--r--@   1 ozbombor  staff    291 Jan 17 16:29 .gitignore
-rw-r--r--    1 ozbombor  staff   7936 Jan 16 18:35 .gitlab-ci.yml.template
-rw-r--r--    1 ozbombor  staff      0 Jan 18 06:35 .migrate.lock
drwxr-xr-x    4 ozbombor  staff    128 Jan 14 19:56 .npm-cache
-rw-r--r--    1 ozbombor  staff    340 Jan 17 01:29 .npmignore
-rw-r--r--    1 ozbombor  staff    793 Jan 14 19:04 AGENTS.md
-rw-r--r--    1 ozbombor  staff    774 Jan 14 19:04 CLAUDE.md
-rw-r--r--    1 ozbombor  staff   8687 Jan 16 22:07 README.md
drwxr-xr-x    3 ozbombor  staff     96 Jan 17 01:50 Users
drwxr-xr-x    4 ozbombor  staff    128 Jan 10 16:42 bin
drwxr-xr-x    8 ozbombor  staff    256 Jan 17 18:14 config
drwxr-xr-x   11 ozbombor  staff    352 Jan 17 17:08 dev-playbooks
drwxr-xr-x    6 ozbombor  staff    192 Jan 16 02:12 dist
drwxr-xr-x    5 ozbombor  staff    160 Jan 18 06:45 docs
drwxr-xr-x    7 ozbombor  staff    224 Jan 16 18:54 hooks
-rw-r--r--    1 ozbombor  staff  57687 Jan 13 23:31 index.scip
-rwxr-xr-x    1 ozbombor  staff   9427 Jan 10 19:27 install.sh
drwxr-xr-x  106 ozbombor  staff   3392 Jan 17 16:30 node_modules
-rw-r--r--    1 ozbombor  staff  48490 Jan 16 00:05 package-lock.json
-rw-r--r--    1 ozbombor  staff   1230 Jan 18 04:22 package.json
-rw-r--r--    1 ozbombor  staff   2173 Jan 15 00:24 parse-scip.js
drwxr-xr-x   34 ozbombor  staff   1088 Jan 18 07:25 scripts
drwxr-xr-x    4 ozbombor  staff    128 Jan 16 03:09 src
drwxr-xr-x   41 ozbombor  staff   1312 Jan 18 08:01 tests
-rw-r--r--    1 ozbombor  staff    376 Jan 10 16:39 tsconfig.json
./tests/hotspot-analyzer.bats:2:# hotspot-analyzer.bats - AC-001 Hotspot Algorithm Acceptance Tests
./tests/hotspot-analyzer.bats:6:# Run: bats tests/hotspot-analyzer.bats
./tests/intent-analysis.bats:2:# intent-analysis.bats - AC-002 Intent Analysis Acceptance Tests
./tests/intent-analysis.bats:6:# Run: bats tests/intent-analysis.bats
./tests/performance.bats:2:# performance.bats - Performance Benchmark Tests
./tests/performance.bats:6:# Run: bats tests/performance.bats
./tests/boundary-detector.bats:2:# boundary-detector.bats - AC-004 Boundary Detection Acceptance Tests
./tests/boundary-detector.bats:6:# Run: bats tests/boundary-detector.bats
./tests/scip-to-graph.bats:2:# scip-to-graph.bats - SCIP 解析转换测试
./tests/incremental-indexing.bats:2:# incremental-indexing.bats - AC-007 Incremental Indexing Acceptance Tests
./tests/incremental-indexing.bats:6:# Run: bats tests/incremental-indexing.bats
./tests/augment-context.bats:2:# augment-context.bats - Structured context output tests
./tests/cod-visualizer.bats:2:# cod-visualizer.bats - COD 架构可视化模块测试
./tests/mcp-contract.bats:2:# mcp-contract.bats - MCP Tool Contract Tests
./tests/mcp-contract.bats:6:# Run: bats tests/mcp-contract.bats
./tests/federation-lite.bats:2:# federation-lite.bats - Federation Lite Contract Tests
./tests/federation-lite.bats:6:# Run: bats tests/federation-lite.bats
./tests/data-flow-tracing.bats:2:# data-flow-tracing.bats - AC-004 Data Flow Tracing Acceptance Tests
./tests/data-flow-tracing.bats:6:# Run: bats tests/data-flow-tracing.bats
./tests/intent-learner.bats:2:# intent-learner.bats - 意图偏好学习模块测试
./tests/daemon.bats:2:# daemon.bats - 常驻守护进程测试
./tests/graph-store.bats:2:# graph-store.bats - SQLite 图存储测试
./tests/graph-rag.bats:2:# graph-rag.bats - M4: Subgraph Smart Pruning Acceptance Tests
./tests/graph-rag.bats:6:# Run: bats tests/graph-rag.bats
./tests/regression.bats:2:# regression.bats - Backward Compatibility Regression Tests
./tests/regression.bats:6:# Run: bats tests/regression.bats
./tests/pattern-learner.bats:2:# pattern-learner.bats - Pattern Learning Acceptance Tests
./tests/pattern-learner.bats:6:# Run: bats tests/pattern-learner.bats
./tests/adr-parser.bats:2:# adr-parser.bats - ADR parsing and linking tests
./tests/feature-toggle.bats:2:# feature-toggle.bats - AC-010 Feature Toggle Acceptance Tests
./tests/feature-toggle.bats:6:# Run: bats tests/feature-toggle.bats
./tests/cache-manager.bats:2:# cache-manager.bats - Cache Manager Contract Tests
./tests/cache-manager.bats:6:# Run: bats tests/cache-manager.bats
./tests/ci.bats:2:# ci.bats - CI/CD architecture check tests
./tests/upgrade-capabilities.bats:2:# tests/upgrade-capabilities.bats
./tests/llm-rerank.bats:2:# llm-rerank.bats - LLM 重排序测试
./tests/context-layer.bats:2:# context-layer.bats - Context Layer Contract Tests
./tests/context-layer.bats:6:# Run: bats tests/context-layer.bats
./tests/subgraph-retrieval.bats:2:# subgraph-retrieval.bats - AC-003 Subgraph Retrieval Acceptance Tests
./tests/subgraph-retrieval.bats:6:# Run: bats tests/subgraph-retrieval.bats
./tests/impact-analyzer.bats:2:# impact-analyzer.bats - 传递性影响分析测试
./tests/bug-locator.bats:2:# bug-locator.bats - AC-009 Bug Locator Regression Tests
./tests/bug-locator.bats:6:# Run: bats tests/bug-locator.bats
./tests/intent-classification.bats:2:# intent-classification.bats - Intent Classification Contract Tests
./tests/intent-classification.bats:6:# Run: bats tests/intent-classification.bats
./tests/dependency-guard.bats:2:# dependency-guard.bats - Dependency Guard Contract Tests
./tests/dependency-guard.bats:6:# Run: bats tests/dependency-guard.bats
./tests/ast-delta.bats:2:# ast-delta.bats - AST Delta 增量索引模块测试
./tests/vuln-tracker.bats:2:# vuln-tracker.bats - 安全漏洞基础追踪模块测试
total 1504
drwxr-xr-x  41 ozbombor  staff   1312 Jan 18 08:01 .
drwxr-xr-x@ 35 ozbombor  staff   1120 Jan 18 09:53 ..
-rw-r--r--   1 ozbombor  staff   4379 Jan 16 16:51 adr-parser.bats
-rw-r--r--   1 ozbombor  staff  24166 Jan 16 05:07 ast-delta.bats
-rw-r--r--   1 ozbombor  staff  16606 Jan 16 18:58 augment-context.bats
-rw-r--r--   1 ozbombor  staff  12505 Jan 17 01:02 boundary-detector.bats
-rw-r--r--   1 ozbombor  staff  11143 Jan 16 19:07 bug-locator.bats
-rw-r--r--   1 ozbombor  staff  32328 Jan 17 01:06 cache-manager.bats
-rw-r--r--   1 ozbombor  staff   4606 Jan 16 18:59 ci.bats
-rwxr-xr-x   1 ozbombor  staff  17863 Jan 16 01:31 cod-visualizer.bats
-rw-r--r--   1 ozbombor  staff  12395 Jan 17 16:58 context-compressor.bats
-rw-r--r--   1 ozbombor  staff  18511 Jan 14 21:49 context-layer.bats
-rw-r--r--   1 ozbombor  staff  25910 Jan 16 21:13 daemon.bats
-rw-r--r--   1 ozbombor  staff  24466 Jan 17 18:20 data-flow-tracing.bats
-rw-r--r--   1 ozbombor  staff  28795 Jan 15 03:42 dependency-guard.bats
-rw-r--r--   1 ozbombor  staff   8677 Jan 17 16:59 drift-detector.bats
-rw-r--r--   1 ozbombor  staff   7497 Jan 14 20:36 feature-toggle.bats
-rw-r--r--   1 ozbombor  staff  60099 Jan 17 01:02 federation-lite.bats
drwxr-xr-x   7 ozbombor  staff    224 Jan 18 03:48 fixtures
-rw-r--r--   1 ozbombor  staff  28665 Jan 17 01:05 graph-rag.bats
-rw-r--r--   1 ozbombor  staff  26418 Jan 16 16:57 graph-store.bats
drwxr-xr-x   3 ozbombor  staff     96 Jan 16 02:14 helpers
-rw-r--r--   1 ozbombor  staff  15880 Jan 17 01:04 hotspot-analyzer.bats
-rwxr-xr-x   1 ozbombor  staff  38311 Jan 17 01:08 impact-analyzer.bats
-rw-r--r--   1 ozbombor  staff   9741 Jan 14 20:37 incremental-indexing.bats
-rw-r--r--   1 ozbombor  staff   4176 Jan 14 20:38 intent-analysis.bats
-rw-r--r--   1 ozbombor  staff  16967 Jan 17 01:09 intent-classification.bats
-rw-r--r--   1 ozbombor  staff  46241 Jan 17 01:03 intent-learner.bats
-rw-r--r--   1 ozbombor  staff   8708 Jan 17 16:57 keystroke-cancel.bats
-rw-r--r--   1 ozbombor  staff   6904 Jan 17 16:54 llm-provider.bats
-rw-r--r--   1 ozbombor  staff  14152 Jan 15 14:19 llm-rerank.bats
-rw-r--r--   1 ozbombor  staff  11518 Jan 17 16:59 long-term-memory.bats
-rw-r--r--   1 ozbombor  staff  10261 Jan 15 03:46 mcp-contract.bats
-rw-r--r--   1 ozbombor  staff  26328 Jan 17 01:05 pattern-learner.bats
-rw-r--r--   1 ozbombor  staff  11967 Jan 14 21:51 performance.bats
-rw-r--r--   1 ozbombor  staff  10821 Jan 16 19:01 regression.bats
-rw-r--r--   1 ozbombor  staff   9882 Jan 15 03:43 scip-to-graph.bats
-rw-r--r--   1 ozbombor  staff   8980 Jan 17 16:55 semantic-anomaly.bats
-rw-r--r--   1 ozbombor  staff   8123 Jan 14 20:43 subgraph-retrieval.bats
-rwxr-xr-x   1 ozbombor  staff  44461 Jan 18 08:01 upgrade-capabilities.bats
-rw-r--r--   1 ozbombor  staff  21744 Jan 16 01:31 vuln-tracker.bats
tests/graph-store.bats:25:SCIP_TO_GRAPH="$SCRIPT_DIR/scip-to-graph.sh"
tests/graph-store.bats:512:@test "test_edge_types_python: scip-to-graph produces IMPLEMENTS edges for annotated Python" {
tests/graph-store.bats:524:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse (python)"
tests/graph-store.bats:545:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse (fallback)"
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:10:  - `scripts/scip-to-graph.sh` 在缺少本地文件时会下载 `scip.proto`（存在网络依赖，离线/受限网络下会断链）
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:18:  2) `scripts/scip-to-graph.sh` 默认离线可运行（不依赖在线下载）
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:28:   - 当不满足条件时回退到现有全量索引（生成 `index.scip`），并在成功后调用 `scripts/scip-to-graph.sh parse --incremental` 同步 `graph.db`
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:30:2) `scripts/scip-to-graph.sh`：离线化 `scip.proto` 来源
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:45:- 脚本：`scripts/indexer.sh`、`scripts/ast-delta.sh`、`scripts/scip-to-graph.sh`
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:71:- Indexer 责任边界会更清晰：监听/节流/调度 vs 解析/写库（增量由 `ast-delta.sh` 负责，SCIP 解析由 `scip-to-graph.sh` 负责）。
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:94:- `scripts/indexer.sh`：文件变更触发时引入“增量优先（`ast-delta.sh update`）+ 全量回退（生成 `index.scip` + `scip-to-graph.sh parse --incremental`）”的调度逻辑
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:95:- `scripts/scip-to-graph.sh`：`scip.proto` 获取策略改为“本地优先”，默认离线可运行
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:105:- `scripts/scip-to-graph.sh`
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:125:- [x] **平台依赖**：当前 `scip-to-graph.sh` 依赖在线下载 `scip.proto`（受限网络/离线会失败），本变更将其离线化
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:146:- `index.scip`：回退路径产物；回退成功后需同步更新图数据（`scip-to-graph.sh parse --incremental`）
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:153:  - `scripts/indexer.sh` → `scripts/scip-to-graph.sh`（回退后同步图）
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:160:  - `tests/scip-to-graph.bats`：覆盖 `parse/--incremental/--force` 等路径；离线 proto 改造不能破坏这些场景
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:163:  - 离线环境下 `scip-to-graph.sh parse` 可运行的测试：确保不依赖在线下载
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:195:  2) `scripts/scip-to-graph.sh`：仅替换 proto 发现/获取策略，不改解析输出结构与统计字段
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:205:- [PP-2] `scripts/scip-to-graph.sh:ensure_scip_proto()`（或其等价的新 proto 解析入口）- 所有 SCIP 解析路径共用的关键前置
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:235:- `scip-to-graph.sh` 保留旧路径（可选下载）作为兼容后门，但默认优先离线。
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:246:   - 当增量不可用或变更文件数超过阈值时，仍能生成 `index.scip`，并通过 `scripts/scip-to-graph.sh parse --incremental` 更新 `graph.db`。
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:248:   - 在无网络环境下，`scripts/scip-to-graph.sh parse` 不依赖下载 `scip.proto` 仍可执行（至少能走可预期的本地路径/明确报错，不出现“隐式网络依赖失败”）。
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:256:- 脚本基本可用性：`./scripts/indexer.sh --help`、`./scripts/scip-to-graph.sh --help`
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:257:- 离线验证（示例）：断网或限制网络后运行 `./scripts/scip-to-graph.sh parse --incremental`（需要本地已有 `index.scip` 与离线 proto 策略落地）
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:313:- DP-02 选 A：将固定版本 `scip.proto` vendoring 到仓库，默认离线可运行；仅在显式允许时才下载更新，消除 `scripts/scip-to-graph.sh` 的隐式网络依赖。
dev-playbooks/changes/optimize-indexing-pipeline-20260117/proposal.md:319:- [ ] `scripts/scip-to-graph.sh` 默认离线运行：在 `/tmp/scip.proto` 不存在且网络受限时，不触发下载；能从 vendored proto 加载并完成 `parse --incremental`，或给出可诊断的明确错误。
tests/scip-to-graph.bats:2:# scip-to-graph.bats - SCIP 解析转换测试
tests/scip-to-graph.bats:23:SCIP_TO_GRAPH="$SCRIPT_DIR/scip-to-graph.sh"
tests/scip-to-graph.bats:42:@test "SC-SP-001: scip-to-graph parse creates nodes and edges from SCIP index" {
tests/scip-to-graph.bats:50:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse"
tests/scip-to-graph.bats:68:@test "SC-SP-002: scip-to-graph maps Definition (symbol_roles=1) to DEFINES" {
tests/scip-to-graph.bats:75:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse"
tests/scip-to-graph.bats:84:@test "SC-SP-003: scip-to-graph maps ReadAccess (symbol_roles=8) to CALLS" {
tests/scip-to-graph.bats:91:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse"
tests/scip-to-graph.bats:104:@test "SC-SP-004: scip-to-graph parse fails when SCIP index not found" {
tests/scip-to-graph.bats:111:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh error handling"
tests/scip-to-graph.bats:118:@test "SC-SP-005: scip-to-graph falls back to regex when SCIP parsing fails" {
tests/scip-to-graph.bats:134:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh fallback"
tests/scip-to-graph.bats:164:@test "SC-SP-006: scip-to-graph detects index newer than database" {
tests/scip-to-graph.bats:174:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse"
tests/scip-to-graph.bats:182:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh incremental"
tests/scip-to-graph.bats:188:@test "SC-SP-007: scip-to-graph skips parse when database is up-to-date" {
tests/scip-to-graph.bats:198:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse"
tests/scip-to-graph.bats:206:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh incremental skip"
tests/scip-to-graph.bats:212:@test "SC-SP-008: scip-to-graph force rebuilds database" {
tests/scip-to-graph.bats:220:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh parse"
tests/scip-to-graph.bats:225:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh force"
tests/scip-to-graph.bats:231:@test "SC-SP-009: scip-to-graph outputs parse statistics in JSON" {
tests/scip-to-graph.bats:239:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh stats"
tests/scip-to-graph.bats:250:@test "SC-SP-010: scip-to-graph uses custom SCIP_INDEX_PATH" {
tests/scip-to-graph.bats:260:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh custom path"
tests/scip-to-graph.bats:273:@test "AC-N04: scip-to-graph parses all TypeScript files" {
tests/scip-to-graph.bats:281:    skip_if_not_ready "$status" "$output" "scip-to-graph.sh coverage"
tests/upgrade-capabilities.bats:57:    source scripts/scip-to-graph.sh
tests/upgrade-capabilities.bats:91:    source scripts/scip-to-graph.sh
tests/upgrade-capabilities.bats:123:    source scripts/scip-to-graph.sh
tests/upgrade-capabilities.bats:150:    run bash scripts/scip-to-graph.sh --input "$test_file" --output "$TEST_DB_PATH" --fallback-regex
scripts/ast-delta.sh:651:            # 如果有 scip-to-graph.sh，使用它进行全量重建
scripts/ast-delta.sh:652:            if [[ -x "$SCRIPT_DIR/scip-to-graph.sh" ]]; then
scripts/ast-delta.sh:653:                log_info "Using scip-to-graph.sh for full rebuild"
scripts/ast-delta.sh:654:                "$SCRIPT_DIR/scip-to-graph.sh" 2>/dev/null || true
scripts/ast-delta.sh:671:            # 尝试使用 scip-to-graph.sh
scripts/ast-delta.sh:672:            if [[ -x "$SCRIPT_DIR/scip-to-graph.sh" ]]; then
scripts/ast-delta.sh:673:                "$SCRIPT_DIR/scip-to-graph.sh" 2>/dev/null || true
scripts/scip-to-graph.sh:2:# scip-to-graph.sh - SCIP 索引解析转换脚本
scripts/scip-to-graph.sh:21:LOG_PREFIX="scip-to-graph"
scripts/scip-to-graph.sh:658:scip-to-graph.sh - SCIP 索引解析转换
scripts/scip-to-graph.sh:661:    scip-to-graph.sh <command> [options]
scripts/scip-to-graph.sh:687:    scip-to-graph.sh parse
scripts/scip-to-graph.sh:690:    scip-to-graph.sh parse --incremental
scripts/scip-to-graph.sh:693:    scip-to-graph.sh parse --force --format json
scripts/scip-to-graph.sh:696:    scip-to-graph.sh is-fresh
dev-playbooks/specs/architecture/c4.md:170:| ***SCIP Parser*** | `scripts/scip-to-graph.sh` | Script | ***SCIP 索引解析，symbol_roles 映射，IMPLEMENTS/EXTENDS/RETURNS_TYPE 边类型提取，正则降级*** | Bash |
dev-playbooks/specs/architecture/c4.md:190:| `scripts/scip-to-graph.sh` | 边类型扩展：IMPLEMENTS/EXTENDS/RETURNS_TYPE/ADR_RELATED |
dev-playbooks/specs/architecture/c4.md:202:| `scripts/scip-to-graph.sh` | SCIP 解析器扩展：IMPLEMENTS/EXTENDS/RETURNS_TYPE 边类型提取，正则降级解析 |
dev-playbooks/specs/architecture/c4.md:507:| 2026-01-15 | **augment-parity** | **Augment 能力对等**：新增 graph-store.sh（SQLite 图存储，4 种边类型 CRUD）、scip-to-graph.sh（SCIP 索引解析转换）、daemon.sh（常驻守护进程，Unix Socket 通信）；增强 graph-rag.sh（LLM 重排序）、dependency-guard.sh（孤儿模块检测）、pattern-learner.sh（自动模式发现）、common.sh（llm_call() 适配函数）；新增 MCP 工具 ci_graph_store；新增 config/features.yaml 功能开关配置 |
dev-playbooks/specs/architecture/c4.md:509:| 2026-01-17 | *****augment-parity-final-gaps***** | *****补齐 Augment 对等最后差距（100% 轻资产能力对等）*****：新增 adr-parser.sh（ADR 解析与关联）、.github/workflows/arch-check.yml（GitHub Action CI/CD）、.gitlab-ci.yml.template（GitLab CI 模板）；增强 scip-to-graph.sh（边类型扩展：IMPLEMENTS/EXTENDS/RETURNS_TYPE/ADR_RELATED）、graph-store.sh（find-path 路径查询 + migrate 迁移命令）、intent-learner.sh（对话上下文持久化 + 会话管理 + 连续性加权）、daemon.sh（预热机制 + 请求取消协议）、cache-manager.sh（子图 LRU 缓存，SQLite 持久化，跨进程共享）、bug-locator.sh（影响分析融合 --with-impact）、augment-context-global.sh（5 层结构化输出 + DevBooks 适配）、common.sh（detect_devbooks() + load_devbooks_context()） |
dev-playbooks/specs/architecture/c4.md:510:| 2026-01-18 | ******upgrade-code-intelligence-capabilities****** | ******代码智能能力轻资产升级（70% → 85-90%）******：新增 CKBClientManager（src/server.ts 内，MCP Client SDK 集成，健康检查，降级状态管理）、fusion_search()（scripts/embedding.sh，图+向量融合查询）；增强 scip-to-graph.sh（IMPLEMENTS/EXTENDS/RETURNS_TYPE 边类型解析，正则降级）、graph-store.sh（Schema v3 迁移，自动备份与回滚，并发保护）、graph-rag.sh（--fusion-depth 参数，融合查询集成）、daemon.sh（自动预热，异步执行，30s 超时）；新增 4 个 CLI 规格（mcp-output-format, graph-store-cli, graph-rag-cli, daemon-cli） |
dev-playbooks/specs/scip-parser/spec.md:91:**When**: 执行 `scip-to-graph.sh parse`
dev-playbooks/specs/scip-parser/spec.md:122:**When**: 执行 `scip-to-graph.sh parse`
dev-playbooks/specs/scip-parser/spec.md:131:**When**: 执行 `scip-to-graph.sh parse`
dev-playbooks/specs/scip-parser/spec.md:143:**When**: 执行 `scip-to-graph.sh parse --incremental`
dev-playbooks/specs/scip-parser/spec.md:155:**When**: 执行 `scip-to-graph.sh parse --incremental`
dev-playbooks/specs/scip-parser/spec.md:164:**When**: 执行 `scip-to-graph.sh parse --force`
dev-playbooks/specs/scip-parser/spec.md:195:**When**: 执行 `SCIP_INDEX_PATH=build/index.scip scip-to-graph.sh parse`
dev-playbooks/specs/graph-store-enhancement/spec.md:141:**When**: 执行 `scip-to-graph.sh` 转换
dev-playbooks/specs/graph-store-enhancement/spec.md:152:**When**: 执行 `scip-to-graph.sh` 转换
dev-playbooks/specs/graph-store-enhancement/spec.md:163:**When**: 执行 `scip-to-graph.sh` 转换
dev-playbooks/specs/graph-store-enhancement/spec.md:174:**When**: 执行 `scip-to-graph.sh` 转换
dev-playbooks/specs/graph-store-enhancement/spec.md:185:**When**: 执行 `scip-to-graph.sh` 转换
