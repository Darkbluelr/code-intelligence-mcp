# 系统熵度量报告

**采集日期**: 2026-01-15
**报告类型**: 首次采集（基线）
**项目**: code-intelligence-mcp

---

## 概要

| 维度 | 健康度 | 状态 |
|------|--------|------|
| 结构熵 | 70% | ⚠️ 警告 |
| 变更熵 | 80% | ✅ 健康 |
| 测试熵 | 60% | ⚠️ 警告 |
| 依赖熵 | 30% | ❌ 预警 |
| **综合** | **60%** | ⚠️ 需关注 |

---

## A) 结构熵 (Structural Entropy)

| 指标 | 当前值 | 阈值 | 状态 |
|------|--------|------|------|
| 总代码行数 | 14,296 | - | 📊 |
| 生产代码行数 | 9,259 | - | 📊 |
| 文件数量 | 29 | - | 📊 |
| 函数数量 | 349 | - | 📊 |
| 文件行数 P95 | 1,332 | < 500 | ❌ 超阈值 |
| 平均文件行数 | 493 | - | ⚠️ 偏高 |
| 平均函数行数 | 41 | < 50 | ✅ |

### 大文件预警（超过 500 行）

| 文件 | 行数 | 风险 |
|------|------|------|
| `scripts/embedding.sh` | 1,332 | 🔴 高 |
| `scripts/dependency-guard.sh` | 1,263 | 🔴 高 |
| `hooks/augment-context-global.sh` | 1,099 | 🔴 高 |
| `scripts/graph-rag.sh` | 989 | 🔴 高 |
| `scripts/federation-lite.sh` | 912 | 🔴 高 |
| `scripts/bug-locator.sh` | 910 | 🔴 高 |
| `scripts/call-chain.sh` | 764 | 🟡 中 |
| `scripts/pattern-learner.sh` | 706 | 🟡 中 |
| `scripts/cache-manager.sh` | 676 | 🟡 中 |
| `scripts/context-layer.sh` | 611 | 🟡 中 |
| `scripts/ast-diff.sh` | 595 | 🟡 中 |

**建议**: 考虑将大型 shell 脚本拆分为更小的模块化组件

---

## B) 变更熵 (Change Entropy)

| 指标 | 当前值 | 阈值 | 状态 |
|------|--------|------|------|
| 热点文件占比 | 50% | < 10% | ❌ 超阈值 |
| 耦合变更率 | 0% | < 30% | ✅ |
| 近30天提交数 | 1 | - | 📊 |

### 热点文件 Top 10（基于 CKB 分析）

| 文件 | 变更分数 | 风险级别 |
|------|----------|----------|
| `package-lock.json` | 8.81 | 低 |
| `scripts/embedding.sh` | 7.48 | 低 |
| `hooks/augment-context-global.sh` | 7.14 | 低 |
| `scripts/graph-rag.sh` | 7.09 | 低 |
| `scripts/bug-locator.sh` | 6.94 | 低 |
| `scripts/call-chain.sh` | 6.87 | 低 |
| `design.md` (变更包) | 6.86 | 低 |
| `scripts/pattern-learner.sh` | 6.82 | 低 |
| `Augment-Comparison-Upgrade.md` | 6.68 | 低 |
| `scripts/ast-diff.sh` | 6.64 | 低 |

**说明**: 项目只有 1 次提交（初始提交），热点数据反映的是初始代码量分布

---

## C) 测试熵 (Test Entropy)

| 指标 | 当前值 | 阈值 | 状态 |
|------|--------|------|------|
| 测试/代码比 | 0.54 | > 0.5 | ✅ |
| 测试文件数 | 14 | - | 📊 |
| 测试代码行数 | 5,037 | - | 📊 |
| 测试覆盖率 | N/A | > 70% | ⚠️ 未配置 |

**建议**: 配置测试覆盖率工具以获取精确数据

---

## D) 依赖熵 (Dependency Entropy)

| 指标 | 当前值 | 阈值 | 状态 |
|------|--------|------|------|
| 直接依赖数 | 1 | - | 📊 |
| 过期依赖占比 | 100% | < 20% | ❌ 超阈值 |
| 安全漏洞数 | 2 | = 0 | ❌ 超阈值 |

### 安全预警

检测到 **2 个安全漏洞**，需要立即处理：
- 建议执行 `npm audit fix` 修复已知漏洞
- 建议执行 `npm update` 更新过期依赖

---

## 综合建议

### 🔴 高优先级（需立即处理）

1. **安全漏洞修复**
   - 执行 `npm audit` 查看详细漏洞信息
   - 执行 `npm audit fix` 或手动更新受影响的包

2. **依赖更新**
   - 执行 `npm outdated` 查看过期依赖
   - 更新到安全的最新版本

### 🟡 中优先级（建议在下一迭代处理）

3. **大文件拆分**
   - `scripts/embedding.sh` (1,332 行) → 考虑拆分为独立模块
   - `scripts/dependency-guard.sh` (1,263 行) → 考虑拆分功能
   - `hooks/augment-context-global.sh` (1,099 行) → 模块化重构

### 🟢 低优先级（持续改进）

4. **测试覆盖率**
   - 配置覆盖率工具（如 nyc/istanbul）
   - 建立覆盖率基线并持续跟踪

---

## 下次采集建议

- **建议频率**: 每周一次（项目规模 ~15K LOC）
- **下次采集**: 2026-01-22
- **重点关注**: 依赖熵指标改善情况

---

*报告由 DevBooks Entropy Monitor 自动生成*
*CKB 状态: Git 后端可用，SCIP 索引不可用（耦合分析已跳过）*
